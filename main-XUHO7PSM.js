import{A as Xb,B as Fu,C as ud,D as $t,E as en,a as L,b as ce,c as Hb,d as mm,e as R,f as qb,g as sd,h as zb,i as Gb,j as Wb,k as Kb,l as ym,m as Qb,n as ku,o as vm,p as od,q as Yb,r as Zb,s as _m,t as Ge,u as us,v as Jn,w as ad,x as Ou,y as wm,z as Jb}from"./chunk-Y7QOJZE2.js";function Yk(n,e){return Object.is(n,e)}var yt=null,cd=!1,ld=1,Do=Symbol("SIGNAL");function xe(n){let e=yt;return yt=n,e}function eT(){return yt}var dd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function tT(n){if(cd)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(n);let e=yt.nextProducerIndex++;if(fd(yt),e<yt.producerNode.length&&yt.producerNode[e]!==n&&Vu(yt)){let t=yt.producerNode[e];hd(t,yt.producerIndexOfThis[e])}yt.producerNode[e]!==n&&(yt.producerNode[e]=n,yt.producerIndexOfThis[e]=Vu(yt)?sT(n,yt,e):0),yt.producerLastReadVersion[e]=n.version}function Zk(){ld++}function Jk(n){if(!(Vu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ld)){if(!n.producerMustRecompute(n)&&!Im(n)){n.dirty=!1,n.lastCleanEpoch=ld;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ld}}function nT(n){if(n.liveConsumerNode===void 0)return;let e=cd;cd=!0;try{for(let t of n.liveConsumerNode)t.dirty||Xk(t)}finally{cd=e}}function rT(){return yt?.consumerAllowSignalWrites!==!1}function Xk(n){n.dirty=!0,nT(n),n.consumerMarkedDirty?.(n)}function Em(n){return n&&(n.nextProducerIndex=0),xe(n)}function iT(n,e){if(xe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Vu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Im(n){fd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Jk(t),r!==t.version))return!0}return!1}function Dm(n){if(fd(n),Vu(n))for(let e=0;e<n.producerNode.length;e++)hd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sT(n,e,t){if(oT(n),n.liveConsumerNode.length===0&&aT(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=sT(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hd(n,e){if(oT(n),n.liveConsumerNode.length===1&&aT(n))for(let r=0;r<n.producerNode.length;r++)hd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fd(i),i.producerIndexOfThis[r]=e}}function Vu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function oT(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function aT(n){return n.producerNode!==void 0}function eO(){throw new Error}var uT=eO;function cT(){uT()}function lT(n){uT=n}var tO=null;function dT(n){let e=Object.create(fT);e.value=n;let t=()=>(tT(e),e.value);return t[Do]=e,t}function Cm(n,e){rT()||cT(),n.equal(n.value,e)||(n.value=e,nO(n))}function hT(n,e){rT()||cT(),Cm(n,e(n.value))}var fT=ce(L({},dd),{equal:Yk,value:void 0});function nO(n){n.version++,Zk(),nT(n),tO?.()}function se(n){return typeof n=="function"}function Co(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pd=Co(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function cs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Xe=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(se(r))try{r()}catch(s){e=s instanceof pd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{pT(s)}catch(o){e=e??[],o instanceof pd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&cs(t,e)}remove(e){let{_finalizers:t}=this;t&&cs(t,e),e instanceof n&&e._removeParent(this)}};Xe.EMPTY=(()=>{let n=new Xe;return n.closed=!0,n})();var bm=Xe.EMPTY;function gd(n){return n instanceof Xe||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function pT(n){se(n)?n():n.unsubscribe()}var On={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var bo={setTimeout(n,e,...t){let{delegate:r}=bo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=bo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function md(n){bo.setTimeout(()=>{let{onUnhandledError:e}=On;if(e)e(n);else throw n})}function Lu(){}var gT=Tm("C",void 0,void 0);function mT(n){return Tm("E",void 0,n)}function yT(n){return Tm("N",n,void 0)}function Tm(n,e,t){return{kind:n,value:e,error:t}}var ls=null;function To(n){if(On.useDeprecatedSynchronousErrorHandling){let e=!ls;if(e&&(ls={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ls;if(ls=null,t)throw r}}else n()}function vT(n){On.useDeprecatedSynchronousErrorHandling&&ls&&(ls.errorThrown=!0,ls.error=n)}var ds=class extends Xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gd(e)&&e.add(this)):this.destination=sO}static create(e,t,r){return new xr(e,t,r)}next(e){this.isStopped?Am(yT(e),this):this._next(e)}error(e){this.isStopped?Am(mT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Am(gT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rO=Function.prototype.bind;function Sm(n,e){return rO.call(n,e)}var Mm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yd(r)}else yd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yd(t)}}},xr=class extends ds{constructor(e,t,r){super();let i;if(se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&On.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Sm(e.next,s),error:e.error&&Sm(e.error,s),complete:e.complete&&Sm(e.complete,s)}):i=e}this.destination=new Mm(i)}};function yd(n){On.useDeprecatedSynchronousErrorHandling?vT(n):md(n)}function iO(n){throw n}function Am(n,e){let{onStoppedNotification:t}=On;t&&bo.setTimeout(()=>t(n,e))}var sO={closed:!0,next:Lu,error:iO,complete:Lu};var So=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ht(n){return n}function vd(...n){return xm(n)}function xm(n){return n.length===0?Ht:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=aO(t)?t:new xr(t,r,i);return To(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_T(r),new r((i,s)=>{let o=new xr({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[So](){return this}pipe(...t){return xm(t)(this)}toPromise(t){return t=_T(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function _T(n){var e;return(e=n??On.Promise)!==null&&e!==void 0?e:Promise}function oO(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function aO(n){return n&&n instanceof ds||oO(n)&&gd(n)}function Nm(n){return se(n?.lift)}function pe(n){return e=>{if(Nm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(n,e,t,r,i){return new Rm(n,e,t,r,i)}var Rm=class extends ds{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ao(){return pe((n,e)=>{let t=null;n._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Mo=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Nm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xe;let t=this.getSubject();e.add(this.source.subscribe(ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xe.EMPTY)}return e}refCount(){return Ao()(this)}};var wT=Co(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _d(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wT}next(t){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){To(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?bm:(this.currentObservers=null,s.push(t),new Xe(()=>{this.currentObservers=null,cs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new _d(e,t),n})(),_d=class extends Me{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:bm}};var St=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ju={now(){return(ju.delegate||Date).now()},delegate:void 0};var wd=class extends Me{constructor(e=1/0,t=1/0,r=ju){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}};var Ed=class extends Xe{constructor(e,t){super()}schedule(e,t=0){return this}};var Bu={setInterval(n,e,...t){let{delegate:r}=Bu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Bu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var xo=class extends Ed{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Bu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Bu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,cs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var No=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};No.now=ju.now;var Ro=class extends No{constructor(e,t=No.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Uu=new Ro(xo);var Id=class extends xo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Dd=class extends Ro{};var Pm=new Dd(Id);var qt=new he(n=>n.complete());function ET(n){return n&&se(n.schedule)}function km(n){return n[n.length-1]}function Cd(n){return se(km(n))?n.pop():void 0}function Xn(n){return ET(km(n))?n.pop():void 0}function IT(n,e){return typeof km(n)=="number"?n.pop():e}var bd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Td(n){return se(n?.then)}function Sd(n){return se(n[So])}function Ad(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Md(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xd=uO();function Nd(n){return se(n?.[xd])}function Rd(n){return zb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield sd(t.read());if(i)return yield sd(void 0);yield yield sd(r)}}finally{t.releaseLock()}})}function Pd(n){return se(n?.getReader)}function $e(n){if(n instanceof he)return n;if(n!=null){if(Sd(n))return cO(n);if(bd(n))return lO(n);if(Td(n))return dO(n);if(Ad(n))return DT(n);if(Nd(n))return hO(n);if(Pd(n))return fO(n)}throw Md(n)}function cO(n){return new he(e=>{let t=n[So]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lO(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dO(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,md)})}function hO(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function DT(n){return new he(e=>{pO(n,e).catch(t=>e.error(t))})}function fO(n){return DT(Rd(n))}function pO(n,e){var t,r,i,s;return qb(this,void 0,void 0,function*(){try{for(t=Gb(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function tn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function cn(n,e=0){return pe((t,r)=>{t.subscribe(ge(r,i=>tn(r,n,()=>r.next(i),e),()=>tn(r,n,()=>r.complete(),e),i=>tn(r,n,()=>r.error(i),e)))})}function wn(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function CT(n,e){return $e(n).pipe(wn(e),cn(e))}function bT(n,e){return $e(n).pipe(wn(e),cn(e))}function TT(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ST(n,e){return new he(t=>{let r;return tn(t,e,()=>{r=n[xd](),tn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>se(r?.return)&&r.return()})}function kd(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{tn(t,e,()=>{let r=n[Symbol.asyncIterator]();tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function AT(n,e){return kd(Rd(n),e)}function MT(n,e){if(n!=null){if(Sd(n))return CT(n,e);if(bd(n))return TT(n,e);if(Td(n))return bT(n,e);if(Ad(n))return kd(n,e);if(Nd(n))return ST(n,e);if(Pd(n))return AT(n,e)}throw Md(n)}function De(n,e){return e?MT(n,e):$e(n)}function re(...n){let e=Xn(n);return De(n,e)}function Po(n,e){let t=se(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function Om(n){return!!n&&(n instanceof he||se(n.lift)&&se(n.subscribe))}var Nr=Co(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ne(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:gO}=Array;function mO(n,e){return gO(e)?n(...e):n(e)}function Od(n){return ne(e=>mO(n,e))}var{isArray:yO}=Array,{getPrototypeOf:vO,prototype:_O,keys:wO}=Object;function Fd(n){if(n.length===1){let e=n[0];if(yO(e))return{args:e,keys:null};if(EO(e)){let t=wO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function EO(n){return n&&typeof n=="object"&&vO(n)===_O}function Vd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function $u(...n){let e=Xn(n),t=Cd(n),{args:r,keys:i}=Fd(n);if(r.length===0)return De([],e);let s=new he(IO(r,e,i?o=>Vd(i,o):Ht));return t?s.pipe(Od(t)):s}function IO(n,e,t=Ht){return r=>{xT(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)xT(e,()=>{let l=De(n[u],e),d=!1;l.subscribe(ge(r,f=>{s[u]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function xT(n,e,t){n?tn(t,n,e):e()}function NT(n,e,t,r,i,s,o,a){let u=[],l=0,d=0,f=!1,g=()=>{f&&!u.length&&!l&&e.complete()},m=D=>l<r?_(D):u.push(D),_=D=>{s&&e.next(D),l++;let b=!1;$e(t(D,d++)).subscribe(ge(e,k=>{i?.(k),s?m(k):e.next(k)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;u.length&&l<r;){let k=u.shift();o?tn(e,o,()=>_(k)):_(k)}g()}catch(k){e.error(k)}}))};return n.subscribe(ge(e,m,()=>{f=!0,g()})),()=>{a?.()}}function ct(n,e,t=1/0){return se(e)?ct((r,i)=>ne((s,o)=>e(r,s,i,o))($e(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>NT(r,i,n,t)))}function fi(n=1/0){return ct(Ht,n)}function RT(){return fi(1)}function ko(...n){return RT()(De(n,Xn(n)))}function Ld(n){return new he(e=>{$e(n()).subscribe(e)})}function Fm(...n){let e=Cd(n),{args:t,keys:r}=Fd(n),i=new he(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let d=0;d<o;d++){let f=!1;$e(t[d]).subscribe(ge(s,g=>{f||(f=!0,l--),a[d]=g},()=>u--,void 0,()=>{(!u||!f)&&(l||s.next(r?Vd(r,a):a),s.complete())}))}});return e?i.pipe(Od(e)):i}function Vm(...n){let e=Xn(n),t=IT(n,1/0),r=n;return r.length?r.length===1?$e(r[0]):fi(t)(De(r,e)):qt}function Et(n,e){return pe((t,r)=>{let i=0;t.subscribe(ge(r,s=>n.call(e,s,i++)&&r.next(s)))})}function pi(n){return pe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ge(t,void 0,void 0,o=>{s=$e(n(o,pi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function PT(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(ge(o,d=>{let f=l++;u=a?n(u,d,f):(a=!0,d),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function hs(n,e){return se(e)?ct(n,e,1):ct(n,1)}function gi(n){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Rr(n){return n<=0?()=>qt:pe((e,t)=>{let r=0;e.subscribe(ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Lm(n){return ne(()=>n)}function jd(n,e=Ht){return n=n??DO,pe((t,r)=>{let i,s=!0;t.subscribe(ge(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function DO(n,e){return n===e}function Bd(n=CO){return pe((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function CO(){return new Nr}function Hu(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function En(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,s)=>n(i,s,r)):Ht,Rr(1),t?gi(e):Bd(()=>new Nr))}function Oo(n){return n<=0?()=>qt:pe((e,t)=>{let r=[];e.subscribe(ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function jm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Et((i,s)=>n(i,s,r)):Ht,Oo(1),t?gi(e):Bd(()=>new Nr))}function Fo(){return pe((n,e)=>{let t,r=!1;n.subscribe(ge(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function mi(n,e){return pe(PT(n,e,arguments.length>=2,!0))}function kT(n={}){let{connector:e=()=>new Me,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=u=void 0,d=f=!1},_=()=>{let D=o;m(),D?.unsubscribe()};return pe((D,b)=>{l++,!f&&!d&&g();let k=u=u??e();b.add(()=>{l--,l===0&&!f&&!d&&(a=Bm(_,i))}),k.subscribe(b),!o&&l>0&&(o=new xr({next:B=>k.next(B),error:B=>{f=!0,g(),a=Bm(m,t,B),k.error(B)},complete:()=>{d=!0,g(),a=Bm(m,r),k.complete()}}),$e(D).subscribe(o))})(s)}}function Bm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new xr({next:()=>{r.unsubscribe(),n()}});return $e(e(...t)).subscribe(r)}function Ud(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,kT({connector:()=>new wd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function yi(...n){let e=Xn(n);return pe((t,r)=>{(e?ko(n,t,e):ko(n,t)).subscribe(r)})}function et(n,e){return pe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,d=s++;$e(n(u,d)).subscribe(i=ge(r,f=>r.next(e?e(u,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function $d(n,e){return se(e)?et(()=>n,e):et(()=>n)}function Um(n){return pe((e,t)=>{$e(n).subscribe(ge(t,()=>t.complete(),Lu)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=se(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ge(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ht}var b0="https://g.co/ng/security#xss",j=class extends Error{constructor(e,t){super(Zy(e,t)),this.code=e}};function Zy(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Xu(n){return{toString:n}.toString()}var Hd="__parameters__";function bO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function T0(n,e,t){return Xu(()=>{let r=bO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,d){let f=u.hasOwnProperty(Hd)?u[Hd]:Object.defineProperty(u,Hd,{value:[]})[Hd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var _t=globalThis;function Fe(n){for(let e in n)if(n[e]===Fe)return e;throw Error("Could not find renamed property on target object.")}function TO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ny(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var SO=Fe({__forward_ref__:Fe});function Ds(n){return n.__forward_ref__=Ds,n.toString=function(){return Gt(this())},n}function zt(n){return S0(n)?n():n}function S0(n){return typeof n=="function"&&n.hasOwnProperty(SO)&&n.__forward_ref__===Ds}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function We(n){return{providers:n.providers||[],imports:n.imports||[]}}function Th(n){return OT(n,M0)||OT(n,x0)}function A0(n){return Th(n)!==null}function OT(n,e){return n.hasOwnProperty(e)?n[e]:null}function AO(n){let e=n&&(n[M0]||n[x0]);return e||null}function FT(n){return n&&(n.hasOwnProperty(VT)||n.hasOwnProperty(MO))?n[VT]:null}var M0=Fe({\u0275prov:Fe}),VT=Fe({\u0275inj:Fe}),x0=Fe({ngInjectableDef:Fe}),MO=Fe({ngInjectorDef:Fe}),q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function N0(n){return n&&!!n.\u0275providers}var xO=Fe({\u0275cmp:Fe}),NO=Fe({\u0275dir:Fe}),RO=Fe({\u0275pipe:Fe}),PO=Fe({\u0275mod:Fe}),th=Fe({\u0275fac:Fe}),qu=Fe({__NG_ELEMENT_ID__:Fe}),LT=Fe({__NG_ENV_ID__:Fe});function ec(n){return typeof n=="string"?n:n==null?"":String(n)}function kO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():ec(n)}function OO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,n)}function Jy(n,e){throw new j(-201,!1)}var me=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(me||{}),ry;function R0(){return ry}function nn(n){let e=ry;return ry=n,e}function P0(n,e,t){let r=Th(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&me.Optional)return null;if(e!==void 0)return e;Jy(n,"Injector")}var FO={},Gu=FO,iy="__NG_DI_FLAG__",nh="ngTempTokenPath",VO="ngTokenPath",LO=/\n/gm,jO="\u0275",jT="__source",Bo;function BO(){return Bo}function vi(n){let e=Bo;return Bo=n,e}function UO(n,e=me.Default){if(Bo===void 0)throw new j(-203,!1);return Bo===null?P0(n,void 0,e):Bo.get(n,e&me.Optional?null:void 0,e)}function V(n,e=me.Default){return(R0()||UO)(zt(n),e)}function U(n,e=me.Default){return V(n,Sh(e))}function Sh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function sy(n){let e=[];for(let t=0;t<n.length;t++){let r=zt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=me.Default;for(let o=0;o<r.length;o++){let a=r[o],u=$O(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(V(i,s))}else e.push(V(r))}return e}function k0(n,e){return n[iy]=e,n.prototype[iy]=e,n}function $O(n){return n[iy]}function HO(n,e,t,r){let i=n[nh];throw e[jT]&&i.unshift(e[jT]),n.message=qO(`
`+n.message,i,t,r),n[VO]=i,n[nh]=null,n}function qO(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==jO?n.slice(2):n;let i=Gt(e);if(Array.isArray(e))i=e.map(Gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(LO,`
  `)}`}var on=k0(T0("Optional"),8);var Xy=k0(T0("SkipSelf"),4);function ms(n,e){let t=n.hasOwnProperty(th);return t?n[th]:null}function ev(n,e){n.forEach(t=>Array.isArray(t)?ev(t,e):e(t))}function O0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function zO(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function tv(n,e,t){let r=tc(n,e);return r>=0?n[r|1]=t:(r=~r,zO(n,r,e,t)),r}function $m(n,e){let t=tc(n,e);if(t>=0)return n[t|1]}function tc(n,e){return GO(n,e,1)}function GO(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var $o={},rn=[],Ho=new q(""),F0=new q("",-1),V0=new q(""),ih=class{get(e,t=Gu){if(t===Gu){let r=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw r.name="NullInjectorError",r}return t}},L0=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(L0||{}),nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(nr||{}),qo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qo||{});function WO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function oy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];KO(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function j0(n){return n===3||n===4||n===6}function KO(n){return n.charCodeAt(0)===64}function Wu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BT(n,t,i,null,e[++r]):BT(n,t,i,null,null))}}return n}function BT(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var B0="ng-template";function QO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&WO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(nv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function nv(n){return n.type===4&&n.value!==B0}function YO(n,e,t){let r=n.type===4&&!t?B0:n.value;return e===r}function ZO(n,e,t){let r=4,i=n.attrs,s=i!==null?eF(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!Fn(r)&&!Fn(u))return!1;if(o&&Fn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!YO(n,u,t)||u===""&&e.length===1){if(Fn(r))return!1;o=!0}}else if(r&8){if(i===null||!QO(n,i,u,t)){if(Fn(r))return!1;o=!0}}else{let l=e[++a],d=JO(u,i,nv(n),t);if(d===-1){if(Fn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Fn(r))return!1;o=!0}}}}return Fn(r)||o}function Fn(n){return(n&1)===0}function JO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return tF(e,n)}function XO(n,e,t=!1){for(let r=0;r<e.length;r++)if(ZO(n,e[r],t))return!0;return!1}function eF(n){for(let e=0;e<n.length;e++){let t=n[e];if(j0(t))return e}return n.length}function tF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function UT(n,e){return n?":not("+e.trim()+")":e}function nF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Fn(o)&&(e+=UT(s,i),i=""),r=o,s=s||!Fn(r);t++}return i!==""&&(e+=UT(s,i)),e}function rF(n){return n.map(nF).join(",")}function iF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Fn(i))break;i=s}r++}return{attrs:e,classes:t}}function ln(n){return Xu(()=>{let e=G0(n),t=ce(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===L0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||nr.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});W0(t);let r=n.dependencies;return t.directiveDefs=HT(r,!1),t.pipeDefs=HT(r,!0),t.id=aF(t),t})}function sF(n){return Ii(n)||$0(n)}function oF(n){return n!==null}function Ke(n){return Xu(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $T(n,e){if(n==null)return $o;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=qo.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==qo.None?[r,a]:r,e[s]=o):t[s]=r}return t}function At(n){return Xu(()=>{let e=G0(n);return W0(e),e})}function U0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ii(n){return n[xO]||null}function $0(n){return n[NO]||null}function H0(n){return n[RO]||null}function q0(n){let e=Ii(n)||$0(n)||H0(n);return e!==null?e.standalone:!1}function z0(n,e){let t=n[PO]||null;if(!t&&e===!0)throw new Error(`Type ${Gt(n)} does not have '\u0275mod' property.`);return t}function G0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$T(n.inputs,e),outputs:$T(n.outputs),debugInfo:null}}function W0(n){n.features?.forEach(e=>e(n))}function HT(n,e){if(!n)return null;let t=e?H0:sF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oF)}function aF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Si(n){return{\u0275providers:n}}function uF(...n){return{\u0275providers:K0(!0,n),\u0275fromNgModule:!0}}function K0(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return ev(e,o=>{let a=o;ay(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Q0(i,s),t}function Q0(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rv(i,s=>{e(s,r)})}}function ay(n,e,t,r){if(n=zt(n),!n)return!1;let i=null,s=FT(n),o=!s&&Ii(n);if(!s&&!o){let u=n.ngModule;if(s=FT(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)ay(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ev(s.imports,d=>{ay(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Q0(l,e)}if(!a){let l=ms(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:V0,useValue:i,multi:!0},i),e({provide:Ho,useValue:()=>V(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;rv(u,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rv(n,e){for(let t of n)N0(t)&&(t=t.\u0275providers),Array.isArray(t)?rv(t,e):e(t)}var cF=Fe({provide:String,useValue:Fe});function Y0(n){return n!==null&&typeof n=="object"&&cF in n}function lF(n){return!!(n&&n.useExisting)}function dF(n){return!!(n&&n.useFactory)}function zo(n){return typeof n=="function"}function hF(n){return!!n.useClass}var Ah=new q(""),Yd={},fF={},Hm;function iv(){return Hm===void 0&&(Hm=new ih),Hm}var sn=class{},Ku=class extends sn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cy(e,o=>this.processProvider(o)),this.records.set(F0,Vo(void 0,this)),i.has("environment")&&this.records.set(sn,Vo(void 0,this));let s=this.records.get(Ah);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(V0,rn,me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=xe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),xe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=vi(this),r=nn(void 0),i;try{return e()}finally{vi(t),nn(r)}}get(e,t=Gu,r=me.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(LT))return e[LT](this);r=Sh(r);let i,s=vi(this),o=nn(void 0);try{if(!(r&me.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=vF(e)&&Th(e);l&&this.injectableDefInScope(l)?u=Vo(uy(e),Yd):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&me.Self?iv():this.parent;return t=r&me.Optional&&t===Gu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[nh]=a[nh]||[]).unshift(Gt(e)),s)throw a;return HO(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(o),vi(s)}}resolveInjectorInitializers(){let e=xe(null),t=vi(this),r=nn(void 0),i;try{let s=this.get(Ho,rn,me.Self);for(let o of s)o()}finally{vi(t),nn(r),xe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=zt(e);let t=zo(e)?e:zt(e&&e.provide),r=gF(e);if(!zo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Vo(void 0,Yd,!0),i.factory=()=>sy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=xe(null);try{return t.value===Yd&&(t.value=fF,t.value=t.factory()),typeof t.value=="object"&&t.value&&yF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{xe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=zt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function uy(n){let e=Th(n),t=e!==null?e.factory:ms(n);if(t!==null)return t;if(n instanceof q)throw new j(204,!1);if(n instanceof Function)return pF(n);throw new j(204,!1)}function pF(n){if(n.length>0)throw new j(204,!1);let t=AO(n);return t!==null?()=>t.factory(n):()=>new n}function gF(n){if(Y0(n))return Vo(void 0,n.useValue);{let e=Z0(n);return Vo(e,Yd)}}function Z0(n,e,t){let r;if(zo(n)){let i=zt(n);return ms(i)||uy(i)}else if(Y0(n))r=()=>zt(n.useValue);else if(dF(n))r=()=>n.useFactory(...sy(n.deps||[]));else if(lF(n))r=()=>V(zt(n.useExisting));else{let i=zt(n&&(n.useClass||n.provide));if(mF(n))r=()=>new i(...sy(n.deps));else return ms(i)||uy(i)}return r}function Vo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function mF(n){return!!n.deps}function yF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function vF(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function cy(n,e){for(let t of n)Array.isArray(t)?cy(t,e):t&&N0(t)?cy(t.\u0275providers,e):e(t)}function Un(n,e){n instanceof Ku&&n.assertNotDestroyed();let t,r=vi(n),i=nn(void 0);try{return e()}finally{vi(r),nn(i)}}function J0(){return R0()!==void 0||BO()!=null}function _F(n){if(!J0())throw new j(-203,!1)}function wF(n){let e=_t.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function EF(n){return typeof n=="function"}var ar=0,_e=1,oe=2,Wt=3,Ln=4,$n=5,sh=6,oh=7,jn=8,Go=9,rr=10,dt=11,Qu=12,qT=13,ea=14,ir=15,Wo=16,Lo=17,Ko=18,Mh=19,X0=20,wi=21,qm=22,In=23,Bn=25,sv=1;var ys=7,ah=8,uh=9,Dn=10,ch=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ch||{});function Ei(n){return Array.isArray(n)&&typeof n[sv]=="object"}function Vr(n){return Array.isArray(n)&&n[sv]===!0}function ov(n){return(n.flags&4)!==0}function xh(n){return n.componentOffset>-1}function Nh(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function ly(n){return(n[oe]&512)!==0}var dy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function eS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ai(){return tS}function tS(n){return n.type.prototype.ngOnChanges&&(n.setInput=DF),IF}Ai.ngInherit=!0;function IF(){let n=rS(this),e=n?.current;if(e){let t=n.previous;if(t===$o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function DF(n,e,t,r,i){let s=this.declaredInputs[r],o=rS(n)||CF(n,{previous:$o,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new dy(l&&l.currentValue,t,u===$o),eS(n,e,i,t)}var nS="__ngSimpleChanges__";function rS(n){return n[nS]||null}function CF(n,e){return n[nS]=e}var zT=null;var er=function(n,e,t){zT?.(n,e,t)},bF="svg",TF="math";function sr(n){for(;Array.isArray(n);)n=n[ar];return n}function SF(n){for(;Array.isArray(n);){if(typeof n[sv]=="object")return n;n=n[ar]}return null}function iS(n,e){return sr(e[n])}function Cn(n,e){return sr(e[n.index])}function sS(n,e){return n.data[e]}function AF(n,e){return n[e]}function Mi(n,e){let t=e[n];return Ei(t)?t:t[ar]}function av(n){return(n[oe]&128)===128}function MF(n){return Vr(n[Wt])}function Qo(n,e){return e==null?null:n[e]}function oS(n){n[Lo]=0}function aS(n){n[oe]&1024||(n[oe]|=1024,av(n)&&Rh(n))}function xF(n,e){for(;n>0;)e=e[ea],n--;return e}function Yu(n){return!!(n[oe]&9216||n[In]?.dirty)}function hy(n){n[rr].changeDetectionScheduler?.notify(7),n[oe]&64&&(n[oe]|=1024),Yu(n)&&Rh(n)}function Rh(n){n[rr].changeDetectionScheduler?.notify(0);let e=vs(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!av(e)));)e=vs(e)}function uS(n,e){if((n[oe]&256)===256)throw new j(911,!1);n[wi]===null&&(n[wi]=[]),n[wi].push(e)}function NF(n,e){if(n[wi]===null)return;let t=n[wi].indexOf(e);t!==-1&&n[wi].splice(t,1)}function vs(n){let e=n[Wt];return Vr(e)?e[Wt]:e}var we={lFrame:wS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cS=!1;function RF(){return we.lFrame.elementDepthCount}function PF(){we.lFrame.elementDepthCount++}function kF(){we.lFrame.elementDepthCount--}function lS(){return we.bindingsEnabled}function OF(){return we.skipHydrationRootTNode!==null}function FF(n){return we.skipHydrationRootTNode===n}function VF(){we.skipHydrationRootTNode=null}function Re(){return we.lFrame.lView}function kt(){return we.lFrame.tView}function nc(n){return we.lFrame.contextLView=n,n[jn]}function rc(n){return we.lFrame.contextLView=null,n}function Kt(){let n=dS();for(;n!==null&&n.type===64;)n=n.parent;return n}function dS(){return we.lFrame.currentTNode}function LF(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Cs(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function uv(){return we.lFrame.isParent}function hS(){we.lFrame.isParent=!1}function fS(){return cS}function GT(n){cS=n}function pS(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function jF(n){return we.lFrame.bindingIndex=n}function Ph(){return we.lFrame.bindingIndex++}function gS(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function BF(){return we.lFrame.inI18n}function UF(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,fy(e)}function $F(){return we.lFrame.currentDirectiveIndex}function fy(n){we.lFrame.currentDirectiveIndex=n}function mS(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function yS(n){we.lFrame.currentQueryIndex=n}function HF(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[$n]:null}function vS(n,e,t){if(t&me.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&me.Host);)if(i=HF(s),i===null||(s=s[ea],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=we.lFrame=_S();return r.currentTNode=e,r.lView=n,!0}function cv(n){let e=_S(),t=n[_e];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function _S(){let n=we.lFrame,e=n===null?null:n.child;return e===null?wS(n):e}function wS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function ES(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var IS=ES;function lv(){let n=ES();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qF(n){return(we.lFrame.contextLView=xF(n,we.lFrame.contextLView))[jn]}function bs(){return we.lFrame.selectedIndex}function _s(n){we.lFrame.selectedIndex=n}function dv(){let n=we.lFrame;return sS(n.tView,n.selectedIndex)}function zF(){return we.lFrame.currentNamespace}var DS=!0;function kh(){return DS}function Oh(n){DS=n}function GF(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=tS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Fh(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Zd(n,e,t){CS(n,e,3,t)}function Jd(n,e,t,r){(n[oe]&3)===t&&CS(n,e,t,r)}function zm(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function CS(n,e,t,r){let i=r!==void 0?n[Lo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Lo]+=65536),(a<s||s==-1)&&(WF(n,t,e,u),n[Lo]=(n[Lo]&4294901760)+u+2),u++}function WT(n,e){er(4,n,e);let t=xe(null);try{e.call(n)}finally{xe(t),er(5,n,e)}}function WF(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[oe]>>14<n[Lo]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,WT(a,s)):WT(a,s)}var Uo=-1,ws=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function KF(n){return n instanceof ws}function QF(n){return(n.flags&8)!==0}function YF(n){return(n.flags&16)!==0}var Gm={},py=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Sh(r);let i=this.injector.get(e,Gm,r);return i!==Gm||t===Gm?i:this.parentInjector.get(e,t,r)}};function bS(n){return n!==Uo}function lh(n){return n&32767}function ZF(n){return n>>16}function dh(n,e){let t=ZF(n),r=e;for(;t>0;)r=r[ea],t--;return r}var gy=!0;function hh(n){let e=gy;return gy=n,e}var JF=256,TS=JF-1,SS=5,XF=0,tr={};function eV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(qu)&&(r=t[qu]),r==null&&(r=t[qu]=XF++);let i=r&TS,s=1<<i;e.data[n+(i>>SS)]|=s}function fh(n,e){let t=AS(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,Wm(r.data,n),Wm(e,null),Wm(r.blueprint,null));let i=hv(n,e),s=n.injectorIndex;if(bS(i)){let o=lh(i),a=dh(i,e),u=a[_e].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Wm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function AS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function hv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=PS(i),r===null)return Uo;if(t++,i=i[ea],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Uo}function my(n,e,t){eV(n,e,t)}function tV(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(j0(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function MS(n,e,t){if(t&me.Optional||n!==void 0)return n;Jy(e,"NodeInjector")}function xS(n,e,t,r){if(t&me.Optional&&r===void 0&&(r=null),!(t&(me.Self|me.Host))){let i=n[Go],s=nn(void 0);try{return i?i.get(e,r,t&me.Optional):P0(e,r,t&me.Optional)}finally{nn(s)}}return MS(r,e,t)}function NS(n,e,t,r=me.Default,i){if(n!==null){if(e[oe]&2048&&!(r&me.Self)){let o=oV(n,e,t,r,tr);if(o!==tr)return o}let s=RS(n,e,t,r,tr);if(s!==tr)return s}return xS(e,t,r,i)}function RS(n,e,t,r,i){let s=iV(t);if(typeof s=="function"){if(!vS(e,n,r))return r&me.Host?MS(i,t,r):xS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&me.Optional))Jy(t);else return o}finally{IS()}}else if(typeof s=="number"){let o=null,a=AS(n,e),u=Uo,l=r&me.Host?e[ir][$n]:null;for((a===-1||r&me.SkipSelf)&&(u=a===-1?hv(n,e):e[a+8],u===Uo||!QT(r,!1)?a=-1:(o=e[_e],a=lh(u),e=dh(u,e)));a!==-1;){let d=e[_e];if(KT(s,a,d.data)){let f=nV(a,e,t,o,r,l);if(f!==tr)return f}u=e[a+8],u!==Uo&&QT(r,e[_e].data[a+8]===l)&&KT(s,a,e)?(o=d,a=lh(u),e=dh(u,e)):a=-1}}return i}function nV(n,e,t,r,i,s){let o=e[_e],a=o.data[n+8],u=r==null?xh(a)&&gy:r!=o&&(a.type&3)!==0,l=i&me.Host&&s===a,d=rV(a,o,t,u,l);return d!==null?Yo(e,o,d,a):tr}function rV(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let _=o[m];if(m<u&&t===_||m>=u&&_.type===t)return m}if(i){let m=o[u];if(m&&Pr(m)&&m.type===t)return u}return null}function Yo(n,e,t,r){let i=n[t],s=e.data;if(KF(i)){let o=i;o.resolving&&OO(kO(s[t]));let a=hh(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?nn(o.injectImpl):null,d=vS(n,r,me.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&GF(t,s[t],e)}finally{l!==null&&nn(l),hh(a),o.resolving=!1,IS()}}return i}function iV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(qu)?n[qu]:void 0;return typeof e=="number"?e>=0?e&TS:sV:e}function KT(n,e,t){let r=1<<n;return!!(t[e+(n>>SS)]&r)}function QT(n,e){return!(n&me.Self)&&!(n&me.Host&&e)}var gs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return NS(this._tNode,this._lView,e,Sh(r),t)}};function sV(){return new gs(Kt(),Re())}function ta(n){return Xu(()=>{let e=n.prototype.constructor,t=e[th]||yy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[th]||yy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function yy(n){return S0(n)?()=>{let e=yy(zt(n));return e&&e()}:ms(n)}function oV(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[oe]&2048&&!(o[oe]&512);){let a=RS(s,o,t,r|me.Self,tr);if(a!==tr)return a;let u=s.parent;if(!u){let l=o[X0];if(l){let d=l.get(t,tr,r);if(d!==tr)return d}u=PS(o),o=o[ea]}s=u}return i}function PS(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[$n]:null}function fv(n){return tV(Kt(),n)}function YT(n,e=null,t=null,r){let i=kS(n,e,t,r);return i.resolveInjectorInitializers(),i}function kS(n,e=null,t=null,r,i=new Set){let s=[t||rn,uF(n)];return r=r||(typeof n=="object"?void 0:Gt(n)),new Ku(s,e||iv(),r||null,i)}var ps=class ps{static create(e,t){if(Array.isArray(e))return YT({name:""},t,e,"");{let r=e.name??"";return YT({name:r},e.parent,e.providers,r)}}};ps.THROW_IF_NOT_FOUND=Gu,ps.NULL=new ih,ps.\u0275prov=W({token:ps,providedIn:"any",factory:()=>V(F0)}),ps.__NG_ELEMENT_ID__=-1;var it=ps;var aV=new q("");aV.__NG_ELEMENT_ID__=n=>{let e=Kt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(n&me.Optional)return null;throw new j(204,!1)};var uV="ngOriginalError";function Km(n){return n[uV]}var or=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Km(e);for(;t&&Km(t);)t=Km(t);return t||null}},OS=new q("",{providedIn:"root",factory:()=>U(or).handleError.bind(void 0)}),pv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cV,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),vy=class extends pv{constructor(e){super(),this._lView=e}onDestroy(e){return uS(this._lView,e),()=>NF(this._lView,e)}};function cV(){return new vy(Re())}function lV(){return Vh(Kt(),Re())}function Vh(n,e){return new Lr(Cn(n,e))}var Lr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=lV;let n=e;return n})();var na=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new St(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var _y=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,J0()&&(this.destroyRef=U(pv,{optional:!0})??void 0,this.pendingTasks=U(na,{optional:!0})??void 0)}emit(e){let t=xe(null);try{super.next(e)}finally{xe(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Xe&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},lt=_y;function FS(n){return(n.flags&128)===128}var VS=new Map,dV=0;function hV(){return dV++}function fV(n){VS.set(n[Mh],n)}function pV(n){VS.delete(n[Mh])}var ZT="__ngContext__";function Di(n,e){Ei(e)?(n[ZT]=e[Mh],fV(e)):n[ZT]=e}function LS(n){return BS(n[Qu])}function jS(n){return BS(n[Ln])}function BS(n){for(;n!==null&&!Vr(n);)n=n[Ln];return n}var wy;function US(n){wy=n}function $S(){if(wy!==void 0)return wy;if(typeof document<"u")return document;throw new j(210,!1)}var Lh=new q("",{providedIn:"root",factory:()=>gV}),gV="ng",gv=new q(""),Ot=new q("",{providedIn:"platform",factory:()=>"unknown"});var mv=new q(""),yv=new q("",{providedIn:"root",factory:()=>$S().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mV="h",yV="b";var vV=()=>null;function vv(n,e,t=!1){return vV(n,e,t)}var HS=!1,_V=new q("",{providedIn:"root",factory:()=>HS});var qd;function wV(){if(qd===void 0&&(qd=null,_t.trustedTypes))try{qd=_t.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return qd}function jh(n){return wV()?.createHTML(n)||n}var zd;function qS(){if(zd===void 0&&(zd=null,_t.trustedTypes))try{zd=_t.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return zd}function JT(n){return qS()?.createHTML(n)||n}function XT(n){return qS()?.createScriptURL(n)||n}var kr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${b0})`}},Ey=class extends kr{getTypeName(){return"HTML"}},Iy=class extends kr{getTypeName(){return"Style"}},Dy=class extends kr{getTypeName(){return"Script"}},Cy=class extends kr{getTypeName(){return"URL"}},by=class extends kr{getTypeName(){return"ResourceURL"}};function bn(n){return n instanceof kr?n.changingThisBreaksApplicationSecurity:n}function jr(n,e){let t=EV(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${b0})`)}return t===e}function EV(n){return n instanceof kr&&n.getTypeName()||null}function zS(n){return new Ey(n)}function GS(n){return new Iy(n)}function WS(n){return new Dy(n)}function KS(n){return new Cy(n)}function QS(n){return new by(n)}function IV(n){let e=new Sy(n);return DV()?new Ty(e):e}var Ty=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(jh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}},Sy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=jh(e),t}};function DV(){try{return!!new window.DOMParser().parseFromString(jh(""),"text/html")}catch{return!1}}var CV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Bh(n){return n=String(n),n.match(CV)?n:"unsafe:"+n}function Br(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function ic(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var YS=Br("area,br,col,hr,img,wbr"),ZS=Br("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),JS=Br("rp,rt"),bV=ic(JS,ZS),TV=ic(ZS,Br("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),SV=ic(JS,Br("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),e0=ic(YS,TV,SV,bV),XS=Br("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),AV=Br("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),MV=Br("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),xV=ic(XS,AV,MV),NV=Br("script,style,template"),Ay=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=kV(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=PV(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=t0(e).toLowerCase();if(!e0.hasOwnProperty(t))return this.sanitizedSomething=!0,!NV.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!xV.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;XS[a]&&(u=Bh(u)),this.buf.push(" ",o,'="',n0(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=t0(e).toLowerCase();e0.hasOwnProperty(t)&&!YS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(n0(e))}};function RV(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function PV(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw eA(e);return e}function kV(n){let e=n.firstChild;if(e&&RV(n,e))throw eA(e);return e}function t0(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function eA(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var OV=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,FV=/([^\#-~ |!])/g;function n0(n){return n.replace(/&/g,"&amp;").replace(OV,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(FV,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Gd;function _v(n,e){let t=null;try{Gd=Gd||IV(n);let r=e?String(e):"";t=Gd.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Gd.getInertBodyElement(r)}while(r!==s);let a=new Ay().sanitizeChildren(r0(t)||t);return jh(a)}finally{if(t){let r=r0(t)||t;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function r0(n){return"content"in n&&VV(n)?n.content:null}function VV(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var dn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(dn||{});function wv(n){let e=Ev();return e?JT(e.sanitize(dn.HTML,n)||""):jr(n,"HTML")?JT(bn(n)):_v($S(),ec(n))}function LV(n){let e=Ev();return e?e.sanitize(dn.URL,n)||"":jr(n,"URL")?bn(n):Bh(ec(n))}function jV(n){let e=Ev();if(e)return XT(e.sanitize(dn.RESOURCE_URL,n)||"");if(jr(n,"ResourceURL"))return XT(bn(n));throw new j(904,!1)}function BV(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?jV:LV}function tA(n,e,t){return BV(e,t)(n)}function Ev(){let n=Re();return n&&n[rr].sanitizer}var UV=/^>|^->|<!--|-->|--!>|<!-$/g,$V=/(<|>)/g,HV="\u200B$1\u200B";function qV(n){return n.replace(UV,e=>e.replace($V,HV))}function nA(n){return n instanceof Function?n():n}function zV(n){return(n??U(it)).get(Ot)==="browser"}var Or=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Or||{}),GV;function Iv(n,e){return GV(n,e)}function jo(n,e,t,r,i){if(r!=null){let s,o=!1;Vr(r)?s=r:Ei(r)&&(o=!0,r=r[ar]);let a=sr(r);n===0&&t!==null?i==null?aA(e,t,a):ph(e,t,a,i||null,!0):n===1&&t!==null?ph(e,t,a,i||null,!0):n===2?cL(e,a,o):n===3&&e.destroyNode(a),s!=null&&dL(e,n,s,t,i)}}function WV(n,e){return n.createText(e)}function KV(n,e,t){n.setValue(e,t)}function QV(n,e){return n.createComment(qV(e))}function rA(n,e,t){return n.createElement(e,t)}function YV(n,e){iA(n,e),e[ar]=null,e[$n]=null}function ZV(n,e,t,r,i,s){r[ar]=i,r[$n]=e,$h(n,r,t,1,i,s)}function iA(n,e){e[rr].changeDetectionScheduler?.notify(8),$h(n,e,e[dt],2,null,null)}function JV(n){let e=n[Qu];if(!e)return Qm(n[_e],n);for(;e;){let t=null;if(Ei(e))t=e[Qu];else{let r=e[Dn];r&&(t=r)}if(!t){for(;e&&!e[Ln]&&e!==n;)Ei(e)&&Qm(e[_e],e),e=e[Wt];e===null&&(e=n),Ei(e)&&Qm(e[_e],e),t=e&&e[Ln]}e=t}}function XV(n,e,t,r){let i=Dn+r,s=t.length;r>0&&(t[i-1][Ln]=e),r<s-Dn?(e[Ln]=t[i],O0(t,Dn+r,e)):(t.push(e),e[Ln]=null),e[Wt]=t;let o=e[Wo];o!==null&&t!==o&&sA(o,e);let a=e[Ko];a!==null&&a.insertView(n),hy(e),e[oe]|=128}function sA(n,e){let t=n[uh],r=e[Wt];if(Ei(r))n[oe]|=ch.HasTransplantedViews;else{let i=r[Wt][ir];e[ir]!==i&&(n[oe]|=ch.HasTransplantedViews)}t===null?n[uh]=[e]:t.push(e)}function Dv(n,e){let t=n[uh],r=t.indexOf(e);t.splice(r,1)}function My(n,e){if(n.length<=Dn)return;let t=Dn+e,r=n[t];if(r){let i=r[Wo];i!==null&&i!==n&&Dv(i,r),e>0&&(n[t-1][Ln]=r[Ln]);let s=rh(n,Dn+e);YV(r[_e],r);let o=s[Ko];o!==null&&o.detachView(s[_e]),r[Wt]=null,r[Ln]=null,r[oe]&=-129}return r}function oA(n,e){if(!(e[oe]&256)){let t=e[dt];t.destroyNode&&$h(n,e,t,3,null,null),JV(e)}}function Qm(n,e){if(e[oe]&256)return;let t=xe(null);try{e[oe]&=-129,e[oe]|=256,e[In]&&Dm(e[In]),tL(n,e),eL(n,e),e[_e].type===1&&e[dt].destroy();let r=e[Wo];if(r!==null&&Vr(e[Wt])){r!==e[Wt]&&Dv(r,e);let i=e[Ko];i!==null&&i.detachView(n)}pV(e)}finally{xe(t)}}function eL(n,e){let t=n.cleanup,r=e[oh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[oh]=null);let i=e[wi];if(i!==null){e[wi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function tL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ws)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];er(4,a,u);try{u.call(a)}finally{er(5,a,u)}}else{er(4,i,s);try{s.call(i)}finally{er(5,i,s)}}}}}function nL(n,e,t){return rL(n,e.parent,t)}function rL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ar];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===nr.None||s===nr.Emulated)return null}return Cn(r,t)}}function ph(n,e,t,r,i){n.insertBefore(e,t,r,i)}function aA(n,e,t){n.appendChild(e,t)}function i0(n,e,t,r,i){r!==null?ph(n,e,t,r,i):aA(n,e,t)}function iL(n,e,t,r){n.removeChild(e,t,r)}function Cv(n,e){return n.parentNode(e)}function sL(n,e){return n.nextSibling(e)}function oL(n,e,t){return uL(n,e,t)}function aL(n,e,t){return n.type&40?Cn(n,t):null}var uL=aL,s0;function Uh(n,e,t,r){let i=nL(n,r,e),s=e[dt],o=r.parent||e[$n],a=oL(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)i0(s,i,t[u],a,!1);else i0(s,i,t,a,!1);s0!==void 0&&s0(s,r,e,t,i)}function Xd(n,e){if(e!==null){let t=e.type;if(t&3)return Cn(e,n);if(t&4)return xy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Xd(n,r);{let i=n[e.index];return Vr(i)?xy(-1,i):sr(i)}}else{if(t&32)return Iv(e,n)()||sr(n[e.index]);{let r=uA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=vs(n[ir]);return Xd(i,r)}else return Xd(n,e.next)}}}return null}function uA(n,e){if(e!==null){let r=n[ir][$n],i=e.projection;return r.projection[i]}return null}function xy(n,e){let t=Dn+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return Xd(r,i)}return e[ys]}function cL(n,e,t){let r=Cv(n,e);r&&iL(n,r,e,t)}function bv(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(o&&e===0&&(a&&Di(sr(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)bv(n,e,t.child,r,i,s,!1),jo(e,n,i,a,s);else if(u&32){let l=Iv(t,r),d;for(;d=l();)jo(e,n,i,d,s);jo(e,n,i,a,s)}else u&16?lL(n,e,r,t,i,s):jo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function $h(n,e,t,r,i,s){bv(t,r,n.firstChild,e,i,s,!1)}function lL(n,e,t,r,i,s){let o=t[ir],u=o[$n].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let d=u[l];jo(e,n,i,d,s)}else{let l=u,d=o[Wt];FS(r)&&(l.flags|=128),bv(n,e,l,d,i,s,!0)}}function dL(n,e,t,r,i){let s=t[ys],o=sr(t);s!==o&&jo(e,n,r,s,i);for(let a=Dn;a<t.length;a++){let u=t[a];$h(u[_e],u,n,e,r,s)}}function hL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Or.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Or.Important),n.setStyle(t,r,i,s))}}function fL(n,e,t){n.setAttribute(e,"style",t)}function cA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function lA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&oy(n,e,r),i!==null&&cA(n,e,i),s!==null&&fL(n,e,s)}var Ur={};function Se(n=1){dA(kt(),Re(),bs()+n,!1)}function dA(n,e,t,r){if(!r)if((e[oe]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Zd(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Jd(e,s,0,t)}_s(t)}function ie(n,e=me.Default){let t=Re();if(t===null)return V(n,e);let r=Kt();return NS(r,t,zt(n),e)}function hA(){let n="invalid";throw new Error(n)}function fA(n,e,t,r,i,s){let o=xe(null);try{let a=null;i&qo.SignalBased&&(a=e[r][Do]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&qo.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):eS(e,a,r,s)}finally{xe(o)}}function pL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)_s(~i);else{let s=i,o=t[++r],a=t[++r];UF(o,s);let u=e[s];a(2,u)}}}finally{_s(-1)}}function Hh(n,e,t,r,i,s,o,a,u,l,d){let f=e.blueprint.slice();return f[ar]=i,f[oe]=r|4|128|8|64,(l!==null||n&&n[oe]&2048)&&(f[oe]|=2048),oS(f),f[Wt]=f[ea]=n,f[jn]=t,f[rr]=o||n&&n[rr],f[dt]=a||n&&n[dt],f[Go]=u||n&&n[Go]||null,f[$n]=s,f[Mh]=hV(),f[sh]=d,f[X0]=l,f[ir]=e.type==2?n[ir]:f,f}function sc(n,e,t,r,i){let s=n.data[e];if(s===null)s=gL(n,e,t,r,i),BF()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=LF();s.injectorIndex=o===null?-1:o.injectorIndex}return Cs(s,!0),s}function gL(n,e,t,r,i){let s=dS(),o=uv(),a=o?s:s&&s.parent,u=n.data[e]=wL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function pA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gA(n,e,t,r,i){let s=bs(),o=r&2;try{_s(-1),o&&e.length>Bn&&dA(n,e,Bn,!1),er(o?2:0,i),t(r,i)}finally{_s(s),er(o?3:1,i)}}function Tv(n,e,t){if(ov(e)){let r=xe(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{xe(r)}}}function Sv(n,e,t){lS()&&(TL(n,e,t,Cn(t,e)),(t.flags&64)===64&&_A(n,e,t))}function Av(n,e,t=Cn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function mA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Mv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Mv(n,e,t,r,i,s,o,a,u,l,d){let f=Bn+r,g=f+i,m=mL(f,g),_=typeof l=="function"?l():l;return m[_e]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:d}}function mL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ur);return t}function yL(n,e,t,r){let s=r.get(_V,HS)||t===nr.ShadowDom,o=n.selectRootElement(e,s);return vL(o),o}function vL(n){_L(n)}var _L=()=>null;function wL(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return OF()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function o0(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=qo.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?a0(r,t,l,a,u):a0(r,t,l,a)}return r}function a0(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function EL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],u=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,m=g?g.inputs:null,_=g?g.outputs:null;u=o0(0,f.inputs,d,u,m),l=o0(1,f.outputs,d,l,_);let D=u!==null&&o!==null&&!nv(e)?VL(u,d,o):null;a.push(D)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function IL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function yA(n,e,t,r,i,s,o,a){let u=Cn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Nv(n,t,d,r,i),xh(e)&&DL(t,e.index)):e.type&3?(r=IL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function DL(n,e){let t=Mi(e,n);t[oe]&16||(t[oe]|=64)}function xv(n,e,t,r){if(lS()){let i=r===null?null:{"":-1},s=AL(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&vA(n,e,t,o,i,a),i&&ML(t,r,i)}t.mergedAttrs=Wu(t.mergedAttrs,t.attrs)}function vA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)my(fh(t,e),n,r[l].type);NL(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,u=pA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Wu(t.mergedAttrs,d.hostAttrs),RL(n,t,e,u,d),xL(u,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}EL(n,t,s)}function CL(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;bL(o)!=a&&o.push(a),o.push(t,r,s)}}function bL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function TL(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;xh(t)&&PL(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||fh(t,e),Di(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let u=n.data[a],l=Yo(e,n,a,t);if(Di(l,e),o!==null&&FL(e,a-i,l,u,t,o),Pr(u)){let d=Mi(t.index,e);d[jn]=Yo(e,n,a,t)}}}function _A(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=$F();try{_s(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];fy(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&SL(u,l)}}finally{_s(-1),fy(o)}}function SL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function AL(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(XO(e,o.selectors,!1))if(r||(r=[]),Pr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Ny(n,e,u)}else r.unshift(o),Ny(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ny(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ML(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function xL(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pr(e)&&(t[""]=n)}}function NL(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function RL(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ms(i.type,!0)),o=new ws(s,Pr(i),ie);n.blueprint[r]=o,t[r]=o,CL(n,e,r,pA(n,t,i.hostVars,Ur),i)}function PL(n,e,t){let r=Cn(e,n),i=mA(t),s=n[rr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=qh(n,Hh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function kL(n,e,t,r,i,s){let o=Cn(n,e);OL(e[dt],o,s,n.value,t,r,i)}function OL(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?ec(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function FL(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],d=o[a++],f=o[a++];fA(r,t,u,l,d,f)}}function VL(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function wA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function EA(n,e){let t=n.contentQueries;if(t!==null){let r=xe(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];yS(s),a.contentQueries(2,e[o],o)}}}finally{xe(r)}}}function qh(n,e){return n[Qu]?n[qT][Ln]=e:n[Qu]=e,n[qT]=e,e}function Ry(n,e,t){yS(0);let r=xe(null);try{e(n,t)}finally{xe(r)}}function LL(n){return n[oh]??=[]}function jL(n){return n.cleanup??=[]}function BL(n,e,t){return(n===null||Pr(n))&&(t=SF(t[e.index])),t[dt]}function IA(n,e){let t=n[Go],r=t?t.get(or,null):null;r&&r.handleError(e)}function Nv(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],u=t[s++],l=e[o],d=n.data[o];fA(d,l,r,a,u,i)}}function UL(n,e,t){let r=iS(e,n);KV(n[dt],r,t)}function $L(n,e){let t=Mi(e,n),r=t[_e];HL(r,t);let i=t[ar];i!==null&&t[sh]===null&&(t[sh]=vv(i,t[Go])),Rv(r,t,t[jn])}function HL(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Rv(n,e,t){cv(e);try{let r=n.viewQuery;r!==null&&Ry(1,r,t);let i=n.template;i!==null&&gA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ko]?.finishViewCreation(n),n.staticContentQueries&&EA(n,e),n.staticViewQueries&&Ry(2,n.viewQuery,t);let s=n.components;s!==null&&qL(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,lv()}}function qL(n,e){for(let t=0;t<e.length;t++)$L(n,e[t])}function zL(n,e,t,r){let i=xe(null);try{let s=e.tView,a=n[oe]&4096?4096:16,u=Hh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Wo]=l;let d=n[Ko];return d!==null&&(u[Ko]=d.createEmbeddedView(s)),Rv(s,u,t),u}finally{xe(i)}}function u0(n,e){return!e||e.firstChild===null||FS(n)}function GL(n,e,t,r=!0){let i=e[_e];if(XV(i,e,n,t),r){let o=xy(t,n),a=e[dt],u=Cv(a,n[ys]);u!==null&&ZV(i,n[$n],a,e,u,o)}let s=e[sh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function gh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(sr(s)),Vr(s)&&WL(s,r);let o=t.type;if(o&8)gh(n,e,t.child,r);else if(o&32){let a=Iv(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=uA(e,t);if(Array.isArray(a))r.push(...a);else{let u=vs(e[ir]);gh(u[_e],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function WL(n,e){for(let t=Dn;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&gh(r[_e],r,i,e)}n[ys]!==n[ar]&&e.push(n[ys])}var DA=[];function KL(n){return n[In]??QL(n)}function QL(n){let e=DA.pop()??Object.create(ZL);return e.lView=n,e}function YL(n){n.lView[In]!==n&&(n.lView=null,DA.push(n))}var ZL=ce(L({},dd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rh(n.lView)},consumerOnSignalRead(){this.lView[In]=this}});function JL(n){let e=n[In]??Object.create(XL);return e.lView=n,e}var XL=ce(L({},dd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=vs(n.lView);for(;e&&!CA(e[_e]);)e=vs(e);e&&aS(e)},consumerOnSignalRead(){this.lView[In]=this}});function CA(n){return n.type!==2}var ej=100;function bA(n,e=!0,t=0){let r=n[rr],i=r.rendererFactory,s=!1;s||i.begin?.();try{tj(n,t)}catch(o){throw e&&IA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function tj(n,e){let t=fS();try{GT(!0),Py(n,e);let r=0;for(;Yu(n);){if(r===ej)throw new j(103,!1);r++,Py(n,1)}}finally{GT(t)}}function nj(n,e,t,r){let i=e[oe];if((i&256)===256)return;let s=!1,o=!1;!s&&e[rr].inlineEffectRunner?.flush(),cv(e);let a=!0,u=null,l=null;s||(CA(n)?(l=KL(e),u=Em(l)):eT()===null?(a=!1,l=JL(e),u=Em(l)):e[In]&&(Dm(e[In]),e[In]=null));try{oS(e),jF(n.bindingStartIndex),t!==null&&gA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&Zd(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Jd(e,m,0,null),zm(e,0)}if(o||rj(e),TA(e,0),n.contentQueries!==null&&EA(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&Zd(e,m)}else{let m=n.contentHooks;m!==null&&Jd(e,m,1),zm(e,1)}pL(n,e);let f=n.components;f!==null&&AA(e,f,0);let g=n.viewQuery;if(g!==null&&Ry(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&Zd(e,m)}else{let m=n.viewHooks;m!==null&&Jd(e,m,2),zm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[qm]){for(let m of e[qm])m();e[qm]=null}s||(e[oe]&=-73)}catch(d){throw s||Rh(e),d}finally{l!==null&&(iT(l,u),a&&YL(l)),lv()}}function TA(n,e){for(let t=LS(n);t!==null;t=jS(t))for(let r=Dn;r<t.length;r++){let i=t[r];SA(i,e)}}function rj(n){for(let e=LS(n);e!==null;e=jS(e)){if(!(e[oe]&ch.HasTransplantedViews))continue;let t=e[uh];for(let r=0;r<t.length;r++){let i=t[r];aS(i)}}}function ij(n,e,t){let r=Mi(e,n);SA(r,t)}function SA(n,e){av(n)&&Py(n,e)}function Py(n,e){let r=n[_e],i=n[oe],s=n[In],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Im(s)),o||=!1,s&&(s.dirty=!1),n[oe]&=-9217,o)nj(r,n,r.template,n[jn]);else if(i&8192){TA(n,1);let a=r.components;a!==null&&AA(n,a,1)}}function AA(n,e,t){for(let r=0;r<e.length;r++)ij(n,e[r],t)}function Pv(n,e){let t=fS()?64:1088;for(n[rr].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=vs(n);if(ly(n)&&!r)return n;n=r}return null}var Es=class{get rootNodes(){let e=this._lView,t=e[_e];return gh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(e){this._lView[jn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Wt];if(Vr(e)){let t=e[ah],r=t?t.indexOf(this):-1;r>-1&&(My(e,r),rh(t,r))}this._attachedToViewContainer=!1}oA(this._lView[_e],this._lView)}onDestroy(e){uS(this._lView,e)}markForCheck(){Pv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){hy(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,bA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ly(this._lView),t=this._lView[Wo];t!==null&&!e&&Dv(t,this._lView),iA(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let t=ly(this._lView),r=this._lView[Wo];r!==null&&!t&&sA(r,this._lView),hy(this._lView)}},zh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aj;let n=e;return n})(),sj=zh,oj=class extends sj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=zL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Es(i)}};function aj(){return uj(Kt(),Re())}function uj(n,e){return n.type&4?new oj(e,n,Vh(n,e)):null}var H7=new RegExp(`^(\\d+)*(${yV}|${mV})*(.*)`);var cj=()=>null;function c0(n,e){return cj(n,e)}var Zo=class{},MA=new q("",{providedIn:"root",factory:()=>!1});var xA=new q(""),ky=class{},mh=class{};function lj(n){let e=Error(`No component factory found for ${Gt(n)}.`);return e[dj]=n,e}var dj="ngComponent";var Oy=class{resolveComponentFactory(e){throw lj(e)}},qv=class qv{};qv.NULL=new Oy;var Ci=qv,bi=class{},Ts=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>hj();let n=e;return n})();function hj(){let n=Re(),e=Kt(),t=Mi(e.index,n);return(Ei(t)?t:n)[dt]}var fj=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();var l0=new Set;function oc(n){l0.has(n)||(l0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function NA(n){let e=!0;return setTimeout(()=>{e&&(e=!1,n())}),typeof _t.requestAnimationFrame=="function"&&_t.requestAnimationFrame(()=>{e&&(e=!1,n())}),()=>{e=!1}}function d0(n){let e=!0;return queueMicrotask(()=>{e&&n()}),()=>{e=!1}}function h0(...n){}var ae=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new lt(!1),this.onMicrotaskEmpty=new lt(!1),this.onStable=new lt(!1),this.onError=new lt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,mj(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new j(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,pj,h0,h0);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pj={};function kv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gj(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{NA(()=>{n.callbackScheduled=!1,Fy(n),n.isCheckStableRunning=!0,kv(n),n.isCheckStableRunning=!1})}),Fy(n))}function mj(n){let e=()=>{gj(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{if(yj(a))return t.invokeTask(i,s,o,a);try{return f0(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),p0(n)}},onInvoke:(t,r,i,s,o,a,u)=>{try{return f0(n),t.invoke(i,s,o,a,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vj(a)&&e(),p0(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Fy(n),kv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Fy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function f0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function p0(n){n._nesting--,kv(n)}var yh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new lt,this.onMicrotaskEmpty=new lt,this.onStable=new lt,this.onError=new lt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yj(n){return RA(n,"__ignore_ng_zone__")}function vj(n){return RA(n,"__scheduler_tick__")}function RA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function _j(n="zone.js",e){return n==="noop"?new yh:n==="zone.js"?new ae(e):n}var _i=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(_i||{}),wj={destroy(){}};function Gh(n,e){!e&&_F(Gh);let t=e?.injector??U(it);if(!zV(t))return wj;oc("NgAfterNextRender");let r=t.get(Ov),i=r.handler??=new Ly,s=e?.phase??_i.MixedReadWrite,o=()=>{i.unregister(u),a()},a=t.get(pv).onDestroy(o),u=Un(t,()=>new Vy(s,()=>{o(),n()}));return i.register(u),{destroy:o}}var Vy=class{constructor(e,t){this.phase=e,this.callbackFn=t,this.zone=U(ae),this.errorHandler=U(or,{optional:!0}),U(Zo,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Ly=class{constructor(){this.executingCallbacks=!1,this.buckets={[_i.EarlyRead]:new Set,[_i.Write]:new Set,[_i.MixedReadWrite]:new Set,[_i.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let t of e)t.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Ov=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function vh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ny(i,a);else if(s==2){let u=a,l=e[++o];r=ny(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var _h=class extends Ci{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ii(e);return new Jo(t,this.ngModule)}};function g0(n){let e=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:t})}return e}function Ej(n){let e=n.toLowerCase();return e==="svg"?bF:e==="math"?TF:null}var Jo=class extends mh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=g0(e.inputs);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return g0(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=rF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=xe(null);try{i=i||this.ngModule;let o=i instanceof sn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new py(e,o):e,u=a.get(bi,null);if(u===null)throw new j(407,!1);let l=a.get(fj,null),d=a.get(Ov,null),f=a.get(Zo,null),g={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",D=r?yL(m,r,this.componentDef.encapsulation,a):rA(m,_,Ej(_)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let k=null;D!==null&&(k=vv(D,a,!0));let B=Mv(0,null,null,1,0,null,null,null,null,null,null),P=Hh(null,B,null,b,null,null,g,m,a,null,k);cv(P);let $,Z;try{let Q=this.componentDef,I,v=null;Q.findHostDirectiveDefs?(I=[],v=new Map,Q.findHostDirectiveDefs(Q,I,v),I.push(Q)):I=[Q];let w=Ij(P,D),C=Dj(w,D,Q,I,P,g,m);Z=sS(B,Bn),D&&Tj(m,Q,D,r),t!==void 0&&Sj(Z,this.ngContentSelectors,t),$=bj(C,Q,I,v,P,[Aj]),Rv(B,P,null)}finally{lv()}return new jy(this.componentType,$,Vh(Z,P),P,Z)}finally{xe(s)}}},jy=class extends ky{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Es(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Nv(s[_e],s,i,e,t),this.previousInputValues.set(e,t);let o=Mi(this._tNode.index,s);Pv(o,1)}}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Ij(n,e){let t=n[_e],r=Bn;return n[r]=e,sc(t,r,2,"#host",null)}function Dj(n,e,t,r,i,s,o){let a=i[_e];Cj(r,n,e,o);let u=null;e!==null&&(u=vv(e,i[Go]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Hh(i,mA(t),null,d,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&Ny(a,n,r.length-1),qh(i,f),i[n.index]=f}function Cj(n,e,t,r){for(let i of n)e.mergedAttrs=Wu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(vh(e,e.mergedAttrs,!0),t!==null&&lA(r,t,e))}function bj(n,e,t,r,i,s){let o=Kt(),a=i[_e],u=Cn(o,i);vA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=Yo(i,a,f,o);Di(g,i)}_A(a,i,o),u&&Di(u,i);let l=Yo(i,a,o.directiveStart+o.componentOffset,o);if(n[jn]=i[jn]=l,s!==null)for(let d of s)d(l,e);return Tv(a,o,i),l}function Tj(n,e,t,r){if(r)oy(n,t,["ng-version","18.0.6"]);else{let{attrs:i,classes:s}=iF(e.selectors[0]);i&&oy(n,t,i),s&&s.length>0&&cA(n,t,s.join(" "))}}function Sj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Aj(){let n=Kt();Fh(Re()[_e],n)}var ra=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Mj;let n=e;return n})();function Mj(){let n=Kt();return Nj(n,Re())}var xj=ra,PA=class extends xj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Vh(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=hv(this._hostTNode,this._hostLView);if(bS(e)){let t=dh(e,this._hostLView),r=lh(e),i=t[_e].data[r+8];return new gs(i,t)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=m0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Dn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=c0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,u0(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!EF(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let u=o?e:new Jo(Ii(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let D=(o?l:this.parentInjector).get(sn,null);D&&(s=D)}let d=Ii(u.componentType??{}),f=c0(this._lContainer,d?.id??null),g=f?.firstChild??null,m=u.create(l,i,g,s);return this.insertImpl(m.hostView,a,u0(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(MF(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Wt],l=new PA(u,u[$n],u[Wt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return GL(o,i,s,r),e.attachToViewContainerRef(),O0(Ym(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=m0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=My(this._lContainer,t);r&&(rh(Ym(this._lContainer),t),oA(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=My(this._lContainer,t);return r&&rh(Ym(this._lContainer),t)!=null?new Es(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function m0(n){return n[ah]}function Ym(n){return n[ah]||(n[ah]=[])}function Nj(n,e){let t,r=e[n.index];return Vr(r)?t=r:(t=wA(r,e,null,n),e[n.index]=t,qh(e,t)),Pj(t,e,n,r),new PA(t,n,e)}function Rj(n,e){let t=n[dt],r=t.createComment(""),i=Cn(e,n),s=Cv(t,i);return ph(t,s,r,sL(t,i),!1),r}var Pj=Fj,kj=()=>!1;function Oj(n,e,t){return kj(n,e,t)}function Fj(n,e,t,r){if(n[ys])return;let i;t.type&8?i=sr(r):i=Rj(e,t),n[ys]=i}function ac(n,e){oc("NgSignals");let t=dT(n),r=t[Do];return e?.equal&&(r.equal=e.equal),t.set=i=>Cm(r,i),t.update=i=>hT(r,i),t.asReadonly=Vj.bind(t),t}function Vj(){let n=this[Do];if(n.readonlyFn===void 0){let e=()=>this();e[Do]=n,n.readonlyFn=e}return n.readonlyFn}function Lj(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then($j))}return s}return wh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),o.push(r(f).then(m=>{a[l+g]=m,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(o).then(()=>Hj(s));e.push(u)}),Bj(),Promise.all(e).then(()=>{})}var wh=new Map,jj=new Set;function Bj(){let n=wh;return wh=new Map,n}function Uj(){return wh.size===0}function $j(n){return typeof n=="string"?n:n.text()}function Hj(n){jj.delete(n)}function qj(n){return Object.getPrototypeOf(n.prototype).constructor}function $r(n){let e=qj(n.type),t=!0,r=[n];for(;e;){let i;if(Pr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Wd(n.inputs),o.inputTransforms=Wd(n.inputTransforms),o.declaredInputs=Wd(n.declaredInputs),o.outputs=Wd(n.outputs);let a=i.hostBindings;a&&Qj(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Wj(n,u),l&&Kj(n,l),zj(n,i),TO(n.outputs,i.outputs),Pr(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===$r&&(t=!1)}}e=Object.getPrototypeOf(e)}Gj(r)}function zj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Gj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Wu(i.hostAttrs,t=Wu(t,i.hostAttrs))}}function Wd(n){return n===$o?{}:n===rn?[]:n}function Wj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Kj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Qj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Fv(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Ti=class{},Zu=class{};var Eh=class extends Ti{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _h(this);let i=z0(e);this._bootstrapComponents=nA(i.bootstrap),this._r3Injector=kS(e,t,[{provide:Ti,useValue:this},{provide:Ci,useValue:this.componentFactoryResolver},...r],Gt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ih=class extends Zu{constructor(e){super(),this.moduleType=e}create(e){return new Eh(this.moduleType,e,[])}};function Yj(n,e,t){return new Eh(n,e,t)}var By=class extends Ti{constructor(e){super(),this.componentFactoryResolver=new _h(this),this.instance=null;let t=new Ku([...e.providers,{provide:Ti,useValue:this},{provide:Ci,useValue:this.componentFactoryResolver}],e.parent||iv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Wh(n,e,t=null){return new By({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function kA(n){return Jj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Zj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Jj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Xj(n,e,t){return n[e]=t}function Ss(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function e2(n){return(n.flags&32)===32}function t2(n,e,t,r,i,s,o,a,u){let l=e.consts,d=sc(e,n,4,o||null,a||null);xv(e,t,d,Qo(l,u)),Fh(e,d);let f=d.tView=Mv(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function n2(n,e,t,r,i,s,o,a,u,l){let d=t+Bn,f=e.firstCreatePass?t2(d,e,n,r,i,s,o,a,u):e.data[d];Cs(f,!1);let g=r2(e,n,f,t);kh()&&Uh(e,n,g,f),Di(g,n);let m=wA(g,n,g,f);return n[d]=m,qh(n,m),Oj(m,f,n),Nh(f)&&Sv(e,n,f),u!=null&&Av(n,f,l),f}function Tn(n,e,t,r,i,s,o,a){let u=Re(),l=kt(),d=Qo(l.consts,s);return n2(u,l,n,e,t,r,i,d,o,a),Tn}var r2=i2;function i2(n,e,t,r){return Oh(!0),e[dt].createComment("")}function Hr(n,e,t,r){let i=Re(),s=Ph();if(Ss(i,s,e)){let o=kt(),a=dv();kL(a,i,n,e,t,r)}return Hr}function s2(n,e,t,r){return Ss(n,Ph(),t)?e+ec(t)+r:Ur}function Kd(n,e){return n<<17|e<<2}function Is(n){return n>>17&32767}function o2(n){return(n&2)==2}function a2(n,e){return n&131071|e<<17}function Uy(n){return n|2}function Xo(n){return(n&131068)>>2}function Zm(n,e){return n&-131069|e<<2}function u2(n){return(n&1)===1}function $y(n){return n|1}function c2(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Is(o),u=Xo(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||tc(f,d)>0)&&(l=!0)}else d=t;if(i)if(u!==0){let g=Is(n[a+1]);n[r+1]=Kd(g,a),g!==0&&(n[g+1]=Zm(n[g+1],r)),n[a+1]=a2(n[a+1],r)}else n[r+1]=Kd(a,0),a!==0&&(n[a+1]=Zm(n[a+1],r)),a=r;else n[r+1]=Kd(u,0),a===0?a=r:n[u+1]=Zm(n[u+1],r),u=r;l&&(n[r+1]=Uy(n[r+1])),y0(n,d,r,!0),y0(n,d,r,!1),l2(e,d,n,r,s),o=Kd(a,u),s?e.classBindings=o:e.styleBindings=o}function l2(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&tc(s,e)>=0&&(t[r+1]=$y(t[r+1]))}function y0(n,e,t,r){let i=n[t+1],s=e===null,o=r?Is(i):Xo(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],l=n[o+1];d2(u,e)&&(a=!0,n[o+1]=r?$y(l):Uy(l)),o=r?Is(l):Xo(l)}a&&(n[t+1]=r?Uy(i):$y(i))}function d2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?tc(n,e)>=0:!1}var Vn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function h2(n){return n.substring(Vn.key,Vn.keyEnd)}function f2(n){return p2(n),OA(n,FA(n,0,Vn.textEnd))}function OA(n,e){let t=Vn.textEnd;return t===e?-1:(e=Vn.keyEnd=g2(n,Vn.key=e,t),FA(n,e,t))}function p2(n){Vn.key=0,Vn.keyEnd=0,Vn.value=0,Vn.valueEnd=0,Vn.textEnd=n.length}function FA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function g2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function He(n,e,t){let r=Re(),i=Ph();if(Ss(r,i,e)){let s=kt(),o=dv();yA(s,o,r,n,e,r[dt],t,!1)}return He}function Hy(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Nv(n,t,s[o],o,r)}function As(n,e,t){return VA(n,e,t,!1),As}function Kh(n,e){return VA(n,e,null,!0),Kh}function qr(n){y2(D2,m2,n,!0)}function m2(n,e){for(let t=f2(e);t>=0;t=OA(e,t))tv(n,h2(e),!0)}function VA(n,e,t,r){let i=Re(),s=kt(),o=gS(2);if(s.firstUpdatePass&&jA(s,n,o,r),e!==Ur&&Ss(i,o,e)){let a=s.data[bs()];BA(s,a,i,i[dt],n,i[o+1]=b2(e,t),r,o)}}function y2(n,e,t,r){let i=kt(),s=gS(2);i.firstUpdatePass&&jA(i,null,s,r);let o=Re();if(t!==Ur&&Ss(o,s,t)){let a=i.data[bs()];if(UA(a,r)&&!LA(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=ny(u,t||"")),Hy(i,a,o,t,r)}else C2(i,a,o,o[dt],o[s+1],o[s+1]=I2(n,e,t),r,s)}}function LA(n,e){return e>=n.expandoStartIndex}function jA(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[bs()],o=LA(n,t);UA(s,r)&&e===null&&!o&&(e=!1),e=v2(i,s,e,r),c2(i,s,e,t,o,r)}}function v2(n,e,t,r){let i=mS(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Jm(null,n,e,t,r),t=Ju(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Jm(i,n,e,t,r),s===null){let u=_2(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Jm(null,n,e,u[1],r),u=Ju(u,e.attrs,r),w2(n,e,r,u))}else s=E2(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function _2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Xo(r)!==0)return n[Is(r)]}function w2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Is(i)]=r}function E2(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ju(r,o,t)}return Ju(r,e.attrs,t)}function Jm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ju(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ju(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tv(n,o,t?!0:e[++s]))}return n===void 0?null:n}function I2(n,e,t){if(t==null||t==="")return rn;let r=[],i=bn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function D2(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&tv(n,r,t)}function C2(n,e,t,r,i,s,o,a){i===Ur&&(i=rn);let u=0,l=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=u<i.length?i[u+1]:void 0,m=l<s.length?s[l+1]:void 0,_=null,D;d===f?(u+=2,l+=2,g!==m&&(_=f,D=m)):f===null||d!==null&&d<f?(u+=2,_=d):(l+=2,_=f,D=m),_!==null&&BA(n,e,t,r,_,D,o,a),d=u<i.length?i[u]:null,f=l<s.length?s[l]:null}}function BA(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],d=u2(l)?v0(u,e,t,i,Xo(l),o):void 0;if(!Dh(d)){Dh(s)||o2(l)&&(s=v0(u,null,t,i,a,o));let f=iS(bs(),t);hL(r,o,f,i,s)}}function v0(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),d=l?u[1]:u,f=d===null,g=t[i+1];g===Ur&&(g=f?rn:void 0);let m=f?$m(g,r):d===r?g:void 0;if(l&&!Dh(m)&&(m=$m(u,r)),Dh(m)&&(a=m,o))return a;let _=n[i+1];i=o?Is(_):Xo(_)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=$m(u,r))}return a}function Dh(n){return n!==void 0}function b2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Gt(bn(n)))),n}function UA(n,e){return(n.flags&(e?8:16))!==0}function T2(n,e,t,r,i,s){let o=e.consts,a=Qo(o,i),u=sc(e,n,2,r,a);return xv(e,t,u,Qo(o,s)),u.attrs!==null&&vh(u,u.attrs,!1),u.mergedAttrs!==null&&vh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ye(n,e,t,r){let i=Re(),s=kt(),o=Bn+n,a=i[dt],u=s.firstCreatePass?T2(o,s,i,e,t,r):s.data[o],l=S2(s,i,u,a,e,n);i[o]=l;let d=Nh(u);return Cs(u,!0),lA(a,l,u),!e2(u)&&kh()&&Uh(s,i,l,u),RF()===0&&Di(l,i),PF(),d&&(Sv(s,i,u),Tv(s,u,i)),r!==null&&Av(i,u),ye}function Ee(){let n=Kt();uv()?hS():(n=n.parent,Cs(n,!1));let e=n;FF(e)&&VF(),kF();let t=kt();return t.firstCreatePass&&(Fh(t,n),ov(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&QF(e)&&Hy(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&YF(e)&&Hy(t,e,Re(),e.stylesWithoutHost,!1),Ee}function Mt(n,e,t,r){return ye(n,e,t,r),Ee(),Mt}var S2=(n,e,t,r,i,s)=>(Oh(!0),rA(r,i,zF()));function A2(n,e,t,r,i){let s=e.consts,o=Qo(s,r),a=sc(e,n,8,"ng-container",o);o!==null&&vh(a,o,!0);let u=Qo(s,i);return xv(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function Qh(n,e,t){let r=Re(),i=kt(),s=n+Bn,o=i.firstCreatePass?A2(s,i,r,e,t):i.data[s];Cs(o,!0);let a=M2(i,r,o,n);return r[s]=a,kh()&&Uh(i,r,a,o),Di(a,r),Nh(o)&&(Sv(i,r,o),Tv(i,o,r)),t!=null&&Av(r,o),Qh}function Yh(){let n=Kt(),e=kt();return uv()?hS():(n=n.parent,Cs(n,!1)),e.firstCreatePass&&(Fh(e,n),ov(n)&&e.queries.elementEnd(n)),Yh}var M2=(n,e,t,r)=>(Oh(!0),QV(e[dt],""));function uc(){return Re()}function Vv(n,e,t){let r=Re(),i=Ph();if(Ss(r,i,e)){let s=kt(),o=dv(),a=mS(s.data),u=BL(a,o,r);yA(s,o,r,n,e,u,t,!0)}return Vv}var fs=void 0;function x2(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var N2=["en",[["a","p"],["AM","PM"],fs],[["AM","PM"],fs,fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fs,"{1} 'at' {0}",fs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",x2],Xm={};function Zh(n){let e=R2(n),t=_0(e);if(t)return t;let r=e.split("-")[0];if(t=_0(r),t)return t;if(r==="en")return N2;throw new j(701,!1)}function _0(n){return n in Xm||(Xm[n]=_t.ng&&_t.ng.common&&_t.ng.common.locales&&_t.ng.common.locales[n]),Xm[n]}var Ms=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ms||{});function R2(n){return n.toLowerCase().replace(/_/g,"-")}var Ch="en-US",P2="USD";var k2=Ch;function O2(n){typeof n=="string"&&(k2=n.toLowerCase().replace(/_/g,"-"))}var F2=(n,e,t)=>{};function Ft(n,e,t,r){let i=Re(),s=kt(),o=Kt();return L2(s,i,i[dt],o,n,e,r),Ft}function V2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[oh],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function L2(n,e,t,r,i,s,o){let a=Nh(r),l=n.firstCreatePass&&jL(n),d=e[jn],f=LL(e),g=!0;if(r.type&3||o){let D=Cn(r,e),b=o?o(D):D,k=f.length,B=o?$=>o(sr($[r.index])):r.index,P=null;if(!o&&a&&(P=V2(n,e,i,r.index)),P!==null){let $=P.__ngLastListenerFn__||P;$.__ngNextListenerFn__=s,P.__ngLastListenerFn__=s,g=!1}else{s=E0(r,e,d,s),F2(D,i,s);let $=t.listen(b,i,s);f.push(s,$),l&&l.push(i,B,k,k+1)}}else s=E0(r,e,d,s);let m=r.outputs,_;if(g&&m!==null&&(_=m[i])){let D=_.length;if(D)for(let b=0;b<D;b+=2){let k=_[b],B=_[b+1],Z=e[k][B].subscribe(s),Q=f.length;f.push(s,Z),l&&l.push(i,r.index,Q,-(Q+1))}}}function w0(n,e,t,r){let i=xe(null);try{return er(6,e,t),t(r)!==!1}catch(s){return IA(n,s),!1}finally{er(7,e,t),xe(i)}}function E0(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Mi(n.index,e):e;Pv(o,5);let a=w0(e,t,r,s),u=i.__ngNextListenerFn__;for(;u;)a=w0(e,t,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function Vt(n=1){return qF(n)}function j2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Pe(n,e=""){let t=Re(),r=kt(),i=n+Bn,s=r.firstCreatePass?sc(r,i,1,e,null):r.data[i],o=B2(r,t,s,e,n);t[i]=o,kh()&&Uh(r,t,o,s),Cs(s,!1)}var B2=(n,e,t,r,i)=>(Oh(!0),WV(e[dt],r));function ia(n){return Hn("",n,""),ia}function Hn(n,e,t){let r=Re(),i=s2(r,n,e,t);return i!==Ur&&UL(r,bs(),i),Hn}function U2(n,e,t){let r=kt();if(r.firstCreatePass){let i=Pr(n);qy(t,r.data,r.blueprint,i,!0),qy(e,r.data,r.blueprint,i,!1)}}function qy(n,e,t,r,i){if(n=zt(n),Array.isArray(n))for(let s=0;s<n.length;s++)qy(n[s],e,t,r,i);else{let s=kt(),o=Re(),a=Kt(),u=zo(n)?n:zt(n.provide),l=Z0(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(zo(n)||!n.multi){let m=new ws(l,i,ie),_=ty(u,e,i?d:d+g,f);_===-1?(my(fh(a,o),s,u),ey(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{let m=ty(u,e,d+g,f),_=ty(u,e,d,d+g),D=m>=0&&t[m],b=_>=0&&t[_];if(i&&!b||!i&&!D){my(fh(a,o),s,u);let k=q2(i?H2:$2,t.length,i,r,l);!i&&b&&(t[_].providerFactory=k),ey(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=$A(t[i?_:m],l,!i&&r);ey(s,n,m>-1?m:_,k)}!i&&r&&b&&t[_].componentProviders++}}}function ey(n,e,t,r){let i=zo(e),s=hF(e);if(i||s){let u=(s?zt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,u]):l[d+1].push(r,u)}else l.push(t,u)}}}function $A(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ty(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $2(n,e,t,r){return zy(this.multi,[])}function H2(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Yo(t,t[_e],this.providerFactory.index,r);s=a.slice(0,o),zy(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],zy(i,s);return s}function zy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function q2(n,e,t,r,i){let s=new ws(n,t,ie);return s.multi=[],s.index=e,s.componentProviders=0,$A(s,i,r&&!t),s}function cc(n,e=[]){return t=>{t.providersResolver=(r,i)=>U2(r,i?i(n):n,e)}}var z2=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=K0(!1,r.type),s=i.length>0?Wh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(V(sn))});let n=e;return n})();function lc(n){oc("NgStandalone"),n.getStandaloneInjector=e=>e.get(z2).getOrCreateStandaloneInjector(n)}function HA(n,e,t,r){return qA(Re(),pS(),n,e,t,r)}function G2(n,e){let t=n[e];return t===Ur?void 0:t}function qA(n,e,t,r,i,s){let o=e+t;return Ss(n,o,i)?Xj(n,o+1,s?r.call(s,i):r(i)):G2(n,o+1)}function zA(n,e){let t=kt(),r,i=n+Bn;t.firstCreatePass?(r=W2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=ms(r.type,!0)),o,a=nn(ie);try{let u=hh(!1),l=s();return hh(u),j2(t,Re(),i,l),l}finally{nn(a)}}function W2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function GA(n,e,t){let r=n+Bn,i=Re(),s=AF(i,r);return K2(i,r)?qA(i,pS(),e,s.transform,t,s):s.transform(t)}function K2(n,e){return n[_e].data[e].pure}var Qd=null;function Q2(n){Qd!==null&&(n.defaultEncapsulation!==Qd.defaultEncapsulation||n.preserveWhitespaces!==Qd.preserveWhitespaces)||(Qd=n)}var Fr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Jh=new Fr("18.0.6");var Xh=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var Lv=new q(""),dc=new q(""),ef=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jv||(Y2(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(V(ae),V(tf),V(dc))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),tf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return jv?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function Y2(n){jv=n}var jv;function xs(n){return!!n&&typeof n.then=="function"}function WA(n){return!!n&&typeof n.subscribe=="function"}var nf=new q(""),KA=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(nf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(xs(o))r.push(o);else if(WA(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Bv=new q("");function Z2(){lT(()=>{throw new j(600,!1)})}function J2(n){return n.isBoundToModule}var X2=10;function eB(n,e,t){try{let r=t();return xs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function QA(n,e){return Array.isArray(e)?e.reduce(QA,n):L(L({},n),e)}var qn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(OS),this.afterRenderEffectManager=U(Ov),this.zonelessEnabled=U(MA),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=U(na).hasPendingTasks.pipe(ne(r=>!r)),this._injector=U(sn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof mh;if(!this._injector.get(KA).done){let m=!s&&q0(r),_=!1;throw new j(405,_)}let a;s?a=r:a=this._injector.get(Ci).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=J2(a)?void 0:this._injector.get(Ti),l=i||a.selector,d=a.create(it.NULL,[],l,u),f=d.location.nativeElement,g=d.injector.get(Lv,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),eh(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new j(101,!1);let i=xe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,xe(i),this.afterTick.next()}}detectChangesInAttachedViews(r){let i=null;this._injector.destroyed||(i=this._injector.get(bi,null,{optional:!0}));let s=0,o=this.afterRenderEffectManager;for(;s<X2;){let a=s===0;if(r||!a){this.beforeRender.next(a);for(let{_lView:u,notifyErrorHandler:l}of this._views)tB(u,l,a,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(s++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:u})=>Yu(u))&&(o.execute(),!this.allViews.some(({_lView:u})=>Yu(u))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;eh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Bv,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>eh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new j(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function eh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tB(n,e,t,r){if(!t&&!Yu(n))return;bA(n,e,t&&!r?0:1)}var Gy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},rf=(()=>{let e=class e{compileModuleSync(r){return new Ih(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=z0(r),o=nA(s.declarations).reduce((a,u)=>{let l=Ii(u);return l&&a.push(new Jo(l)),a},[]);return new Gy(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),nB=new q("");function rB(n,e,t){let r=new Ih(t);return Promise.resolve(r)}function I0(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var iB=(()=>{let e=class e{constructor(){this.zone=U(ae),this.changeDetectionScheduler=U(Zo),this.applicationRef=U(qn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function sB({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new ae(YA()),[{provide:ae,useFactory:n},{provide:Ho,multi:!0,useFactory:()=>{let t=U(iB,{optional:!0});return()=>t.initialize()}},{provide:Ho,multi:!0,useFactory:()=>{let t=U(aB);return()=>{t.initialize()}}},{provide:OS,useFactory:oB},e===!0?{provide:xA,useValue:!0}:[]]}function oB(){let n=U(ae),e=U(or);return t=>n.runOutsideAngular(()=>e.handleError(t))}function YA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var aB=(()=>{let e=class e{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=U(ae),this.pendingTasks=U(na)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ae.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var uB=(()=>{let e=class e{constructor(){this.appRef=U(qn),this.taskService=U(na),this.ngZone=U(ae),this.zonelessEnabled=U(MA),this.disableScheduling=U(xA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Xe,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yh||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?d0:NA;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=i(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&ae.isInAngularZone())}tick(r){if(this.runningTick||this.appRef.destroyed)return;let i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(r)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(i),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,d0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function cB(){return typeof $localize<"u"&&$localize.locale||Ch}var sf=new q("",{providedIn:"root",factory:()=>U(sf,me.Optional|me.SkipSelf)||cB()}),ZA=new q("",{providedIn:"root",factory:()=>P2});var JA=new q(""),XA=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=_j(i?.ngZone,YA({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=i?.ignoreChangesOutsideZone,a=Yj(r.moduleType,this.injector,[...sB({ngZoneFactory:()=>s,ignoreChangesOutsideZone:o}),{provide:Zo,useExisting:uB}]),u=a.injector.get(or,null);return s.runOutsideAngular(()=>{let l=s.onError.subscribe({next:d=>{u.handleError(d)}});a.onDestroy(()=>{eh(this._modules,a),l.unsubscribe()})}),eB(u,s,()=>{let l=a.injector.get(KA);return l.runInitializers(),l.donePromise.then(()=>{let d=a.injector.get(sf,Ch);return O2(d||Ch),this._moduleDoBootstrap(a),a})})})}bootstrapModule(r,i=[]){let s=QA({},i);return rB(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(qn);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new j(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(JA,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(V(it))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),zu=null,eM=new q("");function lB(n){if(zu&&!zu.get(eM,!1))throw new j(400,!1);Z2(),zu=n;let e=n.get(XA);return fB(n),e}function Uv(n,e,t=[]){let r=`Platform: ${e}`,i=new q(r);return(s=[])=>{let o=tM();if(!o||o.injector.get(eM,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):lB(dB(a,r))}return hB(i)}}function dB(n=[],e){return it.create({name:e,providers:[{provide:Ah,useValue:"platform"},{provide:JA,useValue:new Set([()=>zu=null])},...n]})}function hB(n){let e=tM();if(!e)throw new j(401,!1);return e}function tM(){return zu?.get(XA)??null}function fB(n){n.get(gv,null)?.forEach(t=>t())}function $v(){return!1}var sa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pB;let n=e;return n})();function pB(n){return gB(Kt(),Re(),(n&16)===16)}function gB(n,e,t){if(xh(n)&&!t){let r=Mi(n.index,e);return new Es(r,r)}else if(n.type&175){let r=e[ir];return new Es(r,e)}return null}var Wy=class{constructor(){}supports(e){return kA(e)}create(e){return new Ky(e)}},mB=(n,e)=>e,Ky=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||mB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<D0(r,i,s)?t:r,a=D0(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=u-i;if(l!=d){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,_=m+g;d<=_&&_<l&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!kA(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Zj(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Qy(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new bh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Qy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Yy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},bh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Yy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function D0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function C0(){return new Hv([new Wy])}var Hv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||C0()),deps:[[e,new Xy,new on]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new j(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:C0});let n=e;return n})();var nM=Uv(null,"core",[]),rM=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(V(qn))},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let n=e;return n})();var iM=new q("");function oa(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function sM(n){let e=Ii(n);if(!e)return null;let t=new Jo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var hM=null;function ur(){return hM}function fM(n){hM??=n}var of=class{};var st=new q(""),Zv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(yB),providedIn:"platform"});let n=e;return n})(),pM=new q(""),yB=(()=>{let e=class e extends Zv{constructor(){super(),this._doc=U(st),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ur().getBaseHref(this._doc)}onPopState(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=ur().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function Jv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function oM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function zr(n){return n&&n[0]!=="?"?"?"+n:n}var Wr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(Xv),providedIn:"root"});let n=e;return n})(),gM=new q(""),Xv=(()=>{let e=class e extends Wr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(st).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Jv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+zr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Zv),V(gM,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),mM=(()=>{let e=class e extends Wr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Jv(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+zr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+zr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Zv),V(gM,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),aa=(()=>{let e=class e{constructor(r){this._subject=new lt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=wB(oM(aM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+zr(i))}normalize(r){return e.stripTrailingSlash(_B(this._basePath,aM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+zr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=zr,e.joinWithSlash=Jv,e.stripTrailingSlash=oM,e.\u0275fac=function(i){return new(i||e)(V(Wr))},e.\u0275prov=W({token:e,factory:()=>vB(),providedIn:"root"});let n=e;return n})();function vB(){return new aa(V(Wr))}function _B(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function aM(n){return n.replace(/\/index.html$/,"")}function wB(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var yM={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},vM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(vM||{});var Gr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function hc(n,e){let t=Zh(n),r=t[Ms.NumberSymbols][e];if(typeof r>"u"){if(e===Gr.CurrencyDecimal)return t[Ms.NumberSymbols][Gr.Decimal];if(e===Gr.CurrencyGroup)return t[Ms.NumberSymbols][Gr.Group]}return r}function EB(n,e){return Zh(n)[Ms.NumberFormats][e]}function IB(n){return Zh(n)[Ms.Currencies]}function DB(n,e,t="en"){let r=IB(t)[n]||yM[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var CB=2;function bB(n){let e,t=yM[n];return t&&(e=t[2]),typeof e=="number"?e:CB}var TB=/^(\d+)?\.((\d+)(-(\d+))?)?$/,uM=22,af=".",fc="0",SB=";",AB=",",zv="#",cM="\xA4";function MB(n,e,t,r,i,s,o=!1){let a="",u=!1;if(!isFinite(n))a=hc(t,Gr.Infinity);else{let l=PB(n);o&&(l=RB(l));let d=e.minInt,f=e.minFrac,g=e.maxFrac;if(s){let B=s.match(TB);if(B===null)throw new Error(`${s} is not a valid digit info`);let P=B[1],$=B[3],Z=B[5];P!=null&&(d=Gv(P)),$!=null&&(f=Gv($)),Z!=null?g=Gv(Z):$!=null&&f>g&&(g=f)}kB(l,f,g);let m=l.digits,_=l.integerLen,D=l.exponent,b=[];for(u=m.every(B=>!B);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?b=m.splice(_,m.length):(b=m,m=[0]);let k=[];for(m.length>=e.lgSize&&k.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)k.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),a=k.join(hc(t,r)),b.length&&(a+=hc(t,i)+b.join("")),D&&(a+=hc(t,Gr.Exponential)+"+"+D)}return n<0&&!u?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function xB(n,e,t,r,i){let s=EB(e,vM.Currency),o=NB(s,hc(e,Gr.MinusSign));return o.minFrac=bB(r),o.maxFrac=o.minFrac,MB(n,o,e,Gr.CurrencyGroup,Gr.CurrencyDecimal,i).replace(cM,t).replace(cM,"").trim()}function NB(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(SB),i=r[0],s=r[1],o=i.indexOf(af)!==-1?i.split(af):[i.substring(0,i.lastIndexOf(fc)+1),i.substring(i.lastIndexOf(fc)+1)],a=o[0],u=o[1]||"";t.posPre=a.substring(0,a.indexOf(zv));for(let d=0;d<u.length;d++){let f=u.charAt(d);f===fc?t.minFrac=t.maxFrac=d+1:f===zv?t.maxFrac=d+1:t.posSuf+=f}let l=a.split(AB);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,f=s.indexOf(zv);t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function RB(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function PB(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(af))>-1&&(e=e.replace(af,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===fc;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===fc;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>uM&&(r=r.splice(0,uM-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function kB(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let f=o;f<r.length;f++)r[f]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let f=1;f<o;f++)r[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let u=s!==0,l=e+n.integerLen,d=r.reduceRight(function(f,g,m,_){return g=g+f,_[m]=g<10?g:g-10,u&&(_[m]===0&&m>=l?_.pop():u=!1),g>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Gv(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function _M(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Wv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wM=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Wv(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),lM(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);lM(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ie(ra),ie(zh),ie(Hv))},e.\u0275dir=At({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function lM(n,e){n.context.$implicit=e.item}var Ns=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Kv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){dM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){dM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ie(ra),ie(zh))},e.\u0275dir=At({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Kv=class{constructor(){this.$implicit=null,this.ngIf=null}};function dM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Gt(e)}'.`)}function OB(n,e){return new j(2100,!1)}var EM=(()=>{let e=class e{constructor(r,i="USD"){this._locale=r,this._defaultCurrencyCode=i}transform(r,i=this._defaultCurrencyCode,s="symbol",o,a){if(!FB(r))return null;a||=this._locale,typeof s=="boolean"&&(s=s?"symbol":"code");let u=i||this._defaultCurrencyCode;s!=="code"&&(s==="symbol"||s==="symbol-narrow"?u=DB(u,s==="symbol"?"wide":"narrow",a):u=s);try{let l=VB(r);return xB(l,a,u,i,o)}catch(l){throw OB(e,l.message)}}};e.\u0275fac=function(i){return new(i||e)(ie(sf,16),ie(ZA,16))},e.\u0275pipe=U0({name:"currency",type:e,pure:!0,standalone:!0});let n=e;return n})();function FB(n){return!(n==null||n===""||n!==n)}function VB(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var IM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let n=e;return n})(),e_="browser",LB="server";function jB(n){return n===e_}function Rs(n){return n===LB}var DM=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>jB(U(Ot))?new Qv(U(st),window):new Yv});let n=e;return n})(),Qv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=BB(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function BB(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Yv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},uf=class{};var i_=class extends of{constructor(){super(...arguments),this.supportsDOMEvents=!0}},s_=class n extends i_{static makeCurrent(){fM(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=UB();return t==null?null:$B(t)}resetBaseElement(){pc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _M(document.cookie,e)}},pc=null;function UB(){return pc=pc||document.querySelector("base"),pc?pc.getAttribute("href"):null}function $B(n){return new URL(n,document.baseURI).pathname}var o_=class{addToWindow(e){_t.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new j(5103,!1);return s},_t.getAllAngularTestabilities=()=>e.getAllTestabilities(),_t.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=_t.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};_t.frameworkStabilizers||(_t.frameworkStabilizers=[]),_t.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?ur().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},HB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),cf=new q(""),TM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new j(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(V(cf),V(ae))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),gc=class{constructor(e){this._doc=e}},n_="ng-app-id",SM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rs(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${n_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(n_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(n_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(V(st),V(Lh),V(yv,8),V(Ot))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),r_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},u_=/%COMP%/g,AM="%COMP%",qB=`_nghost-${AM}`,zB=`_ngcontent-${AM}`,GB=!0,WB=new q("",{providedIn:"root",factory:()=>GB});function KB(n){return zB.replace(u_,n)}function QB(n){return qB.replace(u_,n)}function MM(n,e){return e.map(t=>t.replace(u_,n))}var lf=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Rs(u),this.defaultRenderer=new mc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===nr.ShadowDom&&(i=ce(L({},i),{encapsulation:nr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof df?s.applyToHost(r):s instanceof yc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case nr.Emulated:o=new df(l,d,i,this.appId,f,a,u,g);break;case nr.ShadowDom:return new a_(l,d,r,i,a,u,this.nonce,g);default:o=new yc(l,d,i,f,a,u,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(V(TM),V(SM),V(Lh),V(WB),V(st),V(Ot),V(ae),V(yv))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),mc=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(r_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(CM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(CM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=r_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=r_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Or.DashCase|Or.Important)?e.style.setProperty(t,r,i&Or.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Or.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=ur().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function CM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var a_=class extends mc{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=MM(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},yc=class extends mc{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?MM(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},df=class extends yc{constructor(e,t,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=KB(l),this.hostAttr=QB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},YB=(()=>{let e=class e extends gc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(V(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),ZB=(()=>{let e=class e extends gc{constructor(r){super(r),this.delegate=U(iM,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(V(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),bM=["alt","control","meta","shift"],JB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eU=(()=>{let e=class e extends gc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ur().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),bM.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=JB[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),bM.forEach(a=>{if(a!==s){let u=XB[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(V(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function tU(){s_.makeCurrent()}function nU(){return new or}function rU(){return US(document),document}var iU=[{provide:Ot,useValue:e_},{provide:gv,useValue:tU,multi:!0},{provide:st,useFactory:rU,deps:[]}],xM=Uv(nM,"browser",iU),sU=new q(""),oU=[{provide:dc,useClass:o_,deps:[]},{provide:Lv,useClass:ef,deps:[ae,tf,dc]},{provide:ef,useClass:ef,deps:[ae,tf,dc]}],aU=[{provide:Ah,useValue:"root"},{provide:or,useFactory:nU,deps:[]},{provide:cf,useClass:YB,multi:!0,deps:[st,ae,Ot]},{provide:cf,useClass:eU,multi:!0,deps:[st]},{provide:cf,useClass:ZB,multi:!0},lf,SM,TM,{provide:bi,useExisting:lf},{provide:uf,useClass:HB,deps:[]},[]],hf=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Lh,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(V(sU,12))},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({providers:[...aU,...oU],imports:[IM,rM]});let n=e;return n})();var NM=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(V(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var c_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=V(uU),s},providedIn:"root"});let n=e;return n})(),uU=(()=>{let e=class e extends c_{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case dn.NONE:return i;case dn.HTML:return jr(i,"HTML")?bn(i):_v(this._doc,String(i)).toString();case dn.STYLE:return jr(i,"Style")?bn(i):i;case dn.SCRIPT:if(jr(i,"Script"))return bn(i);throw new j(5200,!1);case dn.URL:return jr(i,"URL")?bn(i):Bh(String(i));case dn.RESOURCE_URL:if(jr(i,"ResourceURL"))return bn(i);throw new j(5201,!1);default:throw new j(5202,!1)}}bypassSecurityTrustHtml(r){return zS(r)}bypassSecurityTrustStyle(r){return GS(r)}bypassSecurityTrustScript(r){return WS(r)}bypassSecurityTrustUrl(r){return KS(r)}bypassSecurityTrustResourceUrl(r){return QS(r)}};e.\u0275fac=function(i){return new(i||e)(V(st))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var d_={production:!1,firebase:{apiKey:"AIzaSyACFDJzAsAdO8zzWRVmxNcniRvAmwuj2LE",authDomain:"empleado-82a84.firebaseapp.com",projectId:"empleado-82a84",storageBucket:"empleado-82a84.appspot.com",messagingSenderId:"280563419201",appId:"1:280563419201:web:8567a03600f9ebacb89ec0"}};var le=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(le||{}),cr="*";function RM(n,e){return{type:le.Trigger,name:n,definitions:e,options:{}}}function h_(n,e=null){return{type:le.Animate,styles:e,timings:n}}function PM(n,e=null){return{type:le.Sequence,steps:n,options:e}}function Ps(n){return{type:le.Style,styles:n,offset:null}}function ff(n,e,t){return{type:le.State,name:n,styles:e,options:t}}function f_(n,e,t=null){return{type:le.Transition,expr:n,animation:e,options:t}}var xi=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},vc=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},pf="!";function kM(n){return new j(3e3,!1)}function cU(){return new j(3100,!1)}function lU(){return new j(3101,!1)}function dU(n){return new j(3001,!1)}function hU(n){return new j(3003,!1)}function fU(n){return new j(3004,!1)}function pU(n,e){return new j(3005,!1)}function gU(){return new j(3006,!1)}function mU(){return new j(3007,!1)}function yU(n,e){return new j(3008,!1)}function vU(n){return new j(3002,!1)}function _U(n,e,t,r,i){return new j(3010,!1)}function wU(){return new j(3011,!1)}function EU(){return new j(3012,!1)}function IU(){return new j(3200,!1)}function DU(){return new j(3202,!1)}function CU(){return new j(3013,!1)}function bU(n){return new j(3014,!1)}function TU(n){return new j(3015,!1)}function SU(n){return new j(3016,!1)}function AU(n,e){return new j(3404,!1)}function MU(n){return new j(3502,!1)}function xU(n){return new j(3503,!1)}function NU(){return new j(3300,!1)}function RU(n){return new j(3504,!1)}function PU(n){return new j(3301,!1)}function kU(n,e){return new j(3302,!1)}function OU(n){return new j(3303,!1)}function FU(n,e){return new j(3400,!1)}function VU(n){return new j(3401,!1)}function LU(n){return new j(3402,!1)}function jU(n,e){return new j(3505,!1)}function Ni(n){switch(n.length){case 0:return new xi;case 1:return n[0];default:return new vc(n)}}function KM(n,e,t=new Map,r=new Map){let i=[],s=[],o=-1,a=null;if(e.forEach(u=>{let l=u.get("offset"),d=l==o,f=d&&a||new Map;u.forEach((g,m)=>{let _=m,D=g;if(m!=="offset")switch(_=n.normalizePropertyName(_,i),D){case pf:D=t.get(m);break;case cr:D=r.get(m);break;default:D=n.normalizeStyleValue(m,_,D,i);break}f.set(_,D)}),d||s.push(f),a=f,o=l}),i.length)throw MU(i);return s}function F_(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&p_(t,"start",n)));break;case"done":n.onDone(()=>r(t&&p_(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&p_(t,"destroy",n)));break}}function p_(n,e,t){let r=t.totalTime,i=!!t.disabled,s=V_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),o=n._data;return o!=null&&(s._data=o),s}function V_(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function fn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function OM(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var BU=typeof document>"u"?null:document.documentElement;function L_(n){let e=n.parentNode||n.host||null;return e===BU?null:e}function UU(n){return n.substring(1,6)=="ebkit"}var ks=null,FM=!1;function $U(n){ks||(ks=HU()||{},FM=ks.style?"WebkitAppearance"in ks.style:!1);let e=!0;return ks.style&&!UU(n)&&(e=n in ks.style,!e&&FM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ks.style)),e}function HU(){return typeof document<"u"?document.body:null}function QM(n,e){for(;e;){if(e===n)return!0;e=L_(e)}return!1}function YM(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var j_=(()=>{let e=class e{validateStyleProperty(r){return $U(r)}containsElement(r,i){return QM(r,i)}getParentElement(r){return L_(r)}query(r,i,s){return YM(r,i,s)}computeStyle(r,i,s){return s||""}animate(r,i,s,o,a,u=[],l){return new xi(s,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),H_=class H_{};H_.NOOP=new j_;var Vs=H_,Ls=class{};var qU=1e3,ZM="{{",zU="}}",JM="ng-enter",w_="ng-leave",gf="ng-trigger",wf=".ng-trigger",VM="ng-animating",E_=".ng-animating";function Kr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:I_(parseFloat(e[1]),e[2])}function I_(n,e){switch(e){case"s":return n*qU;default:return n}}function Ef(n,e,t){return n.hasOwnProperty("duration")?n:GU(n,e,t)}function GU(n,e,t){let r=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,i,s=0,o="";if(typeof n=="string"){let a=n.match(r);if(a===null)return e.push(kM(n)),{duration:0,delay:0,easing:""};i=I_(parseFloat(a[1]),a[2]);let u=a[3];u!=null&&(s=I_(parseFloat(u),a[4]));let l=a[5];l&&(o=l)}else i=n;if(!t){let a=!1,u=e.length;i<0&&(e.push(cU()),a=!0),s<0&&(e.push(lU()),a=!0),a&&e.splice(u,0,kM(n))}return{duration:i,delay:s,easing:o}}function WU(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function lr(n,e,t){e.forEach((r,i)=>{let s=B_(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Fs(n,e){e.forEach((t,r)=>{let i=B_(r);n.style[i]=""})}function _c(n){return Array.isArray(n)?n.length==1?n[0]:PM(n):n}function KU(n,e,t){let r=e.params||{},i=XM(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(dU(s))})}var D_=new RegExp(`${ZM}\\s*(.+?)\\s*${zU}`,"g");function XM(n){let e=[];if(typeof n=="string"){let t;for(;t=D_.exec(n);)e.push(t[1]);D_.lastIndex=0}return e}function Ec(n,e,t){let r=`${n}`,i=r.replace(D_,(s,o)=>{let a=e[o];return a==null&&(t.push(hU(o)),a=""),a.toString()});return i==r?n:i}var QU=/-+([a-z0-9])/g;function B_(n){return n.replace(QU,(...e)=>e[1].toUpperCase())}function YU(n,e){return n===0||e===0}function ZU(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,U_(n,a)))}}return e}function hn(n,e,t){switch(e.type){case le.Trigger:return n.visitTrigger(e,t);case le.State:return n.visitState(e,t);case le.Transition:return n.visitTransition(e,t);case le.Sequence:return n.visitSequence(e,t);case le.Group:return n.visitGroup(e,t);case le.Animate:return n.visitAnimate(e,t);case le.Keyframes:return n.visitKeyframes(e,t);case le.Style:return n.visitStyle(e,t);case le.Reference:return n.visitReference(e,t);case le.AnimateChild:return n.visitAnimateChild(e,t);case le.AnimateRef:return n.visitAnimateRef(e,t);case le.Query:return n.visitQuery(e,t);case le.Stagger:return n.visitStagger(e,t);default:throw fU(e.type)}}function U_(n,e){return window.getComputedStyle(n)[e]}var JU=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),If=class extends Ls{normalizePropertyName(e,t){return B_(e)}normalizeStyleValue(e,t,r,i){let s="",o=r.toString().trim();if(JU.has(t)&&r!==0&&r!=="0")if(typeof r=="number")s="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(pU(e,r))}return o+s}};var Df="*";function XU(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>e$(r,t,e)):t.push(n),t}function e$(n,e,t){if(n[0]==":"){let u=t$(n,t);if(typeof u=="function"){e.push(u);return}n=u}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(TU(n)),e;let i=r[1],s=r[2],o=r[3];e.push(LM(i,o));let a=i==Df&&o==Df;s[0]=="<"&&!a&&e.push(LM(o,i))}function t$(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(SU(n)),"* => *"}}var mf=new Set(["true","1"]),yf=new Set(["false","0"]);function LM(n,e){let t=mf.has(n)||yf.has(n),r=mf.has(e)||yf.has(e);return(i,s)=>{let o=n==Df||n==i,a=e==Df||e==s;return!o&&t&&typeof i=="boolean"&&(o=i?mf.has(n):yf.has(n)),!a&&r&&typeof s=="boolean"&&(a=s?mf.has(e):yf.has(e)),o&&a}}var ex=":self",n$=new RegExp(`s*${ex}s*,?`,"g");function tx(n,e,t,r){return new C_(n).build(e,t,r)}var jM="",C_=class{constructor(e){this._driver=e}build(e,t,r){let i=new b_(t);return this._resetContextStyleTimingState(i),hn(this,_c(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=jM,e.collectedStyles=new Map,e.collectedStyles.set(jM,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(gU()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==le.State){let u=a,l=u.name;l.toString().split(/\s*,\s*/).forEach(d=>{u.name=d,s.push(this.visitState(u,t))}),u.name=l}else if(a.type==le.Transition){let u=this.visitTransition(a,t);r+=u.queryCount,i+=u.depCount,o.push(u)}else t.errors.push(mU())}),{type:le.Trigger,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(u=>{XM(u).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size&&t.errors.push(yU(e.name,[...s.values()]))}return{type:le.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=hn(this,_c(e.animation),t),i=XU(e.expr,t.errors);return{type:le.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Os(e.options)}}visitSequence(e,t){return{type:le.Sequence,steps:e.steps.map(r=>hn(this,r,t)),options:Os(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,s=e.steps.map(o=>{t.currentTime=r;let a=hn(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:le.Group,steps:s,options:Os(e.options)}}visitAnimate(e,t){let r=o$(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ps({});if(s.type==le.Keyframes)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};r.easing&&(l.easing=r.easing),o=Ps(l)}t.currentTime+=r.duration+r.delay;let u=this.visitStyle(o,t);u.isEmptyStep=a,i=u}return t.currentAnimateTimings=null,{type:le.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===cr?r.push(a):t.errors.push(vU(a)):r.push(new Map(Object.entries(a)));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let u of a.values())if(u.toString().indexOf(ZM)>=0){s=!0;break}}}),{type:le.Style,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,u)=>{let l=t.collectedStyles.get(t.currentQuerySelector),d=l.get(u),f=!0;d&&(s!=i&&s>=d.startTime&&i<=d.endTime&&(t.errors.push(_U(u,d.startTime,d.endTime,s,i)),f=!1),s=d.startTime),f&&l.set(u,{startTime:s,endTime:i}),t.options&&KU(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:le.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(wU()),r;let i=1,s=0,o=[],a=!1,u=!1,l=0,d=e.steps.map(k=>{let B=this._makeStyleAst(k,t),P=B.offset!=null?B.offset:s$(B.styles),$=0;return P!=null&&(s++,$=B.offset=P),u=u||$<0||$>1,a=a||$<l,l=$,o.push($),B});u&&t.errors.push(EU()),a&&t.errors.push(IU());let f=e.steps.length,g=0;s>0&&s<f?t.errors.push(DU()):s==0&&(g=i/(f-1));let m=f-1,_=t.currentTime,D=t.currentAnimateTimings,b=D.duration;return d.forEach((k,B)=>{let P=g>0?B==m?1:g*B:o[B],$=P*b;t.currentTime=_+D.delay+$,D.duration=$,this._validateStyleAst(k,t),k.offset=P,r.styles.push(k)}),r}visitReference(e,t){return{type:le.Reference,animation:hn(this,_c(e.animation),t),options:Os(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:le.AnimateChild,options:Os(e.options)}}visitAnimateRef(e,t){return{type:le.AnimateRef,animation:this.visitReference(e.animation,t),options:Os(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=r$(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,fn(t.collectedStyles,t.currentQuerySelector,new Map);let a=hn(this,_c(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:le.Query,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Os(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(CU());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Ef(e.timings,t.errors,!0);return{type:le.Stagger,animation:hn(this,_c(e.animation),t),timings:r,options:null}}};function r$(n){let e=!!n.split(/\s*,\s*/).find(t=>t==ex);return e&&(n=n.replace(n$,"")),n=n.replace(/@\*/g,wf).replace(/@\w+/g,t=>wf+"-"+t.slice(1)).replace(/:animating/g,E_),[n,e]}function i$(n){return n?L({},n):null}var b_=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function s$(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function o$(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Ef(n,e).duration;return g_(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=g_(0,0,"");return s.dynamic=!0,s.strValue=t,s}let i=Ef(t,e);return g_(i.duration,i.delay,i.easing)}function Os(n){return n?(n=L({},n),n.params&&(n.params=i$(n.params))):n={},n}function g_(n,e,t){return{duration:n,delay:e,easing:t}}function $_(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var Ic=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},a$=1,u$=":enter",c$=new RegExp(u$,"g"),l$=":leave",d$=new RegExp(l$,"g");function nx(n,e,t,r,i,s=new Map,o=new Map,a,u,l=[]){return new T_().buildKeyframes(n,e,t,r,i,s,o,a,u,l)}var T_=class{buildKeyframes(e,t,r,i,s,o,a,u,l,d=[]){l=l||new Ic;let f=new S_(e,t,l,i,s,d,[]);f.options=u;let g=u.delay?Kr(u.delay):0;f.currentTimeline.delayNextStep(g),f.currentTimeline.setStyles([o],null,f.errors,u),hn(this,r,f);let m=f.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let D=m.length-1;D>=0;D--){let b=m[D];if(b.element===t){_=b;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,u)}return m.length?m.map(_=>_.buildKeyframes()):[$_(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let s=i?.delay;if(s){let o=typeof s=="number"?s:Kr(Ec(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime,o=r.duration!=null?Kr(r.duration):null,a=r.delay!=null?Kr(r.delay):null;return o!==0&&e.forEach(u=>{let l=t.appendInstructionToTimeline(u,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),hn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),s.delay!=null)){i.previousNode.type==le.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Cf);let o=Kr(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>hn(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,s=e.options&&e.options.delay?Kr(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),hn(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?Ec(r,t.params,t.errors):r;return Ef(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let s=e.style;s.type==le.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(u=>{let l=u.offset||0;a.forwardTime(l*s),a.setStyles(u.styles,u.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Kr(i.delay):0;s&&(t.previousNode.type===le.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Cf);let o=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let u=null;a.forEach((l,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,l);s&&f.delayNextStep(s),l===t.element&&(u=f.currentTimeline),hn(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let g=f.currentTimeline.currentTime;o=Math.max(o,g)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),u=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=a-u;break;case"full":u=r.currentStaggerTime;break}let d=t.currentTimeline;u&&d.delayNextStep(u);let f=d.currentTime;hn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-f+(i.startTime-r.currentTimeline.startTime)}},Cf={},S_=class n{constructor(e,t,r,i,s,o,a,u){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Cf,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new bf(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Kr(r.duration)),r.delay!=null&&(i.delay=Kr(r.delay));let s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Ec(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,s=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Cf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new A_(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(c$,"."+this._enterClassName),e=e.replace(d$,"."+this._leaveClassName);let u=r!=1,l=this._driver.query(this.element,e,u);r!==0&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!s&&a.length==0&&o.push(bU(t)),a}},bf=class n{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=a$,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||cr),this._currentKeyframe.set(t,cr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let s=i&&i.params||{},o=h$(e,this._globalTimelineStyles);for(let[a,u]of o){let l=Ec(u,s,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??cr),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,u)=>{let l=new Map([...this._backFill,...a]);l.forEach((d,f)=>{d===pf?e.add(f):d===cr&&t.add(f)}),r||l.set("offset",u/this.duration),i.push(l)});let s=[...e.values()],o=[...t.values()];if(r){let a=i[0],u=new Map(a);a.set("offset",0),u.set("offset",1),i=[a,u]}return $_(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}},A_=class extends bf{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=r+t,a=t/o,u=new Map(e[0]);u.set("offset",0),s.push(u);let l=new Map(e[0]);l.set("offset",BM(a)),s.push(l);let d=e.length-1;for(let f=1;f<=d;f++){let g=new Map(e[f]),m=g.get("offset"),_=t+m*r;g.set("offset",BM(_/o)),s.push(g)}r=o,t=0,i="",e=s}return $_(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function BM(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function h$(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let s of r)t.set(s,cr)}else for(let[s,o]of i)t.set(s,o)}),t}function UM(n,e,t,r,i,s,o,a,u,l,d,f,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:d,totalTime:f,errors:g}}var m_={},Tf=class{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return f$(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,u,l,d){let f=[],g=this.ast.options&&this.ast.options.params||m_,m=a&&a.params||m_,_=this.buildStyles(r,m,f),D=u&&u.params||m_,b=this.buildStyles(i,D,f),k=new Set,B=new Map,P=new Map,$=i==="void",Z={params:rx(D,g),delay:this.ast.options?.delay},Q=d?[]:nx(e,t,this.ast.animation,s,o,_,b,Z,l,f),I=0;return Q.forEach(v=>{I=Math.max(v.duration+v.delay,I)}),f.length?UM(t,this._triggerName,r,i,$,_,b,[],[],B,P,I,f):(Q.forEach(v=>{let w=v.element,C=fn(B,w,new Set);v.preStyleProps.forEach(A=>C.add(A));let T=fn(P,w,new Set);v.postStyleProps.forEach(A=>T.add(A)),w!==t&&k.add(w)}),UM(t,this._triggerName,r,i,$,_,b,Q,[...k.values()],B,P,I))}};function f$(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}function rx(n,e){let t=L({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var M_=class{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=rx(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=Ec(o,i,t));let u=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,u,o,t),r.set(a,o)})}),r}};function p$(n,e,t){return new x_(n,e,t)}var x_=class{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{let s=i.options&&i.options.params||{};this.states.set(i.name,new M_(i.style,s,r))}),$M(this.states,"true","1"),$M(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Tf(e,i,this.states))}),this.fallbackTransition=g$(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function g$(n,e,t){let r=[(o,a)=>!0],i={type:le.Sequence,steps:[],options:null},s={type:le.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new Tf(n,s,e)}function $M(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var m$=new Ic,N_=class{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let r=[],i=[],s=tx(this._driver,t,r,i);if(r.length)throw xU(r);i.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,r){let i=e.element,s=KM(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],s=this._animations.get(e),o,a=new Map;if(s?(o=nx(this._driver,t,s,JM,w_,new Map,new Map,r,m$,i),o.forEach(d=>{let f=fn(a,d.element,new Map);d.postStyleProps.forEach(g=>f.set(g,null))})):(i.push(NU()),o=[]),i.length)throw RU(i);a.forEach((d,f)=>{d.forEach((g,m)=>{d.set(m,this._driver.computeStyle(f,m,cr))})});let u=o.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),l=Ni(u);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw PU(e);return t}listen(e,t,r,i){let s=V_(t,"","","");return F_(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let o=i[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},HM="ng-animate-queued",y$=".ng-animate-queued",y_="ng-animate-disabled",v$=".ng-animate-disabled",_$="ng-star-inserted",w$=".ng-star-inserted",E$=[],ix={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},I$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed",Dc=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=C$(i),r){let s=e,{value:o}=s,a=Hb(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},wc="void",v_=new Dc(wc),R_=class{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw kU(r,t);if(r==null||r.length==0)throw OU(t);if(!b$(r))throw FU(r,t);let s=fn(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);let a=fn(this._engine.statesByElement,e,new Map);return a.has(t)||(Sn(e,gf),Sn(e,gf+"-"+t),a.set(t,v_)),()=>{this._engine.afterFlush(()=>{let u=s.indexOf(o);u>=0&&s.splice(u,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw VU(e);return t}trigger(e,t,r,i=!0){let s=this._getTrigger(t),o=new Cc(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Sn(e,gf),Sn(e,gf+"-"+t),this._engine.statesByElement.set(e,a=new Map));let u=a.get(t),l=new Dc(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&u&&l.absorbOptions(u.options),a.set(t,l),u||(u=v_),!(l.value===wc)&&u.value===l.value){if(!A$(u.params,l.params)){let D=[],b=s.matchStyles(u.value,u.params,D),k=s.matchStyles(l.value,l.params,D);D.length?this._engine.reportError(D):this._engine.afterFlush(()=>{Fs(e,b),lr(e,k)})}return}let g=fn(this._engine.playersByElement,e,[]);g.forEach(D=>{D.namespaceId==this.id&&D.triggerName==t&&D.queued&&D.destroy()});let m=s.matchTransition(u.value,l.value,e,l.params),_=!1;if(!m){if(!i)return;m=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:u,toState:l,player:o,isFallbackTransition:_}),_||(Sn(e,HM),o.onStart(()=>{ua(e,HM)})),o.onDone(()=>{let D=this.players.indexOf(o);D>=0&&this.players.splice(D,1);let b=this._engine.playersByElement.get(e);if(b){let k=b.indexOf(o);k>=0&&b.splice(k,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,wf,!0);r.forEach(i=>{if(i[zn])return;let s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((u,l)=>{if(o.set(l,u.value),this._triggers.has(l)){let d=this.trigger(e,l,wc,i);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&Ni(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(s=>{let o=s.name;if(i.has(o))return;i.add(o);let u=this._triggers.get(o).fallbackTransition,l=r.get(o)||v_,d=new Dc(wc),f=new Cc(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:u,fromState:l,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let s=e[zn];(!s||s===ix)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){let u=V_(s,r.triggerName,r.fromState.value,r.toState.value);u._data=e,F_(r.player,a.phase,u,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let s=r.transition.ast.depCount,o=i.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},P_=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new R_(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let u=i.get(a);if(u){let l=r.indexOf(u);r.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}}return t}trigger(e,t,r,i){if(vf(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!vf(t))return;let s=t[zn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sn(e,y_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ua(e,y_))}removeNode(e,t,r){if(vf(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[zn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return vf(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,wf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,E_,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ni(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[zn];if(t&&t.setForRemoval){if(e[zn]=ix,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(y_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,v$,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Sn(i,_$)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ni(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw LU(e)}_flushAnimations(e,t){let r=new Ic,i=[],s=new Map,o=[],a=new Map,u=new Map,l=new Map,d=new Set;this.disabledNodes.forEach(Y=>{d.add(Y);let J=this.driver.query(Y,y$,!0);for(let te=0;te<J.length;te++)d.add(J[te])});let f=this.bodyNode,g=Array.from(this.statesByElement.keys()),m=GM(g,this.collectedEnterElements),_=new Map,D=0;m.forEach((Y,J)=>{let te=JM+D++;_.set(J,te),Y.forEach(ve=>Sn(ve,te))});let b=[],k=new Set,B=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let J=this.collectedLeaveElements[Y],te=J[zn];te&&te.setForRemoval&&(b.push(J),k.add(J),te.hasAnimation?this.driver.query(J,w$,!0).forEach(ve=>k.add(ve)):B.add(J))}let P=new Map,$=GM(g,Array.from(k));$.forEach((Y,J)=>{let te=w_+D++;P.set(J,te),Y.forEach(ve=>Sn(ve,te))}),e.push(()=>{m.forEach((Y,J)=>{let te=_.get(J);Y.forEach(ve=>ua(ve,te))}),$.forEach((Y,J)=>{let te=P.get(J);Y.forEach(ve=>ua(ve,te))}),b.forEach(Y=>{this.processLeaveNode(Y)})});let Z=[],Q=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(t).forEach(te=>{let ve=te.player,rt=te.element;if(Z.push(ve),this.collectedEnterElements.length){let Ze=rt[zn];if(Ze&&Ze.setForMove){if(Ze.previousTriggersValues&&Ze.previousTriggersValues.has(te.triggerName)){let Tr=Ze.previousTriggersValues.get(te.triggerName),Xt=this.statesByElement.get(te.element);if(Xt&&Xt.has(te.triggerName)){let Sr=Xt.get(te.triggerName);Sr.value=Tr,Xt.set(te.triggerName,Sr)}}ve.destroy();return}}let _n=!f||!this.driver.containsElement(f,rt),Ye=P.get(rt),je=_.get(rt),Be=this._buildInstruction(te,r,je,Ye,_n);if(Be.errors&&Be.errors.length){Q.push(Be);return}if(_n){ve.onStart(()=>Fs(rt,Be.fromStyles)),ve.onDestroy(()=>lr(rt,Be.toStyles)),i.push(ve);return}if(te.isFallbackTransition){ve.onStart(()=>Fs(rt,Be.fromStyles)),ve.onDestroy(()=>lr(rt,Be.toStyles)),i.push(ve);return}let ui=[];Be.timelines.forEach(Ze=>{Ze.stretchStartingKeyframe=!0,this.disabledNodes.has(Ze.element)||ui.push(Ze)}),Be.timelines=ui,r.append(rt,Be.timelines);let zg={instruction:Be,player:ve,element:rt};o.push(zg),Be.queriedElements.forEach(Ze=>fn(a,Ze,[]).push(ve)),Be.preStyleProps.forEach((Ze,Tr)=>{if(Ze.size){let Xt=u.get(Tr);Xt||u.set(Tr,Xt=new Set),Ze.forEach((Sr,ci)=>Xt.add(ci))}}),Be.postStyleProps.forEach((Ze,Tr)=>{let Xt=l.get(Tr);Xt||l.set(Tr,Xt=new Set),Ze.forEach((Sr,ci)=>Xt.add(ci))})});if(Q.length){let Y=[];Q.forEach(J=>{Y.push(jU(J.triggerName,J.errors))}),Z.forEach(J=>J.destroy()),this.reportError(Y)}let I=new Map,v=new Map;o.forEach(Y=>{let J=Y.element;r.has(J)&&(v.set(J,J),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,I))}),i.forEach(Y=>{let J=Y.element;this._getPreviousPlayers(J,!1,Y.namespaceId,Y.triggerName,null).forEach(ve=>{fn(I,J,[]).push(ve),ve.destroy()})});let w=b.filter(Y=>WM(Y,u,l)),C=new Map;zM(C,this.driver,B,l,cr).forEach(Y=>{WM(Y,u,l)&&w.push(Y)});let A=new Map;m.forEach((Y,J)=>{zM(A,this.driver,new Set(Y),u,pf)}),w.forEach(Y=>{let J=C.get(Y),te=A.get(Y);C.set(Y,new Map([...J?.entries()??[],...te?.entries()??[]]))});let E=[],vn=[],ai={};o.forEach(Y=>{let{element:J,player:te,instruction:ve}=Y;if(r.has(J)){if(d.has(J)){te.onDestroy(()=>lr(J,ve.toStyles)),te.disabled=!0,te.overrideTotalTime(ve.totalTime),i.push(te);return}let rt=ai;if(v.size>1){let Ye=J,je=[];for(;Ye=Ye.parentNode;){let Be=v.get(Ye);if(Be){rt=Be;break}je.push(Ye)}je.forEach(Be=>v.set(Be,rt))}let _n=this._buildAnimation(te.namespaceId,ve,I,s,A,C);if(te.setRealPlayer(_n),rt===ai)E.push(te);else{let Ye=this.playersByElement.get(rt);Ye&&Ye.length&&(te.parentPlayer=Ni(Ye)),i.push(te)}}else Fs(J,ve.fromStyles),te.onDestroy(()=>lr(J,ve.toStyles)),vn.push(te),d.has(J)&&i.push(te)}),vn.forEach(Y=>{let J=s.get(Y.element);if(J&&J.length){let te=Ni(J);Y.setRealPlayer(te)}}),i.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<b.length;Y++){let J=b[Y],te=J[zn];if(ua(J,w_),te&&te.hasAnimation)continue;let ve=[];if(a.size){let _n=a.get(J);_n&&_n.length&&ve.push(..._n);let Ye=this.driver.query(J,E_,!0);for(let je=0;je<Ye.length;je++){let Be=a.get(Ye[je]);Be&&Be.length&&ve.push(...Be)}}let rt=ve.filter(_n=>!_n.destroyed);rt.length?T$(this,J,rt):this.processLeaveNode(J)}return b.length=0,E.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let J=this.players.indexOf(Y);this.players.splice(J,1)}),Y.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let u=!s||s==wc;a.forEach(l=>{l.queued||!u&&l.triggerName!=i||o.push(l)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){let i=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let u of t.timelines){let l=u.element,d=l!==s,f=fn(r,l,[]);this._getPreviousPlayers(l,d,o,a,t.toState).forEach(m=>{let _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),f.push(m)})}Fs(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){let a=t.triggerName,u=t.element,l=[],d=new Set,f=new Set,g=t.timelines.map(_=>{let D=_.element;d.add(D);let b=D[zn];if(b&&b.removedBeforeQueried)return new xi(_.duration,_.delay);let k=D!==u,B=S$((r.get(D)||E$).map(I=>I.getRealPlayer())).filter(I=>{let v=I;return v.element?v.element===D:!1}),P=s.get(D),$=o.get(D),Z=KM(this._normalizer,_.keyframes,P,$),Q=this._buildPlayer(_,Z,B);if(_.subTimeline&&i&&f.add(D),k){let I=new Cc(e,a,D);I.setRealPlayer(Q),l.push(I)}return Q});l.forEach(_=>{fn(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>D$(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>Sn(_,VM));let m=Ni(g);return m.onDestroy(()=>{d.forEach(_=>ua(_,VM)),lr(u,t.toStyles)}),f.forEach(_=>{fn(i,_,[]).push(m)}),m}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new xi(e.duration,e.delay)}},Cc=class{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new xi,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>F_(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){fn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function D$(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function C$(n){return n??null}function vf(n){return n&&n.nodeType===1}function b$(n){return n=="start"||n=="done"}function qM(n,e){let t=n.style.display;return n.style.display=e??"none",t}function zM(n,e,t,r,i){let s=[];t.forEach(u=>s.push(qM(u)));let o=[];r.forEach((u,l)=>{let d=new Map;u.forEach(f=>{let g=e.computeStyle(l,f,i);d.set(f,g),(!g||g.length==0)&&(l[zn]=I$,o.push(l))}),n.set(l,d)});let a=0;return t.forEach(u=>qM(u,s[a++])),o}function GM(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),s=new Map;function o(a){if(!a)return r;let u=s.get(a);if(u)return u;let l=a.parentNode;return t.has(l)?u=l:i.has(l)?u=r:u=o(l),s.set(a,u),u}return e.forEach(a=>{let u=o(a);u!==r&&t.get(u).push(a)}),t}function Sn(n,e){n.classList?.add(e)}function ua(n,e){n.classList?.remove(e)}function T$(n,e,t){Ni(t).onDone(()=>n.processLeaveNode(e))}function S$(n){let e=[];return sx(n,e),e}function sx(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof vc?sx(r.players,e):e.push(r)}}function A$(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function WM(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}var la=class{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new P_(e.body,t,r),this._timelineEngine=new N_(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){let o=e+"-"+i,a=this._triggerCache[o];if(!a){let u=[],l=[],d=tx(this._driver,s,u,l);if(u.length)throw AU(i,u);l.length&&void 0,a=p$(i,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[s,o]=OM(r),a=i;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if(r.charAt(0)=="@"){let[o,a]=OM(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function M$(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=__(e[0]),e.length>1&&(r=__(e[e.length-1]))):e instanceof Map&&(t=__(e)),t||r?new k_(n,t,r):null}var ca=class ca{constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=ca.initialStylesByElement.get(e);i||ca.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&lr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(lr(this._element,this._initialStyles),this._endStyles&&(lr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ca.initialStylesByElement.delete(this._element),this._startStyles&&(Fs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fs(this._element,this._endStyles),this._endStyles=null),lr(this._element,this._initialStyles),this._state=3)}};ca.initialStylesByElement=new WeakMap;var k_=ca;function __(n){let e=null;return n.forEach((t,r)=>{x$(r)&&(e=e||new Map,e.set(r,t))}),e}function x$(n){return n==="display"||n==="position"}var Sf=class{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:U_(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Af=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return QM(e,t)}getParentElement(e){return L_(e)}query(e,t,r){return YM(e,t,r)}computeStyle(e,t,r){return U_(e,t)}animate(e,t,r,i,s,o=[]){let a=i==0?"both":"forwards",u={duration:r,delay:i,fill:a};s&&(u.easing=s);let l=new Map,d=o.filter(m=>m instanceof Sf);YU(r,i)&&d.forEach(m=>{m.currentSnapshot.forEach((_,D)=>l.set(D,_))});let f=WU(t).map(m=>new Map(m));f=ZU(e,f,l);let g=M$(e,f);return new Sf(e,f,u,g)}};var _f="@",ox="@.disabled",Mf=class{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==_f&&t==ox?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},O_=class extends Mf{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==_f?t.charAt(1)=="."&&t==ox?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if(t.charAt(0)==_f){let i=N$(e),s=t.slice(1),o="";return s.charAt(0)!=_f&&([s,o]=R$(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{let u=a._data||-1;this.factory.scheduleListenerCallback(u,r,a)})}return this.delegate.listen(e,t,r)}};function N$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function R$(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var xf=class{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,s)=>{let o=s?.parentNode(i);o&&s.removeChild(o,i)}}createRenderer(e,t){let r="",i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,d=l.get(i);if(!d){let f=()=>l.delete(i);d=new Mf(r,i,this.engine,f),l.set(i,d)}return d}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new O_(this,o,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var k$=(()=>{let e=class e extends la{constructor(r,i,s){super(r,i,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(V(st),V(Vs),V(Ls))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function O$(){return new If}function F$(n,e,t){return new xf(n,e,t)}var ux=[{provide:Ls,useFactory:O$},{provide:la,useClass:k$},{provide:bi,useFactory:F$,deps:[lf,la,ae]}],ax=[{provide:Vs,useFactory:()=>new Af},{provide:mv,useValue:"BrowserAnimations"},...ux],V$=[{provide:Vs,useClass:j_},{provide:mv,useValue:"NoopAnimations"},...ux],cx=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:r.disableAnimations?V$:ax}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({providers:ax,imports:[hf]});let n=e;return n})();var fe="primary",jc=Symbol("RouteTitle"),K_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ma(n){return new K_(n)}function L$(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function j$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dr(n[t],e[t]))return!1;return!0}function dr(n,e){let t=n?Q_(n):void 0,r=e?Q_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!wx(n[i],e[i]))return!1;return!0}function Q_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function wx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function Ex(n){return n.length>0?n[n.length-1]:null}function ki(n){return Om(n)?n:xs(n)?De(Promise.resolve(n)):re(n)}var B$={exact:Dx,subset:Cx},Ix={exact:U$,subset:$$,ignored:()=>!0};function lx(n,e,t){return B$[t.paths](n.root,e.root,t.matrixParams)&&Ix[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function U$(n,e){return dr(n,e)}function Dx(n,e,t){if(!Bs(n.segments,e.segments)||!Pf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!Dx(n.children[r],e.children[r],t))return!1;return!0}function $$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>wx(n[t],e[t]))}function Cx(n,e,t){return bx(n,e,e.segments,t)}function bx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Bs(i,t)||e.hasChildren()||!Pf(i,t,r))}else if(n.segments.length===t.length){if(!Bs(n.segments,t)||!Pf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!Cx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Bs(n.segments,i)||!Pf(n.segments,i,r)||!n.children[fe]?!1:bx(n.children[fe],e,s,r)}}function Pf(n,e,t){return e.every((r,i)=>Ix[t](n[i].parameters,r.parameters))}var Ri=class{constructor(e=new Ne([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){return z$.serialize(this)}},Ne=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kf(this)}},js=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ma(this.parameters),this._parameterMap}toString(){return Sx(this)}};function H$(n,e){return Bs(n,e)&&n.every((t,r)=>dr(t.parameters,e[r].parameters))}function Bs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function q$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var Bc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new ya,providedIn:"root"});let n=e;return n})(),ya=class{parse(e){let t=new Z_(e);return new Ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${bc(e.root,!0)}`,r=K$(e.queryParams),i=typeof e.fragment=="string"?`#${G$(e.fragment)}`:"";return`${t}${r}${i}`}},z$=new ya;function kf(n){return n.segments.map(e=>Sx(e)).join("/")}function bc(n,e){if(!n.hasChildren())return kf(n);if(e){let t=n.children[fe]?bc(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${bc(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=q$(n,(r,i)=>i===fe?[bc(n.children[fe],!1)]:[`${i}:${bc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${kf(n)}/${t[0]}`:`${kf(n)}/(${t.join("//")})`}}function Tx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nf(n){return Tx(n).replace(/%3B/gi,";")}function G$(n){return encodeURI(n)}function Y_(n){return Tx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Of(n){return decodeURIComponent(n)}function dx(n){return Of(n.replace(/\+/g,"%20"))}function Sx(n){return`${Y_(n.path)}${W$(n.parameters)}`}function W$(n){return Object.entries(n).map(([e,t])=>`;${Y_(e)}=${Y_(t)}`).join("")}function K$(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Nf(t)}=${Nf(i)}`).join("&"):`${Nf(t)}=${Nf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Q$=/^[^\/()?;#]+/;function q_(n){let e=n.match(Q$);return e?e[0]:""}var Y$=/^[^\/()?;=#]+/;function Z$(n){let e=n.match(Y$);return e?e[0]:""}var J$=/^[^=?&#]+/;function X$(n){let e=n.match(J$);return e?e[0]:""}var eH=/^[^&#]+/;function tH(n){let e=n.match(eH);return e?e[0]:""}var Z_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ne(e,t)),r}parseSegment(){let e=q_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new js(Of(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Z$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=q_(this.remaining);i&&(r=i,this.capture(r))}e[Of(t)]=Of(r)}parseQueryParam(e){let t=X$(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=tH(this.remaining);o&&(r=o,this.capture(r))}let i=dx(t),s=dx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=q_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new Ne([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function Ax(n){return n.segments.length>0?new Ne([],{[fe]:n}):n}function Mx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Mx(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ne(n.segments,e);return nH(t)}function nH(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ne(n.segments.concat(e.segments),e.children)}return n}function Nc(n){return n instanceof Ri}function rH(n,e,t=null,r=null){let i=xx(n);return Nx(i,e,t,r)}function xx(n){let e;function t(s){let o={};for(let u of s.children){let l=t(u);o[u.outlet]=l}let a=new Ne(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Ax(r);return e??i}function Nx(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return z_(i,i,i,t,r);let s=iH(e);if(s.toRoot())return z_(i,i,new Ne([],{}),t,r);let o=sH(s,i,n),a=o.processChildren?Ac(o.segmentGroup,o.index,s.commands):Px(o.segmentGroup,o.index,s.commands);return z_(i,o.segmentGroup,a,t,r)}function Ff(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Rc(n){return typeof n=="object"&&n!=null&&n.outlets}function z_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=Rx(n,e,t);let a=Ax(Mx(o));return new Ri(a,s,i)}function Rx(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Rx(s,e,t)}),new Ne(n.segments,r)}var Vf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ff(r[0]))throw new j(4003,!1);let i=r.find(Rc);if(i&&i!==Ex(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Vf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Vf(t,e,r)}var fa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function sH(n,e,t){if(n.isAbsolute)return new fa(e,!0,0);if(!t)return new fa(e,!1,NaN);if(t.parent===null)return new fa(t,!0,0);let r=Ff(n.commands[0])?0:1,i=t.segments.length-1+r;return oH(t,i,n.numberOfDoubleDots)}function oH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new fa(r,!1,i-s)}function aH(n){return Rc(n[0])?n[0].outlets:{[fe]:n}}function Px(n,e,t){if(n??=new Ne([],{}),n.segments.length===0&&n.hasChildren())return Ac(n,e,t);let r=uH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ne(n.segments.slice(0,r.pathIndex),{});return s.children[fe]=new Ne(n.segments.slice(r.pathIndex),n.children),Ac(s,0,i)}else return r.match&&i.length===0?new Ne(n.segments,{}):r.match&&!n.hasChildren()?J_(n,e,t):r.match?Ac(n,0,i):J_(n,e,t)}function Ac(n,e,t){if(t.length===0)return new Ne(n.segments,{});{let r=aH(t),i={};if(Object.keys(r).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=Ac(n.children[fe],e,t);return new Ne(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Px(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ne(n.segments,i)}}function uH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Rc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!fx(u,l,o))return s;r+=2}else{if(!fx(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function J_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Rc(s)){let u=cH(s.outlets);return new Ne(r,u)}if(i===0&&Ff(t[0])){let u=n.segments[e];r.push(new js(u.path,hx(t[0]))),i++;continue}let o=Rc(s)?s.outlets[fe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Ff(a)?(r.push(new js(o,hx(a))),i+=2):(r.push(new js(o,{})),i++)}return new Ne(r,{})}function cH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=J_(new Ne([],{}),0,r))}),e}function hx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fx(n,e,t){return n==t.path&&dr(e,t.parameters)}var Mc="imperative",Dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Dt||{}),An=class{constructor(e,t){this.id=e,this.url=t}},va=class extends An{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},hr=class extends An{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(gn||{}),Lf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Lf||{}),Qr=class extends An{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Pi=class extends An{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Dt.NavigationSkipped}},Pc=class extends An{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jf=class extends An{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},X_=class extends An{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ew=class extends An{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tw=class extends An{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nw=class extends An{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rw=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},iw=class{constructor(e){this.route=e,this.type=Dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sw=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ow=class{constructor(e){this.snapshot=e,this.type=Dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aw=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uw=class{constructor(e){this.snapshot=e,this.type=Dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Dt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},kc=class{},_a=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function lH(n,e){return n.providers&&!n._injector&&(n._injector=Wh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gn(n){return n.outlet||fe}function dH(n,e){let t=n.filter(r=>Gn(r)===e);return t.push(...n.filter(r=>Gn(r)!==e)),t}function Uc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var cw=class{get injector(){return Uc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new $c(this.rootInjector),this.attachRef=null}},$c=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new cw(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(V(sn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Uf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=lw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=lw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dw(e,this._root).map(t=>t.value)}};function lw(n,e){if(n===e.value)return e;for(let t of e.children){let r=lw(n,t);if(r)return r}return null}function dw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dw(n,t);if(r.length)return r.unshift(e),r}return[]}var pn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ha(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var $f=class extends Uf{constructor(e,t){super(e),this.snapshot=t,ww(this,e)}toString(){return this.snapshot.toString()}};function kx(n){let e=hH(n),t=new St([new js("",{})]),r=new St({}),i=new St({}),s=new St({}),o=new St(""),a=new Yr(t,r,s,o,i,fe,n,e.root);return a.snapshot=e.root,new $f(new pn(a,[]),e)}function hH(n){let e={},t={},r={},i="",s=new pa([],e,r,i,t,fe,n,null,{});return new qf("",new pn(s,[]))}var Yr=class{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ne(l=>l[jc]))??re(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ne(e=>ma(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ne(e=>ma(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&Fx(i)&&(r.resolve[jc]=i.title),r}var pa=class{get title(){return this.data?.[jc]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ma(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ma(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qf=class extends Uf{constructor(e,t){super(t),this.url=e,ww(this,t)}toString(){return Ox(this._root)}};function ww(n,e){e.value._routerState=n,e.children.forEach(t=>ww(n,t))}function Ox(n){let e=n.children.length>0?` { ${n.children.map(Ox).join(", ")} } `:"";return`${n.value}${e}`}function G_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),dr(e.params,t.params)||n.paramsSubject.next(t.params),j$(e.url,t.url)||n.urlSubject.next(t.url),dr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hw(n,e){let t=dr(n.params,e.params)&&H$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hw(n.parent,e.parent))}function Fx(n){return typeof n.title=="string"||n.title===null}var Ew=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=U($c),this.location=U(ra),this.changeDetector=U(sa),this.inputBinder=U(Qf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new fw(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=At({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ai]});let n=e;return n})(),fw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Yr?this.route:e===$c?this.childContexts:this.parent.get(e,t)}},Qf=new q(""),px=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=$u([i.queryParams,i.params,i.data]).pipe(et(([o,a,u],l)=>(u=L(L(L({},o),a),u),l===0?re(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=sM(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function fH(n,e,t){let r=Oc(n,e._root,t?t._root:void 0);return new $f(r,e)}function Oc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=pH(n,e,t);return new pn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Oc(n,a)),o}}let r=gH(e.value),i=e.children.map(s=>Oc(n,s));return new pn(r,i)}}function pH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Oc(n,r,i);return Oc(n,r)})}function gH(n){return new Yr(new St(n.url),new St(n.params),new St(n.queryParams),new St(n.fragment),new St(n.data),n.outlet,n.component,n)}var Fc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Vx="ngNavigationCancelingError";function zf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Nc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Lx(!1,gn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Lx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Vx]=!0,t.cancellationCode=e,t}function mH(n){return jx(n)&&Nc(n.url)}function jx(n){return!!n&&n[Vx]}var yH=(n,e,t,r)=>ne(i=>(new pw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),pw=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),G_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ha(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ha(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ha(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ha(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new uw(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ow(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(G_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),G_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Gf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ga=class{constructor(e,t){this.component=e,this.route=t}};function vH(n,e,t){let r=n._root,i=e?e._root:null;return Tc(r,i,t,[r.value])}function _H(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ea(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!A0(n)?n:e.get(n):r}function Tc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ha(e);return n.children.forEach(o=>{wH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>xc(a,t.getContext(o),i)),i}function wH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=EH(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Gf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Tc(n,e,a?a.children:null,r,i):Tc(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ga(a.outlet.component,o))}else o&&xc(e,a,i),i.canActivateChecks.push(new Gf(r)),s.component?Tc(n,null,a?a.children:null,r,i):Tc(n,null,t,r,i);return i}function EH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bs(n.url,e.url)||!dr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hw(n,e)||!dr(n.queryParams,e.queryParams);case"paramsChange":default:return!hw(n,e)}}function xc(n,e,t){let r=ha(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?xc(o,e.children.getContext(s),t):xc(o,null,t):xc(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ga(e.outlet.component,i)):t.canDeactivateChecks.push(new ga(null,i)):t.canDeactivateChecks.push(new ga(null,i))}function Hc(n){return typeof n=="function"}function IH(n){return typeof n=="boolean"}function DH(n){return n&&Hc(n.canLoad)}function CH(n){return n&&Hc(n.canActivate)}function bH(n){return n&&Hc(n.canActivateChild)}function TH(n){return n&&Hc(n.canDeactivate)}function SH(n){return n&&Hc(n.canMatch)}function Bx(n){return n instanceof Nr||n?.name==="EmptyError"}var Rf=Symbol("INITIAL_VALUE");function wa(){return et(n=>$u(n.map(e=>e.pipe(Rr(1),yi(Rf)))).pipe(ne(e=>{for(let t of e)if(t!==!0){if(t===Rf)return Rf;if(t===!1||AH(t))return t}return!0}),Et(e=>e!==Rf),Rr(1)))}function AH(n){return Nc(n)||n instanceof Fc}function MH(n,e){return ct(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?re(ce(L({},t),{guardsResult:!0})):xH(o,r,i,n).pipe(ct(a=>a&&IH(a)?NH(r,s,n,e):re(a)),ne(a=>ce(L({},t),{guardsResult:a})))})}function xH(n,e,t,r){return De(n).pipe(ct(i=>FH(i.component,i.route,t,e,r)),En(i=>i!==!0,!0))}function NH(n,e,t,r){return De(e).pipe(hs(i=>ko(PH(i.route.parent,r),RH(i.route,r),OH(n,i.path,t),kH(n,i.route,t))),En(i=>i!==!0,!0))}function RH(n,e){return n!==null&&e&&e(new aw(n)),re(!0)}function PH(n,e){return n!==null&&e&&e(new sw(n)),re(!0)}function kH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(s=>Ld(()=>{let o=Uc(e)??t,a=Ea(s,o),u=CH(a)?a.canActivate(e,n):Un(o,()=>a(e,n));return ki(u).pipe(En())}));return re(i).pipe(wa())}function OH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_H(o)).filter(o=>o!==null).map(o=>Ld(()=>{let a=o.guards.map(u=>{let l=Uc(o.node)??t,d=Ea(u,l),f=bH(d)?d.canActivateChild(r,n):Un(l,()=>d(r,n));return ki(f).pipe(En())});return re(a).pipe(wa())}));return re(s).pipe(wa())}function FH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return re(!0);let o=s.map(a=>{let u=Uc(e)??i,l=Ea(a,u),d=TH(l)?l.canDeactivate(n,e,t,r):Un(u,()=>l(n,e,t,r));return ki(d).pipe(En())});return re(o).pipe(wa())}function VH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return re(!0);let s=i.map(o=>{let a=Ea(o,n),u=DH(a)?a.canLoad(e,t):Un(n,()=>a(e,t));return ki(u)});return re(s).pipe(wa(),Ux(r))}function Ux(n){return vd(vt(e=>{if(typeof e!="boolean")throw zf(n,e)}),ne(e=>e===!0))}function LH(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return re(!0);let s=i.map(o=>{let a=Ea(o,n),u=SH(a)?a.canMatch(e,t):Un(n,()=>a(e,t));return ki(u)});return re(s).pipe(wa(),Ux(r))}var Vc=class{constructor(e){this.segmentGroup=e||null}},Lc=class extends Error{constructor(e){super(),this.urlTree=e}};function da(n){return Po(new Vc(n))}function jH(n){return Po(new j(4e3,!1))}function BH(n){return Po(Lx(!1,gn.GuardRejected))}var gw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return re(r);if(i.numberOfChildren>1||!i.children[fe])return jH(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,params:m,data:_,title:D}=i,b=Un(s,()=>a({params:m,data:_,queryParams:u,fragment:l,routeConfig:d,url:f,outlet:g,title:D}));if(b instanceof Ri)throw new Lc(b);t=b}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Lc(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ri(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Ne(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},mw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UH(n,e,t,r,i){let s=Iw(n,e,t);return s.matched?(r=lH(e,r),LH(r,e,t,i).pipe(ne(o=>o===!0?s:L({},mw)))):re(s)}function Iw(n,e,t){if(e.path==="**")return $H(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},mw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||L$)(t,n,e);if(!i)return L({},mw);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $H(n){return{matched:!0,parameters:n.length>0?Ex(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function gx(n,e,t,r){return t.length>0&&zH(n,t,r)?{segmentGroup:new Ne(e,qH(r,new Ne(t,n.children))),slicedSegments:[]}:t.length===0&&GH(n,t,r)?{segmentGroup:new Ne(n.segments,HH(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ne(n.segments,n.children),slicedSegments:t}}function HH(n,e,t,r){let i={};for(let s of t)if(Yf(n,e,s)&&!r[Gn(s)]){let o=new Ne([],{});i[Gn(s)]=o}return L(L({},r),i)}function qH(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&Gn(r)!==fe){let i=new Ne([],{});t[Gn(r)]=i}return t}function zH(n,e,t){return t.some(r=>Yf(n,e,r)&&Gn(r)!==fe)}function GH(n,e,t){return t.some(r=>Yf(n,e,r))}function Yf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function WH(n,e,t,r){return Gn(n)!==r&&(r===fe||!Yf(e,t,n))?!1:Iw(e,n,t).matched}function KH(n,e,t){return e.length===0&&!n.children[t]}var yw=class{};function QH(n,e,t,r,i,s,o="emptyOnly"){return new vw(n,e,t,r,i,o,s).recognize()}var YH=31,vw=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new gw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=gx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ne(({children:t,rootSnapshot:r})=>{let i=new pn(r,t),s=new qf("",i),o=rH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new pa([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(ne(r=>({children:r,rootSnapshot:t})),pi(r=>{if(r instanceof Lc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Vc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ne(o=>o instanceof pn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return De(s).pipe(hs(o=>{let a=r.children[o],u=dH(t,o);return this.processSegmentGroup(e,u,a,o,i)}),mi((o,a)=>(o.push(...a),o)),gi(null),jm(),ct(o=>{if(o===null)return da(r);let a=$x(o);return ZH(a),re(a)}))}processSegment(e,t,r,i,s,o,a){return De(t).pipe(hs(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a).pipe(pi(l=>{if(l instanceof Vc)return re(null);throw l}))),En(u=>!!u),pi(u=>{if(Bx(u))return KH(r,i,s)?re(new yw):da(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,u){return WH(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):da(i):da(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=Iw(t,i,s);if(!u)return da(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YH&&(this.allowRedirects=!1));let m=new pa(s,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,mx(i),Gn(i),i.component??i._loadedComponent??null,i,yx(i)),_=Hf(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(ct(b=>this.processSegment(e,r,t,b.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=UH(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(et(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(et(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=u,_=new pa(g,f,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,mx(r),Gn(r),r.component??r._loadedComponent??null,r,yx(r)),D=Hf(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(D.params),_.data=Object.freeze(D.data);let{segmentGroup:b,slicedSegments:k}=gx(t,g,m,l);if(k.length===0&&b.hasChildren())return this.processChildren(d,l,b,_).pipe(ne(P=>new pn(_,P)));if(l.length===0&&k.length===0)return re(new pn(_,[]));let B=Gn(r)===s;return this.processSegment(d,l,b,k,B?fe:s,!0,_).pipe(ne(P=>new pn(_,P instanceof pn?[P]:[])))}))):da(t)))}getChildConfig(e,t,r){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):VH(e,t,r,this.urlSerializer).pipe(ct(i=>i?this.configLoader.loadChildren(e,t).pipe(vt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):BH(t))):re({routes:[],injector:e})}};function ZH(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function JH(n){let e=n.value.routeConfig;return e&&e.path===""}function $x(n){let e=[],t=new Set;for(let r of n){if(!JH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=$x(r.children);e.push(new pn(r.value,i))}return e.filter(r=>!t.has(r))}function mx(n){return n.data||{}}function yx(n){return n.resolve||{}}function XH(n,e,t,r,i,s){return ct(o=>QH(n,e,t,r,o.extractedUrl,i,s).pipe(ne(({state:a,tree:u})=>ce(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function eq(n,e){return ct(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return re(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of Hx(u))o.add(l);let a=0;return De(o).pipe(hs(u=>s.has(u)?tq(u,r,n,e):(u.data=Hf(u,u.parent,n).resolve,re(void 0))),vt(()=>a++),Oo(1),ct(u=>a===o.size?re(t):qt))})}function Hx(n){let e=n.children.map(t=>Hx(t)).flat();return[n,...e]}function tq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Fx(i)&&(s[jc]=i.title),nq(s,n,e,r).pipe(ne(o=>(n._resolvedData=o,n.data=Hf(n,n.parent,t).resolve,null)))}function nq(n,e,t,r){let i=Q_(n);if(i.length===0)return re({});let s={};return De(i).pipe(ct(o=>rq(n[o],e,t,r).pipe(En(),vt(a=>{if(a instanceof Fc)throw zf(new ya,a);s[o]=a}))),Oo(1),Lm(s),pi(o=>Bx(o)?qt:Po(o)))}function rq(n,e,t,r){let i=Uc(e)??r,s=Ea(n,i),o=s.resolve?s.resolve(e,t):Un(i,()=>s(e,t));return ki(o)}function W_(n){return et(e=>{let t=n(e);return t?De(t).pipe(ne(()=>e)):re(e)})}var qx=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===fe);return i}getResolvedTitleForRoute(r){return r.data[jc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(iq),providedIn:"root"});let n=e;return n})(),iq=(()=>{let e=class e extends qx{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(V(NM))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qc=new q("",{providedIn:"root",factory:()=>({})}),sq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ln({type:e,selectors:[["ng-component"]],standalone:!0,features:[lc],decls:1,vars:0,template:function(i,s){i&1&&Mt(0,"router-outlet")},dependencies:[Ew],encapsulation:2});let n=e;return n})();function Dw(n){let e=n.children&&n.children.map(Dw),t=e?ce(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=sq),t}var Wf=new q(""),Cw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(rf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return re(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ki(r.loadComponent()).pipe(ne(zx),vt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Hu(()=>{this.componentLoaders.delete(r)})),s=new Mo(i,()=>new Me).pipe(Ao());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=oq(i,this.compiler,r,this.onLoadEndListener).pipe(Hu(()=>{this.childrenLoaders.delete(i)})),a=new Mo(o,()=>new Me).pipe(Ao());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oq(n,e,t,r){return ki(n.loadChildren()).pipe(ne(zx),ct(i=>i instanceof Zu||Array.isArray(i)?re(i):De(e.compileModuleAsync(i))),ne(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Wf,[],{optional:!0,self:!0}).flat()),{routes:o.map(Dw),injector:s}}))}function aq(n){return n&&typeof n=="object"&&"default"in n}function zx(n){return aq(n)?n.default:n}var bw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(uq),providedIn:"root"});let n=e;return n})(),uq=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Gx=new q(""),Wx=new q("");function cq(n,e,t){let r=n.get(Wx),i=n.get(st);return n.get(ae).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),lq(n))),{onViewTransitionCreated:u}=r;return u&&Un(n,()=>u({transition:a,from:e,to:t})),o})}function lq(n){return new Promise(e=>{Gh(()=>setTimeout(e),{injector:n,phase:_i.Read})})}var dq=new q(""),Tw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=U(Cw),this.environmentInjector=U(sn),this.urlSerializer=U(Bc),this.rootContexts=U($c),this.location=U(aa),this.inputBindingEnabled=U(Qf,{optional:!0})!==null,this.titleStrategy=U(qx),this.options=U(qc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(bw),this.createViewTransition=U(Gx,{optional:!0}),this.navigationErrorHandler=U(dq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null;let r=s=>this.events.next(new rw(s)),i=s=>this.events.next(new iw(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new St({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),ne(o=>ce(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),et(o=>{let a=!1,u=!1;return re(o).pipe(et(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",gn.SupersededByNewNavigation),qt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ce(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Pi(l.id,this.urlSerializer.serialize(l.rawUrl),g,Lf.IgnoredSameUrlNavigation)),l.resolve(!1),qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return re(l).pipe(et(g=>{let m=this.transitions?.getValue();return this.events.next(new va(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?qt:Promise.resolve(g)}),XH(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ce(L({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new jf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:m,source:_,restoredState:D,extras:b}=l,k=new va(g,this.urlSerializer.serialize(m),_,D);this.events.next(k);let B=kx(this.rootComponentType).snapshot;return this.currentTransition=o=ce(L({},l),{targetSnapshot:B,urlAfterRedirects:m,extras:ce(L({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,re(o)}else{let g="";return this.events.next(new Pi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,Lf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),qt}}),vt(l=>{let d=new X_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ne(l=>(this.currentTransition=o=ce(L({},l),{guards:vH(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),MH(this.environmentInjector,l=>this.events.next(l)),vt(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw zf(this.urlSerializer,l.guardsResult);let d=new ew(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Et(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",gn.GuardRejected),!1)),W_(l=>{if(l.guards.canActivateChecks.length)return re(l).pipe(vt(d=>{let f=new tw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),et(d=>{let f=!1;return re(d).pipe(eq(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",gn.NoDataFromResolver)}}))}),vt(d=>{let f=new nw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),W_(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(vt(m=>{f.component=m}),ne(()=>{})));for(let m of f.children)g.push(...d(m));return g};return $u(d(l.targetSnapshot.root)).pipe(gi(null),Rr(1))}),W_(()=>this.afterPreactivation()),et(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?De(f).pipe(ne(()=>o)):re(o)}),ne(l=>{let d=fH(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ce(L({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),vt(()=>{this.events.next(new kc)}),yH(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Rr(1),vt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new hr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Um(this.transitionAbortSubject.pipe(vt(l=>{throw l}))),Hu(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",gn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pi(l=>{if(u=!0,jx(l))this.events.next(new Qr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),mH(l)?this.events.next(new _a(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Pc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=Un(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Fc){let{message:g,cancellationCode:m}=zf(this.urlSerializer,f);this.events.next(new Qr(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new _a(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return qt}))}))}cancelNavigationTransition(r,i,s){let o=new Qr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hq(n){return n!==Mc}var fq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(pq),providedIn:"root"});let n=e;return n})(),_w=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},pq=(()=>{let e=class e extends _w{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ta(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Kx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>U(gq),providedIn:"root"});let n=e;return n})(),gq=(()=>{let e=class e extends Kx{constructor(){super(...arguments),this.location=U(aa),this.urlSerializer=U(Bc),this.options=U(qc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(bw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ri,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=kx(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof va)this.stateMemento=this.createStateMemento();else if(r instanceof Pi)this.rawUrlTree=i.initialUrl;else if(r instanceof jf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof kc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Qr&&(r.code===gn.GuardRejected||r.code===gn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Pc?this.restoreHistory(i,!0):r instanceof hr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ta(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Sc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Sc||{});function Qx(n,e){n.events.pipe(Et(t=>t instanceof hr||t instanceof Qr||t instanceof Pc||t instanceof Pi),ne(t=>t instanceof hr||t instanceof Pi?Sc.COMPLETE:(t instanceof Qr?t.code===gn.Redirect||t.code===gn.SupersededByNewNavigation:!1)?Sc.REDIRECTING:Sc.FAILED),Et(t=>t!==Sc.REDIRECTING),Rr(1)).subscribe(()=>{e()})}function mq(n){throw n}var yq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fr=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(Xh),this.stateManager=U(Kx),this.options=U(qc,{optional:!0})||{},this.pendingTasks=U(na),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(Tw),this.urlSerializer=U(Bc),this.location=U(aa),this.urlHandlingStrategy=U(bw),this._events=new Me,this.errorHandler=this.options.errorHandler||mq,this.navigated=!1,this.routeReuseStrategy=U(fq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Wf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Qf,{optional:!0}),this.eventsSubscription=new Xe,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Qr&&i.code!==gn.Redirect&&i.code!==gn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof hr)this.navigated=!0;else if(i instanceof _a){let a=i.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=L({info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||hq(s.source)},a);this.scheduleNavigation(u,Mc,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}wq(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Dw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(u){case"merge":f=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=xx(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return Nx(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Nc(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Mc,null,i)}navigate(r,i={skipLocationChange:!1}){return _q(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},yq):i===!1?s=L({},vq):s=i,Nc(r))return lx(this.currentUrlTree,r,s);let o=this.parseUrl(r);return lx(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,d;a?(u=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,m)=>{u=g,l=m});let f=this.pendingTasks.add();return Qx(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function _q(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new j(4008,!1)}function wq(n){return!(n instanceof kc)&&!(n instanceof _a)}var Zf=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Me,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(d=>{d instanceof hr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:tA(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ie(fr),ie(Yr),fv("tabindex"),ie(Ts),ie(Lr),ie(Wr))},e.\u0275dir=At({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ft("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Hr("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",oa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",oa],replaceUrl:[2,"replaceUrl","replaceUrl",oa],routerLink:"routerLink"},standalone:!0,features:[Fv,Ai]});let n=e;return n})();var Kf=class{};var Eq=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Et(r=>r instanceof hr),hs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Wh(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return De(s).pipe(fi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=re(null);let o=s.pipe(ct(a=>a===null?re(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return De([o,a]).pipe(fi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(V(fr),V(rf),V(sn),V(Kf),V(Cw))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Yx=new q(""),Iq=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=U(sn),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof va?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof hr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Pi&&r.code===Lf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Bf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>R(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Gh(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Bf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){hA()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function Dq(n){return n.routerState.root}function zc(n,e){return{\u0275kind:n,\u0275providers:e}}function Cq(){let n=U(it);return e=>{let t=n.get(qn);if(e!==t.components[0])return;let r=n.get(fr),i=n.get(Zx);n.get(Sw)===1&&r.initialNavigation(),n.get(Jx,null,me.Optional)?.setUpPreloading(),n.get(Yx,null,me.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Zx=new q("",{factory:()=>new Me}),Sw=new q("",{providedIn:"root",factory:()=>1});function bq(){return zc(2,[{provide:Sw,useValue:0},{provide:nf,multi:!0,deps:[it],useFactory:e=>{let t=e.get(pM,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(fr),s=e.get(Zx);Qx(i,()=>{r(!0)}),e.get(Tw).afterPreactivation=()=>(r(!0),s.closed?re(void 0):s),i.initialNavigation()}))}}])}function Tq(){return zc(3,[{provide:nf,multi:!0,useFactory:()=>{let e=U(fr);return()=>{e.setUpLocationChangeListener()}}},{provide:Sw,useValue:2}])}var Jx=new q("");function Sq(n){return zc(0,[{provide:Jx,useExisting:Eq},{provide:Kf,useExisting:n}])}function Aq(){return zc(8,[px,{provide:Qf,useExisting:px}])}function Mq(n){let e=[{provide:Gx,useValue:cq},{provide:Wx,useValue:L({skipNextTransition:!!n?.skipInitialTransition},n)}];return zc(9,e)}var vx=new q("ROUTER_FORROOT_GUARD"),xq=[aa,{provide:Bc,useClass:ya},fr,$c,{provide:Yr,useFactory:Dq,deps:[fr]},Cw,[]],Aw=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[xq,[],{provide:Wf,multi:!0,useValue:r},{provide:vx,useFactory:kq,deps:[[fr,new on,new Xy]]},{provide:qc,useValue:i||{}},i?.useHash?Rq():Pq(),Nq(),i?.preloadingStrategy?Sq(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Oq(i):[],i?.bindToComponentInputs?Aq().\u0275providers:[],i?.enableViewTransitions?Mq().\u0275providers:[],Fq()]}}static forChild(r){return{ngModule:e,providers:[{provide:Wf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(V(vx,8))},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let n=e;return n})();function Nq(){return{provide:Yx,useFactory:()=>{let n=U(DM),e=U(ae),t=U(qc),r=U(Tw),i=U(Bc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Iq(i,r,n,e,t)}}}function Rq(){return{provide:Wr,useClass:mM}}function Pq(){return{provide:Wr,useClass:Xv}}function kq(n){return"guarded"}function Oq(n){return[n.initialNavigation==="disabled"?Tq().\u0275providers:[],n.initialNavigation==="enabledBlocking"?bq().\u0275providers:[]]}var _x=new q("");function Fq(){return[{provide:_x,useFactory:Cq},{provide:Bv,multi:!0,useExisting:_x}]}var Vq="firebase",Lq="10.12.3";$t(Vq,Lq,"app");var Mn=new Fr("ANGULARFIRE2_VERSION");function Nw(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Gc=(n,e)=>{let t=e?[e]:ud(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},pr=class{constructor(){return Gc(jq)}},jq="app-check";function Ia(){}var Jf=class{zone;delegate;constructor(e,t=Pm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},xw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ia,{},Ia,Ia)),t.pipe(vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Zr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Jf(Zone.current)),this.insideAngular=t.run(()=>new Jf(Zone.current,Uu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(ae))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Xf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Bq(n){return Xf().ngZone.runOutsideAngular(()=>n())}function Us(n){return Xf().ngZone.run(()=>n())}function Qt(n){return Uq(Xf())(n)}function Uq(n){return function(t){return t=t.lift(new xw(n.ngZone)),t.pipe(wn(n.outsideAngular),cn(n.insideAngular))}}var $q=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Us(()=>n.apply(void 0,r))},$s=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Us(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ia,{},Ia,Ia))),r[s]=$q(r[s],t));let i=Bq(()=>n.apply(this,r));if(!e)if(i instanceof he){let s=Xf();return i.pipe(wn(s.outsideAngular),cn(s.insideAngular))}else return Us(()=>i);return i instanceof he?i.pipe(Qt):i instanceof Promise?Us(()=>new Promise((s,o)=>i.then(a=>Us(()=>s(a)),a=>Us(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Us(()=>i)};var Hs=class{constructor(e){return e}},Wc=class{constructor(){return ud()}};function Hq(n){return n&&n.length===1?n[0]:new Hs(Fu())}var Rw=new q("angularfire2._apps"),qq={provide:Hs,useFactory:Hq,deps:[[new on,Rw]]},zq={provide:Wc,deps:[[new on,Rw]]};function Gq(n){return(e,t)=>{let r=t.get(Ot);$t("angularfire",Mn.full,"core"),$t("angularfire",Mn.full,"app"),$t("angular",Jh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Hs(i)}}function eN(n,...e){return Si([qq,zq,{provide:Rw,useFactory:Gq(n),multi:!0,deps:[ae,it,Zr,...e]}])}var tN=$s(Xb,!0);var Wq=new Map,Kq={activated:!1,tokenObservers:[]},Qq={initialized:!1,enabled:!1};function Wn(n){return Wq.get(n)||Object.assign({},Kq)}function oN(){return Qq}var Yq="https://content-firebaseappcheck.googleapis.com/v1";var Zq="exchangeDebugToken",nN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},RZ=24*60*60*1e3;var kw=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new ym,this.pending.promise.catch(t=>{}),yield Jq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new ym,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Jq(n){return new Promise(e=>{setTimeout(e,n)})}var Xq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Oi=new Zb("appCheck","AppCheck",Xq);function aN(n){if(!Wn(n).activated)throw Oi.create("use-before-activation",{appName:n.name})}function uN(r,i){return R(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},u;try{u=yield fetch(n,a)}catch(m){throw Oi.create("fetch-network-error",{originalErrorMessage:m?.message})}if(u.status!==200)throw Oi.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(m){throw Oi.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Oi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function cN(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Yq}/projects/${t}/apps/${r}:${Zq}?key=${i}`,body:{debug_token:e}}}var ez="firebase-app-check-database",tz=1,Ow="firebase-app-check-store";var ep=null;function nz(){return ep||(ep=new Promise((n,e)=>{try{let t=indexedDB.open(ez,tz);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Oi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Ow,{keyPath:"compositeKey"})}}}catch(t){e(Oi.create("storage-open",{originalErrorMessage:t?.message}))}}),ep)}function rz(n,e){return iz(sz(n),e)}function iz(n,e){return R(this,null,function*(){let r=(yield nz()).transaction(Ow,"readwrite"),s=r.objectStore(Ow).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Oi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function sz(n){return`${n.options.appId}-${n.name}`}var Fw=new ad("@firebase/app-check");function Pw(n,e){return od()?rz(n,e).catch(t=>{Fw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function lN(){return oN().enabled}function dN(){return R(this,null,function*(){let n=oN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var oz={error:"UNKNOWN_ERROR"};function az(n){return Wb.encodeString(JSON.stringify(n),!1)}function Vw(n,e=!1){return R(this,null,function*(){let t=n.app;aN(t);let r=Wn(t),i=r.token,s;if(i&&!Kc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Kc(u)?i=u:yield Pw(t,void 0))}if(!e&&i&&Kc(i))return{token:i.token};let o=!1;if(lN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uN(cN(t,yield dN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let u=yield r.exchangeTokenPromise;return yield Pw(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Wn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Fw.warn(u.message):Fw.error(u),s=u}let a;return i?s?Kc(i)?a={token:i.token,internalError:s}:a=iN(s):(a={token:i.token},r.token=i,yield Pw(t,i)):a=iN(s),o&&dz(t,a),a})}function uz(n){return R(this,null,function*(){let e=n.app;aN(e);let{provider:t}=Wn(e);if(lN()){let r=yield dN(),{token:i}=yield uN(cN(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function cz(n,e,t,r){let{app:i}=n,s=Wn(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Kc(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),rN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>rN(n))}function hN(n,e){let t=Wn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function rN(n){let{app:e}=n,t=Wn(e),r=t.tokenRefresher;r||(r=lz(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function lz(n){let{app:e}=n;return new kw(()=>R(this,null,function*(){let t=Wn(e),r;if(t.token?r=yield Vw(n,!0):r=yield Vw(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Wn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},nN.RETRIAL_MIN_WAIT,nN.RETRIAL_MAX_WAIT)}function dz(n,e){let t=Wn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Kc(n){return n.expireTimeMillis-Date.now()>0}function iN(n){return{token:az(oz),error:n}}var Lw=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Wn(this.app);for(let t of e)hN(this.app,t.next);return Promise.resolve()}};function hz(n,e){return new Lw(n,e)}function fz(n){return{getToken:e=>Vw(n,e),getLimitedUseToken:()=>uz(n),addTokenListener:e=>cz(n,"INTERNAL",e),removeTokenListener:e=>hN(n.app,e)}}var pz="@firebase/app-check",gz="0.8.5";var mz="app-check",sN="app-check-internal";function yz(){Ou(new us(mz,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return hz(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sN).initialize()})),Ou(new us(sN,n=>{let e=n.getProvider("app-check").getImmediate();return fz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$t(pz,gz)}yz();var vz=["localhost","0.0.0.0","127.0.0.1"],qZ=typeof window<"u"&&vz.includes(window.location.hostname);var _z="firebase",wz="10.12.3";en.registerVersion(_z,wz,"app-compat");var Ez=["ngOnDestroy"],gN=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(Ez.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let u=a?.[s];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var tp=class{constructor(e){return e}},Da=new q("angularfire2.app.options"),Ca=new q("angularfire2.app.name");function Qc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=en.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>en.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;Iz("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new tp(o)}var Iz=(n,...e)=>{$v()&&typeof console<"u"&&console[n](...e)},Dz={provide:tp,useFactory:Qc,deps:[Da,ae,[new on,Ca]]},mN=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Da,useValue:t},{provide:Ca,useValue:r}]}}constructor(t){en.registerVersion("angularfire",Mn.full,"core"),en.registerVersion("angularfire",Mn.full,"app-compat"),en.registerVersion("angular",Jh.full,t.toString())}static \u0275fac=function(r){return new(r||n)(V(Ot))};static \u0275mod=Ke({type:n});static \u0275inj=We({providers:[Dz]})}return n})();function np(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return Cz(i,o)||(pN("error",`${e} was already initialized on the ${t} Firebase App with different settings.${bz?" You may need to reload as Firebase is not HMR aware.":""}`),pN("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Cz(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var bz=typeof module<"u"&&!!module.hot,pN=(n,...e)=>{$v()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var jw=new q("angularfire2.auth.use-emulator"),Bw=new q("angularfire2.auth.settings"),Uw=new q("angularfire2.auth.tenant-id"),$w=new q("angularfire2.auth.langugage-code"),Hw=new q("angularfire2.auth.use-device-language"),qw=new q("angularfire.auth.persistence"),zw=(n,e,t,r,i,s,o,a)=>np(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))u.settings[l]=d;return a&&u.setPersistence(a),u},[t,r,i,s,o,a]),yN=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,u,l,d,f,g,m){let _=new Me,D=re(void 0).pipe(cn(o.outsideAngular),et(()=>s.runOutsideAngular(()=>import("./chunk-OYTUXKHF.js"))),ne(()=>Qc(t,s,r)),ne(b=>zw(b,s,a,l,d,f,u,g)),Ud({bufferSize:1,refCount:!1}));if(Rs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=re(null);else{D.pipe(En()).subscribe();let b=D.pipe(et(P=>P.getRedirectResult().then($=>$,()=>null)),Qt,Ud({bufferSize:1,refCount:!1})),k=D.pipe(et(P=>new he($=>({unsubscribe:s.runOutsideAngular(()=>P.onAuthStateChanged(Z=>$.next(Z),Z=>$.error(Z),()=>$.complete()))})))),B=D.pipe(et(P=>new he($=>({unsubscribe:s.runOutsideAngular(()=>P.onIdTokenChanged(Z=>$.next(Z),Z=>$.error(Z),()=>$.complete()))}))));this.authState=b.pipe($d(k),wn(o.outsideAngular),cn(o.insideAngular)),this.user=b.pipe($d(B),wn(o.outsideAngular),cn(o.insideAngular)),this.idToken=this.user.pipe(et(P=>P?De(P.getIdToken()):re(null))),this.idTokenResult=this.user.pipe(et(P=>P?De(P.getIdTokenResult()):re(null))),this.credential=Vm(b,_,this.authState.pipe(Et(P=>!P))).pipe(ne(P=>P?.user?P:null),wn(o.outsideAngular),cn(o.insideAngular))}return gN(this,D,s,{spy:{apply:(b,k,B)=>{(b.startsWith("signIn")||b.startsWith("createUser"))&&B.then(P=>_.next(P))}}})}static \u0275fac=function(r){return new(r||n)(V(Da),V(Ca,8),V(Ot),V(ae),V(Zr),V(jw,8),V(Bw,8),V(Uw,8),V($w,8),V(Hw,8),V(qw,8),V(pr,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var vN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_N={};var Fi,Gw;(function(){var n;function e(I,v){function w(){}w.prototype=v.prototype,I.D=v.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(C,T,A){for(var E=Array(arguments.length-2),vn=2;vn<arguments.length;vn++)E[vn-2]=arguments[vn];return v.prototype[T].apply(C,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,w){w||(w=0);var C=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)C[T]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(T=0;16>T;++T)C[T]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=I.g[0],w=I.g[1],T=I.g[2];var A=I.g[3],E=v+(A^w&(T^A))+C[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(T^v&(w^T))+C[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(w^A&(v^w))+C[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(v^T&(A^v))+C[3]+3250441966&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(A^w&(T^A))+C[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(T^v&(w^T))+C[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(w^A&(v^w))+C[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(v^T&(A^v))+C[7]+4249261313&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(A^w&(T^A))+C[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(T^v&(w^T))+C[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(w^A&(v^w))+C[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(v^T&(A^v))+C[11]+2304563134&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(A^w&(T^A))+C[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(T^v&(w^T))+C[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=T+(w^A&(v^w))+C[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(v^T&(A^v))+C[15]+1236535329&4294967295,w=T+(E<<22&4294967295|E>>>10),E=v+(T^A&(w^T))+C[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(v^w))+C[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(A^v))+C[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(T^A))+C[0]+3921069994&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(w^T))+C[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(v^w))+C[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(A^v))+C[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(T^A))+C[4]+3889429448&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(w^T))+C[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(v^w))+C[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(A^v))+C[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(T^A))+C[8]+1163531501&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(T^A&(w^T))+C[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(v^w))+C[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=T+(v^w&(A^v))+C[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(T^A))+C[12]+2368359562&4294967295,w=T+(E<<20&4294967295|E>>>12),E=v+(w^T^A)+C[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^T)+C[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^w)+C[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^v)+C[14]+4259657740&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^A)+C[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^T)+C[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^w)+C[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^v)+C[10]+3200236656&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^A)+C[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^T)+C[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^w)+C[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^v)+C[6]+76029189&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(w^T^A)+C[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^T)+C[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=T+(A^v^w)+C[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^v)+C[2]+3299628645&4294967295,w=T+(E<<23&4294967295|E>>>9),E=v+(T^(w|~A))+C[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~T))+C[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~w))+C[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~v))+C[5]+4237533241&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~A))+C[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~T))+C[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~w))+C[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~v))+C[1]+2240044497&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~A))+C[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~T))+C[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~w))+C[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~v))+C[13]+1309151649&4294967295,w=T+(E<<21&4294967295|E>>>11),E=v+(T^(w|~A))+C[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~T))+C[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=T+(v^(A|~w))+C[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~v))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+A&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var w=v-this.blockSize,C=this.B,T=this.h,A=0;A<v;){if(T==0)for(;A<=w;)i(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<v;)if(C[T++]=I.charCodeAt(A++),T==this.blockSize){i(this,C),T=0;break}}else for(;A<v;)if(C[T++]=I[A++],T==this.blockSize){i(this,C),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var w=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=w&255,w/=256;for(this.u(I),I=Array(16),v=w=0;4>v;++v)for(var C=0;32>C;C+=8)I[w++]=this.g[v]>>>C&255;return I};function s(I,v){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=v(I)}function o(I,v){this.h=v;for(var w=[],C=!0,T=I.length-1;0<=T;T--){var A=I[T]|0;C&&A==v||(w[T]=A,C=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return b(l(-I));for(var v=[],w=1,C=0;I>=w;C++)v[C]=I/w|0,w*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return b(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),C=f,T=0;T<I.length;T+=8){var A=Math.min(8,I.length-T),E=parseInt(I.substring(T,T+A),v);8>A?(A=l(Math.pow(v,A)),C=C.j(A).add(l(E))):(C=C.j(w),C=C.add(l(E)))}return C}var f=u(0),g=u(1),m=u(16777216);n=o.prototype,n.m=function(){if(D(this))return-b(this).m();for(var I=0,v=1,w=0;w<this.g.length;w++){var C=this.i(w);I+=(0<=C?C:4294967296+C)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(_(this))return"0";if(D(this))return"-"+b(this).toString(I);for(var v=l(Math.pow(I,6)),w=this,C="";;){var T=$(w,v).g;w=k(w,T.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=T,_(w))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function _(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=k(this,I),D(I)?-1:_(I)?0:1};function b(I){for(var v=I.g.length,w=[],C=0;C<v;C++)w[C]=~I.g[C];return new o(w,~I.h).add(g)}n.abs=function(){return D(this)?b(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0,T=0;T<=v;T++){var A=C+(this.i(T)&65535)+(I.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);C=E>>>16,A&=65535,E&=65535,w[T]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function k(I,v){return I.add(b(v))}n.j=function(I){if(_(this)||_(I))return f;if(D(this))return D(I)?b(this).j(b(I)):b(b(this).j(I));if(D(I))return b(this.j(b(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,w=[],C=0;C<2*v;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var T=0;T<I.g.length;T++){var A=this.i(C)>>>16,E=this.i(C)&65535,vn=I.i(T)>>>16,ai=I.i(T)&65535;w[2*C+2*T]+=E*ai,B(w,2*C+2*T),w[2*C+2*T+1]+=A*ai,B(w,2*C+2*T+1),w[2*C+2*T+1]+=E*vn,B(w,2*C+2*T+1),w[2*C+2*T+2]+=A*vn,B(w,2*C+2*T+2)}for(C=0;C<v;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=v;C<2*v;C++)w[C]=0;return new o(w,0)};function B(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function P(I,v){this.g=I,this.h=v}function $(I,v){if(_(v))throw Error("division by zero");if(_(I))return new P(f,f);if(D(I))return v=$(b(I),v),new P(b(v.g),b(v.h));if(D(v))return v=$(I,b(v)),new P(b(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,C=v;0>=C.l(I);)w=Z(w),C=Z(C);var T=Q(w,1),A=Q(C,1);for(C=Q(C,2),w=Q(w,2);!_(C);){var E=A.add(C);0>=E.l(I)&&(T=T.add(w),A=E),C=Q(C,1),w=Q(w,1)}return v=k(I,T.j(v)),new P(T,v)}for(T=f;0<=I.l(v);){for(w=Math.max(1,Math.floor(I.m()/v.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=l(w),E=A.j(v);D(E)||0<E.l(I);)w-=C,A=l(w),E=A.j(v);_(A)&&(A=g),T=T.add(A),I=k(I,E)}return new P(T,I)}n.A=function(I){return $(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)&I.i(C);return new o(w,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)|I.i(C);return new o(w,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),w=[],C=0;C<v;C++)w[C]=this.i(C)^I.i(C);return new o(w,this.h^I.h)};function Z(I){for(var v=I.g.length+1,w=[],C=0;C<v;C++)w[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(w,I.h)}function Q(I,v){var w=v>>5;v%=32;for(var C=I.g.length-w,T=[],A=0;A<C;A++)T[A]=0<v?I.i(A+w)>>>v|I.i(A+w+1)<<32-v:I.i(A+w);return new o(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gw=_N.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Fi=_N.Integer=o}).apply(typeof vN<"u"?vN:typeof self<"u"?self:typeof window<"u"?window:{});var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jr={};var Ww,Kw,ba,Qw,Yc,ip,Yw,Zw,Jw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,h,p){return c==Array.prototype||c==Object.prototype||(c[h]=p.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof rp=="object"&&rp];for(var h=0;h<c.length;++h){var p=c[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(c,h){if(h)e:{var p=r;c=c.split(".");for(var y=0;y<c.length-1;y++){var S=c[y];if(!(S in p))break e;p=p[S]}c=c[c.length-1],y=p[c],h=h(y),h!=y&&h!=null&&e(p,c,{configurable:!0,writable:!0,value:h})}}function s(c,h){c instanceof String&&(c+="");var p=0,y=!1,S={next:function(){if(!y&&p<c.length){var x=p++;return{value:h(x,c[x]),done:!1}}return y=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(c){return c||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function u(c){var h=typeof c;return h=h!="object"?h:c?Array.isArray(c)?"array":h:"null",h=="array"||h=="object"&&typeof c.length=="number"}function l(c){var h=typeof c;return h=="object"&&c!=null||h=="function"}function d(c,h,p){return c.call.apply(c.bind,arguments)}function f(c,h,p){if(!c)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,y),c.apply(h,S)}}return function(){return c.apply(h,arguments)}}function g(c,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(c,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),c.apply(this,y)}}function _(c,h){function p(){}p.prototype=h.prototype,c.aa=h.prototype,c.prototype=new p,c.prototype.constructor=c,c.Qb=function(y,S,x){for(var H=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)H[Oe-2]=arguments[Oe];return h.prototype[S].apply(y,H)}}function D(c){let h=c.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=c[y];return p}return[]}function b(c,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(u(y)){let S=c.length||0,x=y.length||0;c.length=S+x;for(let H=0;H<x;H++)c[S+H]=y[H]}else c.push(y)}}class k{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function B(c){return/^[\s\xa0]*$/.test(c)}function P(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function $(c){return $[" "](c),c}$[" "]=function(){};var Z=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function Q(c,h,p){for(let y in c)h.call(p,c[y],y,c)}function I(c,h){for(let p in c)h.call(void 0,c[p],p,c)}function v(c){let h={};for(let p in c)h[p]=c[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,h){let p,y;for(let S=1;S<arguments.length;S++){y=arguments[S];for(p in y)c[p]=y[p];for(let x=0;x<w.length;x++)p=w[x],Object.prototype.hasOwnProperty.call(y,p)&&(c[p]=y[p])}}function T(c){var h=1;c=c.split(":");let p=[];for(;0<h&&c.length;)p.push(c.shift()),h--;return c.length&&p.push(c.join(":")),p}function A(c){a.setTimeout(()=>{throw c},0)}function E(){var c=ve;let h=null;return c.g&&(h=c.g,c.g=c.g.next,c.g||(c.h=null),h.next=null),h}class vn{constructor(){this.h=this.g=null}add(h,p){let y=ai.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var ai=new k(()=>new Y,c=>c.reset());class Y{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let J,te=!1,ve=new vn,rt=()=>{let c=a.Promise.resolve(void 0);J=()=>{c.then(_n)}};var _n=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(p){A(p)}var h=ai;h.j(c),100>h.h&&(h.h++,c.next=h.g,h.g=c)}te=!1};function Ye(){this.s=this.s,this.C=this.C}Ye.prototype.s=!1,Ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(c,h){this.type=c,this.g=this.target=h,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var Be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,h=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return c}();function ui(c,h){if(je.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var p=this.type=c.type,y=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=h,h=c.relatedTarget){if(Z){e:{try{$(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=c.fromElement:p=="mouseout"&&(h=c.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:zg[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ui.aa.h.call(this)}}_(ui,je);var zg={2:"touch",3:"pen",4:"mouse"};ui.prototype.h=function(){ui.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),Tr=0;function Xt(c,h,p,y,S){this.listener=c,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=S,this.key=++Tr,this.da=this.fa=!1}function Sr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ci(c){this.src=c,this.g={},this.h=0}ci.prototype.add=function(c,h,p,y,S){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var H=Wg(c,h,y,S);return-1<H?(h=c[H],p||(h.fa=!1)):(h=new Xt(h,this.src,x,!!y,S),h.fa=p,c.push(h)),h};function Gg(c,h){var p=h.type;if(p in c.g){var y=c.g[p],S=Array.prototype.indexOf.call(y,h,void 0),x;(x=0<=S)&&Array.prototype.splice.call(y,S,1),x&&(Sr(h),c.g[p].length==0&&(delete c.g[p],c.h--))}}function Wg(c,h,p,y){for(var S=0;S<c.length;++S){var x=c[S];if(!x.da&&x.listener==h&&x.capture==!!p&&x.ha==y)return S}return-1}var Kg="closure_lm_"+(1e6*Math.random()|0),Qg={};function HC(c,h,p,y,S){if(y&&y.once)return zC(c,h,p,y,S);if(Array.isArray(h)){for(var x=0;x<h.length;x++)HC(c,h[x],p,y,S);return null}return p=Xg(p),c&&c[Ze]?c.K(h,p,l(y)?!!y.capture:!!y,S):qC(c,h,p,!1,y,S)}function qC(c,h,p,y,S,x){if(!h)throw Error("Invalid event type");var H=l(S)?!!S.capture:!!S,Oe=Zg(c);if(Oe||(c[Kg]=Oe=new ci(c)),p=Oe.add(h,p,y,H,x),p.proxy)return p;if(y=Ik(),p.proxy=y,y.src=c,y.listener=p,c.addEventListener)Be||(S=H),S===void 0&&(S=!1),c.addEventListener(h.toString(),y,S);else if(c.attachEvent)c.attachEvent(WC(h.toString()),y);else if(c.addListener&&c.removeListener)c.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Ik(){function c(p){return h.call(c.src,c.listener,p)}let h=Dk;return c}function zC(c,h,p,y,S){if(Array.isArray(h)){for(var x=0;x<h.length;x++)zC(c,h[x],p,y,S);return null}return p=Xg(p),c&&c[Ze]?c.L(h,p,l(y)?!!y.capture:!!y,S):qC(c,h,p,!0,y,S)}function GC(c,h,p,y,S){if(Array.isArray(h))for(var x=0;x<h.length;x++)GC(c,h[x],p,y,S);else y=l(y)?!!y.capture:!!y,p=Xg(p),c&&c[Ze]?(c=c.i,h=String(h).toString(),h in c.g&&(x=c.g[h],p=Wg(x,p,y,S),-1<p&&(Sr(x[p]),Array.prototype.splice.call(x,p,1),x.length==0&&(delete c.g[h],c.h--)))):c&&(c=Zg(c))&&(h=c.g[h.toString()],c=-1,h&&(c=Wg(h,p,y,S)),(p=-1<c?h[c]:null)&&Yg(p))}function Yg(c){if(typeof c!="number"&&c&&!c.da){var h=c.src;if(h&&h[Ze])Gg(h.i,c);else{var p=c.type,y=c.proxy;h.removeEventListener?h.removeEventListener(p,y,c.capture):h.detachEvent?h.detachEvent(WC(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Zg(h))?(Gg(p,c),p.h==0&&(p.src=null,h[Kg]=null)):Sr(c)}}}function WC(c){return c in Qg?Qg[c]:Qg[c]="on"+c}function Dk(c,h){if(c.da)c=!0;else{h=new ui(h,this);var p=c.listener,y=c.ha||c.src;c.fa&&Yg(c),c=p.call(y,h)}return c}function Zg(c){return c=c[Kg],c instanceof ci?c:null}var Jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xg(c){return typeof c=="function"?c:(c[Jg]||(c[Jg]=function(h){return c.handleEvent(h)}),c[Jg])}function Nt(){Ye.call(this),this.i=new ci(this),this.M=this,this.F=null}_(Nt,Ye),Nt.prototype[Ze]=!0,Nt.prototype.removeEventListener=function(c,h,p,y){GC(this,c,h,p,y)};function Bt(c,h){var p,y=c.F;if(y)for(p=[];y;y=y.F)p.push(y);if(c=c.M,y=h.type||h,typeof h=="string")h=new je(h,c);else if(h instanceof je)h.target=h.target||c;else{var S=h;h=new je(y,c),C(h,S)}if(S=!0,p)for(var x=p.length-1;0<=x;x--){var H=h.g=p[x];S=ql(H,y,!0,h)&&S}if(H=h.g=c,S=ql(H,y,!0,h)&&S,S=ql(H,y,!1,h)&&S,p)for(x=0;x<p.length;x++)H=h.g=p[x],S=ql(H,y,!1,h)&&S}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var c=this.i,h;for(h in c.g){for(var p=c.g[h],y=0;y<p.length;y++)Sr(p[y]);delete c.g[h],c.h--}}this.F=null},Nt.prototype.K=function(c,h,p,y){return this.i.add(String(c),h,!1,p,y)},Nt.prototype.L=function(c,h,p,y){return this.i.add(String(c),h,!0,p,y)};function ql(c,h,p,y){if(h=c.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,x=0;x<h.length;++x){var H=h[x];if(H&&!H.da&&H.capture==p){var Oe=H.listener,Tt=H.ha||H.src;H.fa&&Gg(c.i,H),S=Oe.call(Tt,y)!==!1&&S}}return S&&!y.defaultPrevented}function KC(c,h,p){if(typeof c=="function")p&&(c=g(c,p));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(c,h||0)}function QC(c){c.g=KC(()=>{c.g=null,c.i&&(c.i=!1,QC(c))},c.l);let h=c.h;c.h=null,c.m.apply(null,h)}class Ck extends Ye{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:QC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wu(c){Ye.call(this),this.h=c,this.g={}}_(wu,Ye);var YC=[];function ZC(c){Q(c.g,function(h,p){this.g.hasOwnProperty(p)&&Yg(h)},c),c.g={}}wu.prototype.N=function(){wu.aa.N.call(this),ZC(this)},wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var em=a.JSON.stringify,bk=a.JSON.parse,Tk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function tm(){}tm.prototype.h=null;function JC(c){return c.h||(c.h=c.i())}function XC(){}var Eu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nm(){je.call(this,"d")}_(nm,je);function rm(){je.call(this,"c")}_(rm,je);var is={},eb=null;function zl(){return eb=eb||new Nt}is.La="serverreachability";function tb(c){je.call(this,is.La,c)}_(tb,je);function Iu(c){let h=zl();Bt(h,new tb(h))}is.STAT_EVENT="statevent";function nb(c,h){je.call(this,is.STAT_EVENT,c),this.stat=h}_(nb,je);function Ut(c){let h=zl();Bt(h,new nb(h,c))}is.Ma="timingevent";function rb(c,h){je.call(this,is.Ma,c),this.size=h}_(rb,je);function Du(c,h){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},h)}function Cu(){this.g=!0}Cu.prototype.xa=function(){this.g=!1};function Sk(c,h,p,y,S,x){c.info(function(){if(c.g)if(x)for(var H="",Oe=x.split("&"),Tt=0;Tt<Oe.length;Tt++){var Ae=Oe[Tt].split("=");if(1<Ae.length){var Rt=Ae[0];Ae=Ae[1];var Pt=Rt.split("_");H=2<=Pt.length&&Pt[1]=="type"?H+(Rt+"="+Ae+"&"):H+(Rt+"=redacted&")}}else H=null;else H=x;return"XMLHTTP REQ ("+y+") [attempt "+S+"]: "+h+`
`+p+`
`+H})}function Ak(c,h,p,y,S,x,H){c.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+S+"]: "+h+`
`+p+`
`+x+" "+H})}function _o(c,h,p,y){c.info(function(){return"XMLHTTP TEXT ("+h+"): "+xk(c,p)+(y?" "+y:"")})}function Mk(c,h){c.info(function(){return"TIMEOUT: "+h})}Cu.prototype.info=function(){};function xk(c,h){if(!c.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(c=0;c<p.length;c++)if(Array.isArray(p[c])){var y=p[c];if(!(2>y.length)){var S=y[1];if(Array.isArray(S)&&!(1>S.length)){var x=S[0];if(x!="noop"&&x!="stop"&&x!="close")for(var H=1;H<S.length;H++)S[H]=""}}}}return em(p)}catch{return h}}var Gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ib={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},im;function Wl(){}_(Wl,tm),Wl.prototype.g=function(){return new XMLHttpRequest},Wl.prototype.i=function(){return{}},im=new Wl;function li(c,h,p,y){this.j=c,this.i=h,this.l=p,this.R=y||1,this.U=new wu(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sb}function sb(){this.i=null,this.g="",this.h=!1}var ob={},sm={};function om(c,h,p){c.L=1,c.v=Zl(Ar(h)),c.m=p,c.P=!0,ab(c,null)}function ab(c,h){c.F=Date.now(),Kl(c),c.A=Ar(c.v);var p=c.A,y=c.R;Array.isArray(y)||(y=[String(y)]),Eb(p.i,"t",y),c.C=0,p=c.j.J,c.h=new sb,c.g=jb(c.j,p?h:null,!c.m),0<c.O&&(c.M=new Ck(g(c.Y,c,c.g),c.O)),h=c.U,p=c.g,y=c.ca;var S="readystatechange";Array.isArray(S)||(S&&(YC[0]=S.toString()),S=YC);for(var x=0;x<S.length;x++){var H=HC(p,S[x],y||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,h)):(c.u="GET",c.g.ea(c.A,c.u,null,h)),Iu(),Sk(c.i,c.u,c.A,c.l,c.R,c.m)}li.prototype.ca=function(c){c=c.target;let h=this.M;h&&Mr(c)==3?h.j():this.Y(c)},li.prototype.Y=function(c){try{if(c==this.g)e:{let Pt=Mr(this.g);var h=this.g.Ba();let Io=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ab(this.g)))){this.J||Pt!=4||h==7||(h==8||0>=Io?Iu(3):Iu(2)),am(this);var p=this.g.Z();this.X=p;t:if(ub(this)){var y=Ab(this.g);c="";var S=y.length,x=Mr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),bu(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,c+=this.h.i.decode(y[h],{stream:!(x&&h==S-1)});y.length=0,this.h.g+=c,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,Ak(this.i,this.u,this.A,this.l,this.R,Pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Tt=this.g;if((Oe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Oe)){var Ae=Oe;break t}}Ae=null}if(p=Ae)_o(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,um(this,p);else{this.o=!1,this.s=3,Ut(12),ss(this),bu(this);break e}}if(this.P){p=!0;let kn;for(;!this.J&&this.C<H.length;)if(kn=Nk(this,H),kn==sm){Pt==4&&(this.s=4,Ut(14),p=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==ob){this.s=4,Ut(15),_o(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else _o(this.i,this.l,kn,null),um(this,kn);if(ub(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||H.length!=0||this.h.h||(this.s=1,Ut(16),p=!1),this.o=this.o&&p,!p)_o(this.i,this.l,H,"[Invalid Chunked Response]"),ss(this),bu(this);else if(0<H.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),pm(Rt),Rt.M=!0,Ut(11))}}else _o(this.i,this.l,H,null),um(this,H);Pt==4&&ss(this),this.o&&!this.J&&(Pt==4?Ob(this.j,this):(this.o=!1,Kl(this)))}else Kk(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),ss(this),bu(this)}}}catch{}finally{}};function ub(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Nk(c,h){var p=c.C,y=h.indexOf(`
`,p);return y==-1?sm:(p=Number(h.substring(p,y)),isNaN(p)?ob:(y+=1,y+p>h.length?sm:(h=h.slice(y,y+p),c.C=y+p,h)))}li.prototype.cancel=function(){this.J=!0,ss(this)};function Kl(c){c.S=Date.now()+c.I,cb(c,c.I)}function cb(c,h){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Du(g(c.ba,c),h)}function am(c){c.B&&(a.clearTimeout(c.B),c.B=null)}li.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Mk(this.i,this.A),this.L!=2&&(Iu(),Ut(17)),ss(this),this.s=2,bu(this)):cb(this,this.S-c)};function bu(c){c.j.G==0||c.J||Ob(c.j,c)}function ss(c){am(c);var h=c.M;h&&typeof h.ma=="function"&&h.ma(),c.M=null,ZC(c.U),c.g&&(h=c.g,c.g=null,h.abort(),h.ma())}function um(c,h){try{var p=c.j;if(p.G!=0&&(p.g==c||cm(p.h,c))){if(!c.K&&cm(p.h,c)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var S=y;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<c.F)nd(p),ed(p);else break e;fm(p),Ut(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Du(g(p.Za,p),6e3));if(1>=hb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else as(p,11)}else if((c.K||p.g==c)&&nd(p),!B(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let Ae=S[h];if(p.T=Ae[0],Ae=Ae[1],p.G==2)if(Ae[0]=="c"){p.K=Ae[1],p.ia=Ae[2];let Rt=Ae[3];Rt!=null&&(p.la=Rt,p.j.info("VER="+p.la));let Pt=Ae[4];Pt!=null&&(p.Aa=Pt,p.j.info("SVER="+p.Aa));let Io=Ae[5];Io!=null&&typeof Io=="number"&&0<Io&&(y=1.5*Io,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let kn=c.g;if(kn){let id=kn.g?kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var x=y.h;x.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(lm(x,x.h),x.h=null))}if(y.D){let gm=kn.g?kn.g.getResponseHeader("X-HTTP-Session-Id"):null;gm&&(y.ya=gm,Ue(y.I,y.D,gm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-c.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var H=c;if(y.qa=Lb(y,y.J?y.ia:null,y.W),H.K){fb(y.h,H);var Oe=H,Tt=y.L;Tt&&(Oe.I=Tt),Oe.B&&(am(Oe),Kl(Oe)),y.g=H}else Pb(y);0<p.i.length&&td(p)}else Ae[0]!="stop"&&Ae[0]!="close"||as(p,7);else p.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?as(p,7):hm(p):Ae[0]!="noop"&&p.l&&p.l.ta(Ae),p.v=0)}}Iu(4)}catch{}}var Rk=class{constructor(c,h){this.g=c,this.map=h}};function lb(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function db(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function hb(c){return c.h?1:c.g?c.g.size:0}function cm(c,h){return c.h?c.h==h:c.g?c.g.has(h):!1}function lm(c,h){c.g?c.g.add(h):c.h=h}function fb(c,h){c.h&&c.h==h?c.h=null:c.g&&c.g.has(h)&&c.g.delete(h)}lb.prototype.cancel=function(){if(this.i=pb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function pb(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let h=c.i;for(let p of c.g.values())h=h.concat(p.D);return h}return D(c.i)}function Pk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var h=[],p=c.length,y=0;y<p;y++)h.push(c[y]);return h}h=[],p=0;for(y in c)h[p++]=c[y];return h}function kk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var h=[];c=c.length;for(var p=0;p<c;p++)h.push(p);return h}h=[],p=0;for(let y in c)h[p++]=y;return h}}}function gb(c,h){if(c.forEach&&typeof c.forEach=="function")c.forEach(h,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,h,void 0);else for(var p=kk(c),y=Pk(c),S=y.length,x=0;x<S;x++)h.call(void 0,y[x],p&&p[x],c)}var mb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ok(c,h){if(c){c=c.split("&");for(var p=0;p<c.length;p++){var y=c[p].indexOf("="),S=null;if(0<=y){var x=c[p].substring(0,y);S=c[p].substring(y+1)}else x=c[p];h(x,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function os(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof os){this.h=c.h,Ql(this,c.j),this.o=c.o,this.g=c.g,Yl(this,c.s),this.l=c.l;var h=c.i,p=new Au;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),yb(this,p),this.m=c.m}else c&&(h=String(c).match(mb))?(this.h=!1,Ql(this,h[1]||"",!0),this.o=Tu(h[2]||""),this.g=Tu(h[3]||"",!0),Yl(this,h[4]),this.l=Tu(h[5]||"",!0),yb(this,h[6]||"",!0),this.m=Tu(h[7]||"")):(this.h=!1,this.i=new Au(null,this.h))}os.prototype.toString=function(){var c=[],h=this.j;h&&c.push(Su(h,vb,!0),":");var p=this.g;return(p||h=="file")&&(c.push("//"),(h=this.o)&&c.push(Su(h,vb,!0),"@"),c.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&c.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&c.push("/"),c.push(Su(p,p.charAt(0)=="/"?Lk:Vk,!0))),(p=this.i.toString())&&c.push("?",p),(p=this.m)&&c.push("#",Su(p,Bk)),c.join("")};function Ar(c){return new os(c)}function Ql(c,h,p){c.j=p?Tu(h,!0):h,c.j&&(c.j=c.j.replace(/:$/,""))}function Yl(c,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);c.s=h}else c.s=null}function yb(c,h,p){h instanceof Au?(c.i=h,Uk(c.i,c.h)):(p||(h=Su(h,jk)),c.i=new Au(h,c.h))}function Ue(c,h,p){c.i.set(h,p)}function Zl(c){return Ue(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Tu(c,h){return c?h?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Su(c,h,p){return typeof c=="string"?(c=encodeURI(c).replace(h,Fk),p&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Fk(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var vb=/[#\/\?@]/g,Vk=/[#\?:]/g,Lk=/[#\?]/g,jk=/[#\?@]/g,Bk=/#/g;function Au(c,h){this.h=this.g=null,this.i=c||null,this.j=!!h}function di(c){c.g||(c.g=new Map,c.h=0,c.i&&Ok(c.i,function(h,p){c.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Au.prototype,n.add=function(c,h){di(this),this.i=null,c=wo(this,c);var p=this.g.get(c);return p||this.g.set(c,p=[]),p.push(h),this.h+=1,this};function _b(c,h){di(c),h=wo(c,h),c.g.has(h)&&(c.i=null,c.h-=c.g.get(h).length,c.g.delete(h))}function wb(c,h){return di(c),h=wo(c,h),c.g.has(h)}n.forEach=function(c,h){di(this),this.g.forEach(function(p,y){p.forEach(function(S){c.call(h,S,y,this)},this)},this)},n.na=function(){di(this);let c=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let S=c[y];for(let x=0;x<S.length;x++)p.push(h[y])}return p},n.V=function(c){di(this);let h=[];if(typeof c=="string")wb(this,c)&&(h=h.concat(this.g.get(wo(this,c))));else{c=Array.from(this.g.values());for(let p=0;p<c.length;p++)h=h.concat(c[p])}return h},n.set=function(c,h){return di(this),this.i=null,c=wo(this,c),wb(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[h]),this.h+=1,this},n.get=function(c,h){return c?(c=this.V(c),0<c.length?String(c[0]):h):h};function Eb(c,h,p){_b(c,h),0<p.length&&(c.i=null,c.g.set(wo(c,h),D(p)),c.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let x=encodeURIComponent(String(y)),H=this.V(y);for(y=0;y<H.length;y++){var S=x;H[y]!==""&&(S+="="+encodeURIComponent(String(H[y]))),c.push(S)}}return this.i=c.join("&")};function wo(c,h){return h=String(h),c.j&&(h=h.toLowerCase()),h}function Uk(c,h){h&&!c.j&&(di(c),c.i=null,c.g.forEach(function(p,y){var S=y.toLowerCase();y!=S&&(_b(this,y),Eb(this,S,p))},c)),c.j=h}function $k(c,h){let p=new Cu;if(a.Image){let y=new Image;y.onload=m(hi,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(hi,p,"TestLoadImage: error",!1,h,y),y.onabort=m(hi,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(hi,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=c}else h(!1)}function Hk(c,h){let p=new Cu,y=new AbortController,S=setTimeout(()=>{y.abort(),hi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(c,{signal:y.signal}).then(x=>{clearTimeout(S),x.ok?hi(p,"TestPingServer: ok",!0,h):hi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),hi(p,"TestPingServer: error",!1,h)})}function hi(c,h,p,y,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),y(p)}catch{}}function qk(){this.g=new Tk}function zk(c,h,p){let y=p||"";try{gb(c,function(S,x){let H=S;l(S)&&(H=em(S)),h.push(y+x+"="+encodeURIComponent(H))})}catch(S){throw h.push(y+"type="+encodeURIComponent("_badmap")),S}}function Mu(c){this.l=c.Ub||null,this.j=c.eb||!1}_(Mu,tm),Mu.prototype.g=function(){return new Jl(this.l,this.j)},Mu.prototype.i=function(c){return function(){return c}}({});function Jl(c,h){Nt.call(this),this.D=c,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Jl,Nt),n=Jl.prototype,n.open=function(c,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=h,this.readyState=1,Nu(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(h.body=c),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xu(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Nu(this)),this.g&&(this.readyState=3,Nu(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ib(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ib(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var h=c.value?c.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!c.done}))&&(this.response=this.responseText+=h)}c.done?xu(this):Nu(this),this.readyState==3&&Ib(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,xu(this))},n.Qa=function(c){this.g&&(this.response=c,xu(this))},n.ga=function(){this.g&&xu(this)};function xu(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Nu(c)}n.setRequestHeader=function(c,h){this.u.append(c,h)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,c.push(p[0]+": "+p[1]),p=h.next();return c.join(`\r
`)};function Nu(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Db(c){let h="";return Q(c,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function dm(c,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Db(p),typeof c=="string"?p!=null&&encodeURIComponent(String(p)):Ue(c,h,p))}function Je(c){Nt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Je,Nt);var Gk=/^https?$/i,Wk=["POST","PUT"];n=Je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);h=h?h.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():im.g(),this.v=this.o?JC(this.o):JC(im),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(c),!0),this.B=!1}catch(x){Cb(this,x);return}if(c=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var S in y)p.set(S,y[S]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let x of y.keys())p.set(x,y.get(x));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(x=>x.toLowerCase()=="content-type"),S=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wk,h,void 0))||y||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,H]of p)this.g.setRequestHeader(x,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sb(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){Cb(this,x)}};function Cb(c,h){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=h,c.m=5,bb(c),Xl(c)}function bb(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Bt(this,"complete"),Bt(this,"abort"),Xl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xl(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Tb(this):this.bb())},n.bb=function(){Tb(this)};function Tb(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Mr(c)!=4||c.Z()!=2)){if(c.u&&Mr(c)==4)KC(c.Ea,0,c);else if(Bt(c,"readystatechange"),Mr(c)==4){c.h=!1;try{let H=c.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=H===0){var S=String(c.D).match(mb)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),y=!Gk.test(S?S.toLowerCase():"")}p=y}if(p)Bt(c,"complete"),Bt(c,"success");else{c.m=6;try{var x=2<Mr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",bb(c)}}finally{Xl(c)}}}}function Xl(c,h){if(c.g){Sb(c);let p=c.g,y=c.v[0]?()=>{}:null;c.g=null,c.v=null,h||Bt(c,"ready");try{p.onreadystatechange=y}catch{}}}function Sb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Mr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Mr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var h=this.g.responseText;return c&&h.indexOf(c)==0&&(h=h.substring(c.length)),bk(h)}};function Ab(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Kk(c){let h={};c=(c.g&&2<=Mr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<c.length;y++){if(B(c[y]))continue;var p=T(c[y]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let x=h[S]||[];h[S]=x,x.push(p)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ru(c,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[c]||h}function Mb(c){this.Aa=0,this.i=[],this.j=new Cu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ru("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ru("baseRetryDelayMs",5e3,c),this.cb=Ru("retryDelaySeedMs",1e4,c),this.Wa=Ru("forwardChannelMaxRetries",2,c),this.wa=Ru("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new lb(c&&c.concurrentRequestLimit),this.Da=new qk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Mb.prototype,n.la=8,n.G=1,n.connect=function(c,h,p,y){Ut(0),this.W=c,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=Lb(this,null,this.W),td(this)};function hm(c){if(xb(c),c.G==3){var h=c.U++,p=Ar(c.I);if(Ue(p,"SID",c.K),Ue(p,"RID",h),Ue(p,"TYPE","terminate"),Pu(c,p),h=new li(c,c.j,h),h.L=2,h.v=Zl(Ar(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=jb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Kl(h)}Vb(c)}function ed(c){c.g&&(pm(c),c.g.cancel(),c.g=null)}function xb(c){ed(c),c.u&&(a.clearTimeout(c.u),c.u=null),nd(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function td(c){if(!db(c.h)&&!c.s){c.s=!0;var h=c.Ga;J||rt(),te||(J(),te=!0),ve.add(h,c),c.B=0}}function Qk(c,h){return hb(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=h.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Du(g(c.Ga,c,h),Fb(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let S=new li(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),C(x,this.S)):x=this.S),this.m!==null||this.O||(S.H=x,x=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Rb(this,S,h),p=Ar(this.I),Ue(p,"RID",c),Ue(p,"CVER",22),this.D&&Ue(p,"X-HTTP-Session-Id",this.D),Pu(this,p),x&&(this.O?h="headers="+encodeURIComponent(String(Db(x)))+"&"+h:this.m&&dm(p,this.m,x)),lm(this.h,S),this.Ua&&Ue(p,"TYPE","init"),this.P?(Ue(p,"$req",h),Ue(p,"SID","null"),S.T=!0,om(S,p,null)):om(S,p,h),this.G=2}}else this.G==3&&(c?Nb(this,c):this.i.length==0||db(this.h)||Nb(this))};function Nb(c,h){var p;h?p=h.l:p=c.U++;let y=Ar(c.I);Ue(y,"SID",c.K),Ue(y,"RID",p),Ue(y,"AID",c.T),Pu(c,y),c.m&&c.o&&dm(y,c.m,c.o),p=new li(c,c.j,p,c.B+1),c.m===null&&(p.H=c.o),h&&(c.i=h.D.concat(c.i)),h=Rb(c,p,1e3),p.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),lm(c.h,p),om(p,y,h)}function Pu(c,h){c.H&&Q(c.H,function(p,y){Ue(h,y,p)}),c.l&&gb({},function(p,y){Ue(h,y,p)})}function Rb(c,h,p){p=Math.min(c.i.length,p);var y=c.l?g(c.l.Na,c.l,c):null;e:{var S=c.i;let x=-1;for(;;){let H=["count="+p];x==-1?0<p?(x=S[0].g,H.push("ofs="+x)):x=0:H.push("ofs="+x);let Oe=!0;for(let Tt=0;Tt<p;Tt++){let Ae=S[Tt].g,Rt=S[Tt].map;if(Ae-=x,0>Ae)x=Math.max(0,S[Tt].g-100),Oe=!1;else try{zk(Rt,H,"req"+Ae+"_")}catch{y&&y(Rt)}}if(Oe){y=H.join("&");break e}}}return c=c.i.splice(0,p),h.D=c,y}function Pb(c){if(!c.g&&!c.u){c.Y=1;var h=c.Fa;J||rt(),te||(J(),te=!0),ve.add(h,c),c.v=0}}function fm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Du(g(c.Fa,c),Fb(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,kb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Du(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),ed(this),kb(this))};function pm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function kb(c){c.g=new li(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var h=Ar(c.qa);Ue(h,"RID","rpc"),Ue(h,"SID",c.K),Ue(h,"AID",c.T),Ue(h,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ue(h,"TO",c.ja),Ue(h,"TYPE","xmlhttp"),Pu(c,h),c.m&&c.o&&dm(h,c.m,c.o),c.L&&(c.g.I=c.L);var p=c.g;c=c.ia,p.L=1,p.v=Zl(Ar(h)),p.m=null,p.P=!0,ab(p,c)}n.Za=function(){this.C!=null&&(this.C=null,ed(this),fm(this),Ut(19))};function nd(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Ob(c,h){var p=null;if(c.g==h){nd(c),pm(c),c.g=null;var y=2}else if(cm(c.h,h))p=h.D,fb(c.h,h),y=1;else return;if(c.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=c.B;y=zl(),Bt(y,new rb(y,p)),td(c)}else Pb(c);else if(S=h.s,S==3||S==0&&0<h.X||!(y==1&&Qk(c,h)||y==2&&fm(c)))switch(p&&0<p.length&&(h=c.h,h.i=h.i.concat(p)),S){case 1:as(c,5);break;case 4:as(c,10);break;case 3:as(c,6);break;default:as(c,2)}}}function Fb(c,h){let p=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(p*=2),p*h}function as(c,h){if(c.j.info("Error code "+h),h==2){var p=g(c.fb,c),y=c.Xa;let S=!y;y=new os(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ql(y,"https"),Zl(y),S?$k(y.toString(),p):Hk(y.toString(),p)}else Ut(2);c.G=0,c.l&&c.l.sa(h),Vb(c),xb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Vb(c){if(c.G=0,c.ka=[],c.l){let h=pb(c.h);(h.length!=0||c.i.length!=0)&&(b(c.ka,h),b(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Lb(c,h,p){var y=p instanceof os?Ar(p):new os(p);if(y.g!="")h&&(y.g=h+"."+y.g),Yl(y,y.s);else{var S=a.location;y=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var x=new os(null);y&&Ql(x,y),h&&(x.g=h),S&&Yl(x,S),p&&(x.l=p),y=x}return p=c.D,h=c.ya,p&&h&&Ue(y,p,h),Ue(y,"VER",c.la),Pu(c,y),y}function jb(c,h,p){if(h&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=c.Ca&&!c.pa?new Je(new Mu({eb:p})):new Je(c.pa),h.Ha(c.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bb(){}n=Bb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rd(){}rd.prototype.g=function(c,h){return new un(c,h)};function un(c,h){Nt.call(this),this.g=new Mb(h),this.l=c,this.h=h&&h.messageUrlParams||null,c=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(c?c["X-WebChannel-Content-Type"]=h.messageContentType:c={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(c?c["X-WebChannel-Client-Profile"]=h.va:c={"X-WebChannel-Client-Profile":h.va}),this.g.S=c,(c=h&&h.Sb)&&!B(c)&&(this.g.m=c),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!B(h)&&(this.g.D=h,c=this.h,c!==null&&h in c&&(c=this.h,h in c&&delete c[h])),this.j=new Eo(this)}_(un,Nt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){hm(this.g)},un.prototype.o=function(c){var h=this.g;if(typeof c=="string"){var p={};p.__data__=c,c=p}else this.u&&(p={},p.__data__=em(c),c=p);h.i.push(new Rk(h.Ya++,c)),h.G==3&&td(h)},un.prototype.N=function(){this.g.l=null,delete this.j,hm(this.g),delete this.g,un.aa.N.call(this)};function Ub(c){nm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var h=c.__sm__;if(h){e:{for(let p in h){c=p;break e}c=void 0}(this.i=c)&&(c=this.i,h=h!==null&&c in h?h[c]:void 0),this.data=h}else this.data=c}_(Ub,nm);function $b(){rm.call(this),this.status=1}_($b,rm);function Eo(c){this.g=c}_(Eo,Bb),Eo.prototype.ua=function(){Bt(this.g,"a")},Eo.prototype.ta=function(c){Bt(this.g,new Ub(c))},Eo.prototype.sa=function(c){Bt(this.g,new $b)},Eo.prototype.ra=function(){Bt(this.g,"b")},rd.prototype.createWebChannel=rd.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Jw=Jr.createWebChannelTransport=function(){return new rd},Zw=Jr.getStatEventTarget=function(){return zl()},Yw=Jr.Event=is,ip=Jr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gl.NO_ERROR=0,Gl.TIMEOUT=8,Gl.HTTP_ERROR=6,Yc=Jr.ErrorCode=Gl,ib.COMPLETE="complete",Qw=Jr.EventType=ib,XC.EventType=Eu,Eu.OPEN="a",Eu.CLOSE="b",Eu.ERROR="c",Eu.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,ba=Jr.WebChannel=XC,Kw=Jr.FetchXmlHttpFactory=Mu,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,Ww=Jr.XhrIo=Je}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var wN="@firebase/firestore";var pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");var nu="10.12.3";var Hi=new ad("@firebase/firestore");function xa(){return Hi.logLevel}function tD(n){Hi.setLogLevel(n)}function F(n,...e){if(Hi.logLevel<=Jn.DEBUG){let t=e.map(nD);Hi.debug(`Firestore (${nu}): ${n}`,...t)}}function ot(n,...e){if(Hi.logLevel<=Jn.ERROR){let t=e.map(nD);Hi.error(`Firestore (${nu}): ${n}`,...t)}}function Nn(n,...e){if(Hi.logLevel<=Jn.WARN){let t=e.map(nD);Hi.warn(`Firestore (${nu}): ${n}`,...t)}}function nD(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: `+n;throw ot(e),new Error(e)}function X(n,e){n||K()}function wR(n,e){n||K()}function G(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends Yb{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var gp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},rE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pt.UNAUTHENTICATED))}shutdown(){}},iE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sE=class{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>R(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(X(typeof r.accessToken=="string"),new gp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return X(e===null||typeof e=="string"),new pt(e)}},oE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},aE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new oE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},cE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,F("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(X(typeof t.token=="string"),this.R=t.token,new uE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Sz(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Sz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ue(n,e){return n<e?-1:n>e?1:0}function ja(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function ER(n){return n+"\0"}var Qe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Qe(0,0))}static max(){return new n(new Qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},be=class n extends yp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Az=/^[_a-zA-Z][_a-zA-Z0-9]*$/,at=class n extends yp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Az.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(be.fromString(e))}static fromName(e){return new n(be.fromString(e).popFirst(5))}static empty(){return new n(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return be.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new be(e.slice()))}};var Ba=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function lE(n){return n.fields.find(e=>e.kind===2)}function zs(n){return n.fields.filter(e=>e.kind!==2)}Ba.UNKNOWN_ID=-1;var Fa=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var ul=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Rn.min())}};function IR(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Qe(t+1,0):new Qe(t,r));return new Rn(i,z.empty(),e)}function DR(n){return new Rn(n.readTime,n.key,-1)}var Rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),z.empty(),-1)}static max(){return new n(ee.max(),z.empty(),-1)}};function rD(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var CR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Xi(n){return R(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==CR)throw n;F("LocalStore","Unexpectedly lost primary lease")})}var M=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var _p=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new gt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zs(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=iD(r.target.error);this.V.reject(new Zs(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Zs(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(F("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new hE(t)}},qi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ku())===12.2&&ot("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return F("SimpleDb","Removing database:",e),Gs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!od())return!1;if(n.C())return!0;let e=ku(),t=n.S(e),r=0<t&&t<10,i=bR(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return R(this,null,function*(){return this.db||(F("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Zs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new O(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new O(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Zs(e,o))},i.onupgradeneeded=s=>{F("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{F("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return R(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=_p.open(this.db,e,s?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),M.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&o<3;if(F("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function bR(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var dE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Gs(this.B.delete())}},Zs=class extends O{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function es(n){return n.name==="IndexedDbTransactionError"}var hE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(F("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(F("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gs(r)}add(e){return F("SimpleDb","ADD",this.store.name,e,e),Gs(this.store.add(e))}get(e){return Gs(this.store.get(e)).next(t=>(t===void 0&&(t=null),F("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return F("SimpleDb","DELETE",this.store.name,e),Gs(this.store.delete(e))}count(){return F("SimpleDb","COUNT",this.store.name),Gs(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new M((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){F("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new M((r,i)=>{t.onerror=s=>{let o=iD(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let u=new dE(a),l=t(a.primaryKey,a.value,u);if(l instanceof M){let d=l.catch(f=>(u.done(),M.reject(f)));r.push(d)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>M.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Gs(n){return new M((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=iD(r.target.error);t(i)}})}var EN=!1;function iD(n){let e=qi.S(ku());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return EN||(EN=!0,setTimeout(()=>{throw r},0)),r}}return n}var fE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){F("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>R(this,null,function*(){this.task=null;try{F("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){es(t)?F("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Xi(t)}yield this.X(6e4)}))}},pE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return R(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return F("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(F("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=DR(s);rD(o,r)>0&&(r=o)}),new Rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var mn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function xl(n){return n==null}function cl(n){return n===0&&1/n==-1/0}function TR(n){return typeof n=="number"&&Number.isInteger(n)&&!cl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=IN(e)),e=Mz(n.get(t),e);return IN(e)}function Mz(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function IN(n){return n+""}function gr(n){let e=n.length;if(X(e>=2),e===2)return X(n.charAt(0)===""&&n.charAt(1)===""),be.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&K(),n.charAt(o+1)){case"":let a=n.substring(s,o),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:K()}s=o+2}return new be(r)}var DN=["userId","batchId"];function cp(n,e){return[n,Yt(e)]}function SR(n,e,t){return[n,Yt(e),t]}var xz={},Nz=["prefixPath","collectionGroup","readTime","documentId"],Rz=["prefixPath","collectionGroup","documentId"],Pz=["collectionGroup","readTime","prefixPath","documentId"],kz=["canonicalId","targetId"],Oz=["targetId","path"],Fz=["path","targetId"],Vz=["collectionId","parent"],Lz=["indexId","uid"],jz=["uid","sequenceNumber"],Bz=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Uz=["indexId","uid","orderedDocumentKey"],$z=["userId","collectionPath","documentId"],Hz=["userId","collectionPath","largestBatchId"],qz=["userId","collectionGroup","largestBatchId"],AR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zz=[...AR,"documentOverlays"],MR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xR=MR,NR=[...xR,"indexConfiguration","indexState","indexEntries"],Gz=NR;var ll=class extends vp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function bt(n,e){let t=G(n);return qi.F(t._e,e)}function CN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function co(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qe=class n{constructor(e,t){this.comparator=e,this.root=t||yr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oa(this.root,e,this.comparator,!0)}},Oa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1;yr.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,s){return this}insert(e,t,r){return new yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class n{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wp(this.data.getIterator())}getIteratorFrom(e){return new wp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},wp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ta(n){return n.hasNext()?n.getNext():void 0}var yn=class n{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ve(at.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ja(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ep=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function PR(){return typeof atob<"u"}var Ct=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ep("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ct.EMPTY_BYTE_STRING=new Ct("");var Wz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(n){if(X(!!n),typeof n=="string"){let e=0,t=Wz.exec(n);if(X(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tt(n.seconds),nanos:tt(n.nanos)}}function tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zi(n){return typeof n=="string"?Ct.fromBase64String(n):Ct.fromUint8Array(n)}function dg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function sD(n){let e=n.mapValue.fields.__previous_value__;return dg(e)?sD(e):e}function dl(n){let e=ti(n.mapValue.fields.__local_write_time__.timestampValue);return new Qe(e.seconds,e.nanos)}var gE=class{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Gi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ui={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lp={nullValue:"NULL_VALUE"};function Js(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dg(n)?4:kR(n)?9007199254740991:10:K()}function wr(n,e){if(n===e)return!0;let t=Js(n);if(t!==Js(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dl(n).isEqual(dl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ti(i.timestampValue),a=ti(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return zi(i.bytesValue).isEqual(zi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return tt(i.geoPointValue.latitude)===tt(s.geoPointValue.latitude)&&tt(i.geoPointValue.longitude)===tt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return tt(i.integerValue)===tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=tt(i.doubleValue),a=tt(s.doubleValue);return o===a?cl(o)===cl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ja(n.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CN(o)!==CN(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!wr(o[u],a[u])))return!1;return!0}(n,e);default:return K()}}function hl(n,e){return(n.values||[]).find(t=>wr(t,e))!==void 0}function Wi(n,e){if(n===e)return 0;let t=Js(n),r=Js(e);if(t!==r)return ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=tt(s.integerValue||s.doubleValue),u=tt(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return bN(n.timestampValue,e.timestampValue);case 4:return bN(dl(n),dl(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(s,o){let a=zi(s),u=zi(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let d=ue(a[l],u[l]);if(d!==0)return d}return ue(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ue(tt(s.latitude),tt(o.latitude));return a!==0?a:ue(tt(s.longitude),tt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let d=Wi(a[l],u[l]);if(d)return d}return ue(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ui.mapValue&&o===Ui.mapValue)return 0;if(s===Ui.mapValue)return 1;if(o===Ui.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},d=Object.keys(l);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){let g=ue(u[f],d[f]);if(g!==0)return g;let m=Wi(a[u[f]],l[d[f]]);if(m!==0)return m}return ue(u.length,d.length)}(n.mapValue,e.mapValue);default:throw K()}}function bN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=ti(n),r=ti(e),i=ue(t.seconds,r.seconds);return i!==0?i:ue(t.nanos,r.nanos)}function Ua(n){return mE(n)}function mE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ti(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return zi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=mE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${mE(t.fields[o])}`;return i+"}"}(n.mapValue):K()}function Xs(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yE(n){return!!n&&"integerValue"in n}function fl(n){return!!n&&"arrayValue"in n}function TN(n){return!!n&&"nullValue"in n}function SN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dp(n){return!!n&&"mapValue"in n}function rl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return co(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Kz(n){return"nullValue"in n?lp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xs(Gi.empty(),z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:K()}function Qz(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xs(Gi.empty(),z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ui:K()}function AN(n,e){let t=Wi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function MN(n,e){let t=Wi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var jt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rl(t)}setAll(e){let t=at.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=rl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());dp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];dp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){co(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(rl(this.value))}};function OR(n){let e=[];return co(n.fields,(t,r)=>{let i=new at([t]);if(dp(r)){let s=OR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new yn(e)}var mt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),jt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),jt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Er=class{constructor(e,t){this.position=e,this.inclusive=t}};function xN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),t.key):r=Wi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function NN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!wr(n.position[t],e.position[t]))return!1;return!0}var eo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Yz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ip=class{},Ie=class n extends Ip{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new wE(e,t,r):t==="array-contains"?new DE(e,r):t==="in"?new Dp(e,r):t==="not-in"?new CE(e,r):t==="array-contains-any"?new bE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new EE(e,r):new IE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wi(t,this.value)):t!==null&&Js(this.value)===Js(t)&&this.matchesComparison(Wi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ke=class n extends Ip{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return $a(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $a(n){return n.op==="and"}function vE(n){return n.op==="or"}function oD(n){return FR(n)&&$a(n)}function FR(n){for(let e of n.filters)if(e instanceof ke)return!1;return!0}function _E(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+Ua(n.value);if(oD(n))return n.filters.map(e=>_E(e)).join(",");{let e=n.filters.map(t=>_E(t)).join(",");return`${n.op}(${e})`}}function VR(n,e){return n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&wr(r.value,i.value)}(n,e):n instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&VR(o,i.filters[a]),!0):!1}(n,e):void K()}function LR(n,e){let t=n.filters.concat(e);return ke.create(t,n.op)}function jR(n){return n instanceof Ie?function(t){return`${t.field.canonicalString()} ${t.op} ${Ua(t.value)}`}(n):n instanceof ke?function(t){return t.op.toString()+" {"+t.getFilters().map(jR).join(" ,")+"}"}(n):"Filter"}var wE=class extends Ie{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},EE=class extends Ie{constructor(e,t){super(e,"in",t),this.keys=BR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},IE=class extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=BR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BR(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var DE=class extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return fl(t)&&hl(t.arrayValue,this.value)}},Dp=class extends Ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&hl(this.value.arrayValue,t)}},CE=class extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!hl(this.value.arrayValue,t)}},bE=class extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!fl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hl(this.value.arrayValue,r))}};var TE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function SE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new TE(n,e,t,r,i,s,o)}function to(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_E(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),xl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ua(r)).join(",")),e.ue=t}return e.ue}function Nl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Yz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!VR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!NN(n.startAt,e.startAt)&&NN(n.endAt,e.endAt)}function Cp(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function bp(n,e){return n.filters.filter(t=>t instanceof Ie&&t.field.isEqual(e))}function RN(n,e,t){let r=lp,i=!0;for(let s of bp(n,e)){let o=lp,a=!0;switch(s.op){case"<":case"<=":o=Kz(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=lp}AN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];AN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function PN(n,e,t){let r=Ui,i=!0;for(let s of bp(n,e)){let o=Ui,a=!0;switch(s.op){case">=":case">":o=Qz(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ui}MN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];MN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Kn=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UR(n,e,t,r,i,s,o,a){return new Kn(n,e,t,r,i,s,o,a)}function ru(n){return new Kn(n)}function kN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aD(n){return n.collectionGroup!==null}function Va(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ve(at.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new eo(s,r))}),t.has(at.keyField().canonicalString())||e.ce.push(new eo(at.keyField(),r))}return e.ce}function Zt(n){let e=G(n);return e.le||(e.le=Zz(e,Va(n))),e.le}function Zz(n,e){if(n.limitType==="F")return SE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new eo(i.field,s)});let t=n.endAt?new Er(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Er(n.startAt.position,n.startAt.inclusive):null;return SE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function AE(n,e){let t=n.filters.concat([e]);return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Tp(n,e,t){return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rl(n,e){return Nl(Zt(n),Zt(e))&&n.limitType===e.limitType}function $R(n){return`${to(Zt(n))}|lt:${n.limitType}`}function Na(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jR(i)).join(", ")}]`),xl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ua(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ua(i)).join(",")),`Target(${r})`}(Zt(n))}; limitType=${n.limitType})`}function Pl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Va(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=xN(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Va(r),i)||r.endAt&&!function(o,a,u){let l=xN(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Va(r),i))}(n,e)}function HR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qR(n){return(e,t)=>{let r=!1;for(let i of Va(n)){let s=Jz(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Jz(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Wi(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var Ir=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return RR(this.inner)}size(){return this.innerSize}};var Xz=new qe(z.comparator);function an(){return Xz}var zR=new qe(z.comparator);function tl(...n){let e=zR;for(let t of n)e=e.insert(t.key,t);return e}function GR(n){let e=zR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function mr(){return il()}function WR(){return il()}function il(){return new Ir(n=>n.toString(),(n,e)=>n.isEqual(e))}var e4=new qe(z.comparator),t4=new Ve(z.comparator);function de(...n){let e=t4;for(let t of n)e=e.add(t);return e}var n4=new Ve(ue);function uD(){return n4}function KR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(e)?"-0":e}}function QR(n){return{integerValue:""+n}}function YR(n,e){return TR(e)?QR(e):KR(n,e)}var Ha=class{constructor(){this._=void 0}};function r4(n,e,t){return n instanceof Ki?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dg(s)&&(s=sD(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ni?JR(n,e):n instanceof ri?XR(n,e):function(i,s){let o=ZR(i,s),a=ON(o)+ON(i.Pe);return yE(o)&&yE(i.Pe)?QR(a):KR(i.serializer,a)}(n,e)}function i4(n,e,t){return n instanceof ni?JR(n,e):n instanceof ri?XR(n,e):t}function ZR(n,e){return n instanceof Qi?function(r){return yE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ki=class extends Ha{},ni=class extends Ha{constructor(e){super(),this.elements=e}};function JR(n,e){let t=eP(e);for(let r of n.elements)t.some(i=>wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ri=class extends Ha{constructor(e){super(),this.elements=e}};function XR(n,e){let t=eP(e);for(let r of n.elements)t=t.filter(i=>!wr(i,r));return{arrayValue:{values:t}}}var Qi=class extends Ha{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ON(n){return tt(n.integerValue||n.doubleValue)}function eP(n){return fl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var no=class{constructor(e,t){this.field=e,this.transform=t}};function s4(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ni&&i instanceof ni||r instanceof ri&&i instanceof ri?ja(r.elements,i.elements,wr):r instanceof Qi&&i instanceof Qi?wr(r.Pe,i.Pe):r instanceof Ki&&i instanceof Ki}(n.transform,e.transform)}var ME=class{constructor(e,t){this.version=e,this.transformResults=t}},nt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var qa=class{};function tP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zi(n.key,nt.none()):new Yi(n.key,n.data,nt.none());{let t=n.data,r=jt.empty(),i=new Ve(at.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qn(n.key,r,new yn(i.toArray()),nt.none())}}function o4(n,e,t){n instanceof Yi?function(i,s,o){let a=i.value.clone(),u=VN(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Qn?function(i,s,o){if(!hp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=VN(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(nP(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function sl(n,e,t,r){return n instanceof Yi?function(s,o,a,u){if(!hp(s.precondition,o))return a;let l=s.value.clone(),d=LN(s.fieldTransforms,u,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qn?function(s,o,a,u){if(!hp(s.precondition,o))return a;let l=LN(s.fieldTransforms,u,o),d=o.data;return d.setAll(nP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return hp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function a4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=ZR(r.transform,i||null);s!=null&&(t===null&&(t=jt.empty()),t.set(r.field,s))}return t||null}function FN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ja(r,i,(s,o)=>s4(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Yi=class extends qa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Qn=class extends qa{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function nP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function VN(n,e,t){let r=new Map;X(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i4(o,a,t[i]))}return r}function LN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,r4(s,o,e))}return r}var Zi=class extends qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pl=class extends qa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&o4(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=tP(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),de())}isEqual(e){return this.batchId===e.batchId&&ja(this.mutations,e.mutations,(t,r)=>FN(t,r))&&ja(this.baseMutations,e.baseMutations,(t,r)=>FN(t,r))}},xE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){X(e.mutations.length===r.length);let i=function(){return e4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var ml=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var NE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var ht,Ce;function rP(n){switch(n){default:return K();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function iP(n){if(n===void 0)return ot("GRPC error has no .code"),N.UNKNOWN;switch(n){case ht.OK:return N.OK;case ht.CANCELLED:return N.CANCELLED;case ht.UNKNOWN:return N.UNKNOWN;case ht.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ht.INTERNAL:return N.INTERNAL;case ht.UNAVAILABLE:return N.UNAVAILABLE;case ht.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ht.NOT_FOUND:return N.NOT_FOUND;case ht.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ht.ABORTED:return N.ABORTED;case ht.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ht.DATA_LOSS:return N.DATA_LOSS;default:return K()}}(Ce=ht||(ht={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var jN=null;function sP(){return new TextEncoder}var u4=new Fi([4294967295,4294967295],0);function BN(n){let e=sP().encode(n),t=new Gw;return t.update(e),new Uint8Array(t.digest())}function UN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Fi([t,r],0),new Fi([i,s],0)]}var RE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ys(`Invalid padding: ${t}`);if(r<0)throw new Ys(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ys(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ys(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Fi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Fi.fromNumber(r)));return i.compare(u4)===1&&(i=new Fi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=BN(e),[r,i]=UN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=BN(e),[r,i]=UN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ys=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new qe(ue),an(),de())}},vl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,de(),de(),de())}};var La=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Sp=class{constructor(e,t){this.targetId=e,this.me=t}},Ap=class{constructor(e,t,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Mp=class{constructor(){this.fe=0,this.ge=HN(),this.pe=Ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=de(),t=de(),r=de();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new vl(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=HN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,X(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},PE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=an(),this.qe=$N(),this.Qe=new qe(ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Cp(s))if(r===0){let o=new z(s.path);this.Ue(t,o,mt.newNoDocument(o,ee.min()))}else X(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}jN?.et(function(d,f,g,m,_){var D,b,k,B,P,$;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Q=f.unchangedNames;return Q&&(Z.bloomFilter={applied:_===0,hashCount:(D=Q?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(B=(k=(b=Q?.bits)===null||b===void 0?void 0:b.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:($=(P=Q?.bits)===null||P===void 0?void 0:P.padding)!==null&&$!==void 0?$:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),Z}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=zi(r).toUint8Array()}catch(u){if(u instanceof Ep)return Nn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new RE(o,i,s)}catch(u){return Nn(u instanceof Ys?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Cp(a.target)){let u=new z(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,mt.newNoDocument(u,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let r=de();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new yl(e,t,this.Qe,this.ke,r);return this.ke=an(),this.qe=$N(),this.Qe=new qe(ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ve(ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function $N(){return new qe(z.comparator)}function HN(){return new qe(z.comparator)}var c4={asc:"ASCENDING",desc:"DESCENDING"},l4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},d4={and:"AND",or:"OR"},kE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function OE(n,e){return n.useProto3Json||xl(e)?e:{value:e}}function za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function h4(n,e){return za(n,e.toTimestamp())}function ut(n){return X(!!n),ee.fromTimestamp(function(t){let r=ti(t);return new Qe(r.seconds,r.nanos)}(n))}function cD(n,e){return FE(n,e).canonicalString()}function FE(n,e){let t=function(i){return new be(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aP(n){let e=be.fromString(n);return X(yP(e)),e}function _l(n,e){return cD(n.databaseId,e.path)}function vr(n,e){let t=aP(e);if(t.get(1)!==n.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(lP(t))}function uP(n,e){return cD(n.databaseId,e)}function cP(n){let e=aP(n);return e.length===4?be.emptyPath():lP(e)}function VE(n){return new be(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lP(n){return X(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function qN(n,e,t){return{name:_l(n,e),fields:t.value.mapValue.fields}}function dP(n,e,t){let r=vr(n,e.name),i=ut(e.updateTime),s=e.createTime?ut(e.createTime):ee.min(),o=new jt({mapValue:{fields:e.fields}}),a=mt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function f4(n,e){return"found"in e?function(r,i){X(!!i.found),i.found.name,i.found.updateTime;let s=vr(r,i.found.name),o=ut(i.found.updateTime),a=i.found.createTime?ut(i.found.createTime):ee.min(),u=new jt({mapValue:{fields:i.found.fields}});return mt.newFoundDocument(s,o,a,u)}(n,e):"missing"in e?function(r,i){X(!!i.missing),X(!!i.readTime);let s=vr(r,i.missing),o=ut(i.readTime);return mt.newNoDocument(s,o)}(n,e):K()}function p4(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(X(d===void 0||typeof d=="string"),Ct.fromBase64String(d||"")):(X(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ct.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?N.UNKNOWN:iP(l.code);return new O(d,l.message||"")}(o);t=new Ap(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vr(n,r.document.name),s=ut(r.document.updateTime),o=r.document.createTime?ut(r.document.createTime):ee.min(),a=new jt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new La(l,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vr(n,r.document),s=r.readTime?ut(r.readTime):ee.min(),o=mt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new La([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vr(n,r.document),s=r.removedTargetIds||[];t=new La([],s,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new NE(i,s),a=r.targetId;t=new Sp(a,o)}}return t}function wl(n,e){let t;if(e instanceof Yi)t={update:qN(n,e.key,e.value)};else if(e instanceof Zi)t={delete:_l(n,e.key)};else if(e instanceof Qn)t={update:qN(n,e.key,e.data),updateMask:w4(e.fieldMask)};else{if(!(e instanceof pl))return K();t={verify:_l(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ni)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ri)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:h4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function LE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?nt.updateTime(ut(s.updateTime)):s.exists!==void 0?nt.exists(s.exists):nt.none()}(e.currentDocument):nt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;if("setToServerValue"in a)X(a.setToServerValue==="REQUEST_TIME"),u=new Ki;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];u=new ni(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];u=new ri(d)}else"increment"in a?u=new Qi(o,a.increment):K();let l=at.fromServerFormat(a.fieldPath);return new no(l,u)}(n,i)):[];if(e.update){e.update.name;let i=vr(n,e.update.name),s=new jt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(u){let l=u.fieldPaths||[];return new yn(l.map(d=>at.fromServerFormat(d)))}(e.updateMask);return new Qn(i,s,o,t,r)}return new Yi(i,s,t,r)}if(e.delete){let i=vr(n,e.delete);return new Zi(i,t)}if(e.verify){let i=vr(n,e.verify);return new pl(i,t)}return K()}function g4(n,e){return n&&n.length>0?(X(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ut(i.updateTime):ut(s);return o.isEqual(ee.min())&&(o=ut(s)),new ME(o,i.transformResults||[])}(t,e))):[]}function hP(n,e){return{documents:[uP(n,e.path)]}}function fP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uP(n,i);let s=function(l){if(l.length!==0)return mP(ke.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ra(g.field),direction:y4(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=OE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function pP(n){let e=cP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){X(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=gP(f);return g instanceof ke&&oD(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(_){return new eo(Pa(_.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,xl(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(f){let g=!!f.before,m=f.values||[];return new Er(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new Er(m,g)}(t.endAt)),UR(e,i,o,s,a,"F",u,l)}function m4(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pa(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pa(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Pa(t.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Pa(t.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ie.create(Pa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return ke.create(t.compositeFilter.filters.map(r=>gP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function y4(n){return c4[n]}function v4(n){return l4[n]}function _4(n){return d4[n]}function Ra(n){return{fieldPath:n.canonicalString()}}function Pa(n){return at.fromServerFormat(n.fieldPath)}function mP(n){return n instanceof Ie?function(t){if(t.op==="=="){if(SN(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NAN"}};if(TN(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SN(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NAN"}};if(TN(t.value))return{unaryFilter:{field:Ra(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(t.field),op:v4(t.op),value:t.value}}}(n):n instanceof ke?function(t){let r=t.getFilters().map(i=>mP(i));return r.length===1?r[0]:{compositeFilter:{op:_4(t.op),filters:r}}}(n):K()}function w4(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ga=class n{constructor(e,t,r,i,s=ee.min(),o=ee.min(),a=Ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xp=class{constructor(e){this.ct=e}};function E4(n,e){let t;if(e.document)t=dP(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=z.fromSegments(e.noDocument.path),i=io(e.noDocument.readTime);t=mt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=z.fromSegments(e.unknownDocument.path),i=io(e.unknownDocument.version);t=mt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new Qe(i[0],i[1]);return ee.fromTimestamp(s)}(e.readTime)),t}function zN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Np(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:_l(s,o.key),fields:o.data.value.mapValue.fields,updateTime:za(s,o.version.toTimestamp()),createTime:za(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:ro(e.version)}}return r}function Np(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(n){let e=new Qe(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function Ws(n,e){let t=(e.baseMutations||[]).map(s=>LE(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>LE(n.ct,s)),i=Qe.fromMillis(e.localWriteTimeMs);return new gl(e.batchId,i,t,r)}function nl(n){let e=io(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?io(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return X(s.documents.length===1),Zt(ru(cP(s.documents[0])))}(n.query):function(s){return Zt(pP(s))}(n.query),new Ga(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ct.fromBase64String(n.resumeToken))}function vP(n,e){let t=ro(e.snapshotVersion),r=ro(e.lastLimboFreeSnapshotVersion),i;i=Cp(e.target)?hP(n.ct,e.target):fP(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:to(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lD(n){let e=pP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Tp(e,e.limit,"L"):e}function Xw(n,e){return new ml(e.largestBatchId,LE(n.ct,e.overlayMutation))}function GN(n,e){let t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function WN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ro(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}var jE=class{getBundleMetadata(e,t){return KN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:io(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return KN(e).put(function(i){return{bundleId:i.id,createTime:ro(ut(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return QN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:lD(s.bundledQuery),readTime:io(s.readTime)}}(r)})}saveNamedQuery(e,t){return QN(e).put(function(i){return{name:i.name,readTime:ro(ut(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function KN(n){return bt(n,"bundles")}function QN(n){return bt(n,"namedQueries")}var Rp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Zc(e).get(GN(this.userId,t)).next(r=>r?Xw(this.serializer,r):null)}getOverlays(e,t){let r=mr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new ml(t,o);i.push(this.ht(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(Yt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Zc(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,t,r){let i=mr(),s=Yt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zc(e).U("collectionPathOverlayIndex",o).next(a=>{for(let u of a){let l=Xw(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=mr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,d)=>{let f=Xw(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Zc(e).put(function(i,s,o){let[a,u,l]=GN(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:wl(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Zc(n){return bt(n,"documentOverlays")}var Xr=class{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(tt(e.integerValue));else if("doubleValue"in e){let r=tt(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),cl(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),typeof r=="string"&&(r=ti(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(zi(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?kR(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):K()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){let r=e.fields||{};this.Et(t,55);for(let i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){let r=e.values||[];this.Et(t,50);for(let i of r)this.It(i,t)}gt(e,t){this.Et(t,37),z.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}};Xr.bt=new Xr;function I4(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function YN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=I4(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var BE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Lt(e){let t=this.Bt(e),r=YN(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){let t=this.Bt(e),r=YN(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){let t=255&e;t===0?(this.Kt(0),this.Kt(255)):t===255?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},UE=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},$E=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ks=class{constructor(){this.Gt=new BE,this.zt=new UE(this.Gt),this.jt=new $E(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Qs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Vi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=ZN(n.arrayValue,e.arrayValue),t!==0?t:(t=ZN(n.directionalValue,e.directionalValue),t!==0?t:z.comparator(n.documentKey,e.documentKey)))}function ZN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Pp=class{constructor(e){this.Yt=new Ve((t,r)=>at.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let t of e.filters){let r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(X(e.collectionGroup===this.collectionId),this.en)return!1;let t=lE(e);if(t!==void 0&&!this.nn(t))return!1;let r=zs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[s];if(!this.rn(a,u)||!this.sn(this.Zt[o++],u))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ve(at.comparator),t=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Fa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Fa(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Fa(r.field,r.dir==="asc"?0:1)));return new Ba(Ba.UNKNOWN_ID,this.collectionId,t,ul.empty())}nn(e){for(let t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function _P(n){var e,t;if(X(n instanceof Ie||n instanceof ke),n instanceof Ie){if(n instanceof Dp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ie.create(n.field,"==",s)))||[];return ke.create(i,"or")}return n}let r=n.filters.map(i=>_P(i));return ke.create(r,n.op)}function D4(n){if(n.getFilters().length===0)return[];let e=zE(_P(n));return X(wP(e)),HE(e)||qE(e)?[e]:e.getFilters()}function HE(n){return n instanceof Ie}function qE(n){return n instanceof ke&&oD(n)}function wP(n){return HE(n)||qE(n)||function(t){if(t instanceof ke&&vE(t)){for(let r of t.getFilters())if(!HE(r)&&!qE(r))return!1;return!0}return!1}(n)}function zE(n){if(X(n instanceof Ie||n instanceof ke),n instanceof Ie)return n;if(n.filters.length===1)return zE(n.filters[0]);let e=n.filters.map(r=>zE(r)),t=ke.create(e,n.op);return t=kp(t),wP(t)?t:(X(t instanceof ke),X($a(t)),X(t.filters.length>1),t.filters.reduce((r,i)=>dD(r,i)))}function dD(n,e){let t;return X(n instanceof Ie||n instanceof ke),X(e instanceof Ie||e instanceof ke),t=n instanceof Ie?e instanceof Ie?function(i,s){return ke.create([i,s],"and")}(n,e):JN(n,e):e instanceof Ie?JN(e,n):function(i,s){if(X(i.filters.length>0&&s.filters.length>0),$a(i)&&$a(s))return LR(i,s.getFilters());let o=vE(i)?i:s,a=vE(i)?s:i,u=o.filters.map(l=>dD(l,a));return ke.create(u,"or")}(n,e),kp(t)}function JN(n,e){if($a(e))return LR(e,n.getFilters());{let t=e.filters.map(r=>dD(n,r));return ke.create(t,"or")}}function kp(n){if(X(n instanceof Ie||n instanceof ke),n instanceof Ie)return n;let e=n.getFilters();if(e.length===1)return kp(e[0]);if(FR(n))return n;let t=e.map(i=>kp(i)),r=[];return t.forEach(i=>{i instanceof Ie?r.push(i):i instanceof ke&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ke.create(r,n.op)}var GE=class{constructor(){this._n=new El}addToCollectionParentIndex(e,t){return this._n.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(Rn.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}},El=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ve(be.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ve(be.comparator)).toArray()}};var sp=new Uint8Array(0),WE=class{constructor(e,t){this.databaseId=t,this.an=new El,this.un=new Ir(r=>to(r),(r,i)=>Nl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});let s={collectionId:r,parent:Yt(i)};return XN(e).put(s)}return M.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[ER(t),""],!1,!0);return XN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(gr(o.parent))}return r})}addFieldIndex(e,t){let r=Jc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Aa(e);return s.next(a=>{o.put(WN(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Jc(e),i=Aa(e),s=Sa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Jc(e),r=Sa(e),i=Aa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return M.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Pp(r).on();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Sa(e),i=!0,s=new Map;return M.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=de(),a=[];return M.forEach(s,(u,l)=>{F("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(u)} to execute ${to(t)}`);let d=function(P,$){let Z=lE($);if(Z===void 0)return null;for(let Q of bp(P,Z.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,u),f=function(P,$){let Z=new Map;for(let Q of zs($))for(let I of bp(P,Q.fieldPath))switch(I.op){case"==":case"in":Z.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Z.set(Q.fieldPath.canonicalString(),I.value),Array.from(Z.values())}return null}(l,u),g=function(P,$){let Z=[],Q=!0;for(let I of zs($)){let v=I.kind===0?RN(P,I.fieldPath,P.startAt):PN(P,I.fieldPath,P.startAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new Er(Z,Q)}(l,u),m=function(P,$){let Z=[],Q=!0;for(let I of zs($)){let v=I.kind===0?PN(P,I.fieldPath,P.endAt):RN(P,I.fieldPath,P.endAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new Er(Z,Q)}(l,u),_=this.hn(u,l,g),D=this.hn(u,l,m),b=this.Pn(u,l,f),k=this.In(u.indexId,d,_,g.inclusive,D,m.inclusive,b);return M.forEach(k,B=>r.G(B,t.limit).next(P=>{P.forEach($=>{let Z=z.fromSegments($.documentKey);o.has(Z)||(o=o.add(Z),a.push(Z))})}))}).next(()=>a)}return M.resolve(null)})}cn(e){let t=this.un.get(e);return t||(e.filters.length===0?t=[e]:t=D4(ke.create(e.filters,"and")).map(r=>SE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){let u=(t!=null?t.length:1)*Math.max(r.length,s.length),l=u/(t!=null?t.length:1),d=[];for(let f=0;f<u;++f){let g=t?this.Tn(t[f/l]):sp,m=this.En(e,g,r[f%l],i),_=this.dn(e,g,s[f%l],o),D=a.map(b=>this.En(e,g,b,!0));d.push(...this.createRange(m,_,D))}return d}En(e,t,r,i){let s=new Qs(e,z.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){let s=new Qs(e,z.empty(),t,r);return i?s.Jt():s}ln(e,t){let r=new Pp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.cn(t);return M.forEach(i,s=>this.ln(e,s).next(o=>{o?r!==0&&o.fields.length<function(u){let l=new Ve(at.comparator),d=!1;for(let f of u.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of u.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}An(e,t){let r=new Ks;for(let i of zs(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Ht(i.kind);Xr.bt.Pt(s,o)}return r.Wt()}Tn(e){let t=new Ks;return Xr.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){let r=new Ks;return Xr.bt.Pt(Xs(this.databaseId,t),r.Ht(function(s){let o=zs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(r===null)return[];let i=[];i.push(new Ks);let s=0;for(let o of zs(e)){let a=r[s++];for(let u of i)if(this.Vn(t,o.fieldPath)&&fl(a))i=this.mn(i,o,a);else{let l=u.Ht(o.kind);Xr.bt.Pt(a,l)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let u=new Ks;u.seed(a.Wt()),Xr.bt.Pt(o,u.Ht(t.kind)),s.push(u)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Ie&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Jc(e),i=Aa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(d,f){let g=f?new ul(f.sequenceNumber,new Rn(io(f.readTime),new z(gr(f.documentKey)),f.largestBatchId)):ul.empty(),m=d.fields.map(([_,D])=>new Fa(at.fromServerFormat(_),D));return new Ba(d.indexId,d.collectionGroup,m,g)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ue(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Jc(e),s=Aa(e);return this.gn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>M.forEach(a,u=>s.put(WN(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return M.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,u=>this.pn(e,i,u).next(l=>{let d=this.yn(s,u);return l.isEqual(d)?M.resolve():this.wn(e,s,u,l,d)}))))})}Sn(e,t,r,i){return Sa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Sa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){let i=Sa(e),s=new Ve(Vi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new Qs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new Ve(Vi),i=this.An(t,e);if(i==null)return r;let s=lE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(fl(o))for(let a of o.arrayValue.values||[])r=r.add(new Qs(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new Qs(t.indexId,e.key,sp,i));return r}wn(e,t,r,i,s){F("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(u,l,d,f,g){let m=u.getIterator(),_=l.getIterator(),D=Ta(m),b=Ta(_);for(;D||b;){let k=!1,B=!1;if(D&&b){let P=d(D,b);P<0?B=!0:P>0&&(k=!0)}else D!=null?B=!0:k=!0;k?(f(b),b=Ta(_)):B?(g(D),D=Ta(m)):(D=Ta(m),b=Ta(_))}}(i,s,Vi,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),M.waitFor(o)}gn(e){let t=1;return Aa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Vi(o,a)).filter((o,a,u)=>!a||Vi(o,u[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Vi(o,e),u=Vi(o,t);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(o),i.push(o.Jt());else if(u>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,sp,[]],u=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,sp,[]];s.push(IDBKeyRange.bound(a,u))}return s}Dn(e,t){return Vi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eR)}getMinOffset(e,t){return M.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||K())).next(eR)}};function XN(n){return bt(n,"collectionParents")}function Sa(n){return bt(n,"indexEntries")}function Jc(n){return bt(n,"indexConfiguration")}function Aa(n){return bt(n,"indexState")}function eR(n){X(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;rD(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Rn(e.readTime,e.documentKey,t)}var tR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function EP(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(u.next(()=>{X(a===1)}));let l=[];for(let d of t.mutations){let f=SR(e,d.key.path,t.batchId);s.push(i.delete(f)),l.push(d.key)}return M.waitFor(s).next(()=>l)}function Op(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(41943040,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);var Fp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){X(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Li(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=ka(e),o=Li(e);return o.add({}).next(a=>{X(typeof a=="number");let u=new gl(a,t,r,i),l=function(m,_,D){let b=D.baseMutations.map(B=>wl(m.ct,B)),k=D.mutations.map(B=>wl(m.ct,B));return{userId:_,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:b,mutations:k}}(this.serializer,this.userId,u),d=[],f=new Ve((g,m)=>ue(g.canonicalString(),m.canonicalString()));for(let g of i){let m=SR(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,xz))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),M.waitFor(d).next(()=>u)})}lookupMutationBatch(e,t){return Li(e).get(t).next(r=>r?(X(r.userId===this.userId),Ws(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?M.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Li(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(X(a.batchId>=r),s=Ws(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Li(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Li(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ws(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=cp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ka(e).J({range:i},(o,a,u)=>{let[l,d,f]=o,g=gr(d);if(l===this.userId&&t.path.isEqual(g))return Li(e).get(f).next(m=>{if(!m)throw K();X(m.userId===this.userId),s.push(Ws(this.serializer,m))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ue),i=[];return t.forEach(s=>{let o=cp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ka(e).J({range:a},(l,d,f)=>{let[g,m,_]=l,D=gr(m);g===this.userId&&s.path.isEqual(D)?r=r.add(_):f.done()});i.push(u)}),M.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=cp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ve(ue);return ka(e).J({range:o},(u,l,d)=>{let[f,g,m]=u,_=gr(g);f===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Li(e).get(s).next(o=>{if(o===null)throw K();X(o.userId===this.userId),r.push(Ws(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return EP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return M.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ka(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let u=gr(s[1]);i.push(u)}else a.done()}).next(()=>{X(i.length===0)})})}containsKey(e,t){return IP(e,this.userId,t)}xn(e){return DP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function IP(n,e,t){let r=cp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return ka(n).J({range:s,H:!0},(a,u,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Li(n){return bt(n,"mutations")}function ka(n){return bt(n,"documentMutations")}function DP(n){return bt(n,"mutationQueues")}var Wa=class n{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Ln(){return new n(-1)}};var KE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let r=new Wa(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ee.fromTimestamp(new Qe(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ma(e).delete(t.targetId)).next(()=>this.Bn(e)).next(r=>(X(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Ma(e).J((o,a)=>{let u=nl(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ma(e).J((r,i)=>{let s=nl(i);t(s)})}Bn(e){return nR(e).get("targetGlobalKey").next(t=>(X(t!==null),t))}kn(e,t){return nR(e).put("targetGlobalKey",t)}qn(e,t){return Ma(e).put(vP(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=to(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ma(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{let l=nl(a);Nl(t,l.target)&&(s=l,u.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=ji(e);return t.forEach(o=>{let a=Yt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,t,r){let i=ji(e);return M.forEach(t,s=>{let o=Yt(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=ji(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ji(e),s=de();return i.J({range:r,H:!0},(o,a,u)=>{let l=gr(o[1]),d=new z(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=Yt(t.path),i=IDBKeyRange.bound([r],[ER(r)],!1,!0),s=0;return ji(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Ma(e).get(t).next(r=>r?nl(r):null)}};function Ma(n){return bt(n,"targets")}function nR(n){return bt(n,"targetGlobal")}function ji(n){return bt(n,"targetDocuments")}function rR([n,e],[t,r]){let i=ue(n,t);return i===0?ue(e,r):i}var QE=class{constructor(e){this.Kn=e,this.buffer=new Ve(rR),this.$n=0}Un(){return++this.$n}Wn(e){let t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();rR(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},YE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){F("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>R(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){es(t)?F("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Xi(t)}yield this.zn(3e5)}))}},ZE=class{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(mn.oe);let r=new QE(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(tR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tR):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,u,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),xa()<=Jn.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function C4(n,e){return new ZE(n,e)}var JE=class{constructor(e,t){this.db=e,this.garbageCollector=C4(this,t)}Hn(e){let t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return op(e,r)}removeReference(e,t,r){return op(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return op(e,t)}er(e,t){return function(i,s){let o=!1;return DP(i).Y(a=>IP(i,a,s).next(u=>(u&&(o=!0),M.resolve(!u)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.Xn(e,(o,a)=>{if(a<=t){let u=this.er(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ee.min()),ji(e).delete(function(f){return[0,Yt(f.path)]}(o))))});i.push(u)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return op(e,t)}Xn(e,t){let r=ji(e),i,s=mn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:l})=>{o===0?(s!==mn.oe&&t(new z(gr(i)),s),s=l,i=u):s=mn.oe}).next(()=>{s!==mn.oe&&t(new z(gr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function op(n,e){return ji(n).put(function(r,i){return{targetId:0,path:Yt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Vp=class{constructor(){this.changes=new Ir(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var XE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qs(e).put(r)}removeEntry(e,t,r){return qs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Np(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=mt.newInvalidDocument(t);return qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:mt.newInvalidDocument(t)};return qs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xc(t))},(i,s)=>{r={document:this.nr(t,s),size:Op(s)}}).next(()=>r)}getEntries(e,t){let r=an();return this.ir(e,t,(i,s)=>{let o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=an(),i=new qe(z.comparator);return this.ir(e,t,(s,o)=>{let a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,Op(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return M.resolve();let i=new Ve(oR);t.forEach(u=>i=i.add(u));let s=IDBKeyRange.bound(Xc(i.first()),Xc(i.last())),o=i.getIterator(),a=o.getNext();return qs(e).J({index:"documentKeyIndex",range:s},(u,l,d)=>{let f=z.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&oR(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(Xc(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Np(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qs(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=an();for(let f of l){let g=this.nr(z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Pl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=an(),o=sR(t,r),a=sR(t,Rn.max());return qs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,l,d)=>{let f=this.nr(z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new eI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return iR(e).get("remoteDocumentGlobalKey").next(t=>(X(!!t),t))}tr(e,t){return iR(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){let r=E4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return mt.newInvalidDocument(e)}};function CP(n){return new XE(n)}var eI=class extends Vp{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ir(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ve((s,o)=>ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){let u=zN(this.ar.serializer,o);i=i.add(s.path.popLast());let l=Op(u);r+=l-a.size,t.push(this.ar.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){let u=zN(this.ar.serializer,o.convertToNoDocument(ee.min()));t.push(this.ar.addEntry(e,s,u))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),M.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function iR(n){return bt(n,"remoteDocumentGlobal")}function qs(n){return bt(n,"remoteDocumentsV14")}function Xc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sR(n,e){let t=e.documentKey.path.toArray();return[n,Np(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oR(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ue(t[s],r[s]),i)return i;return i=ue(t.length,r.length),i||(i=ue(t[t.length-2],r[r.length-2]),i||ue(t[t.length-1],r[r.length-1]))}var tI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Lp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&sl(r.mutation,i,yn.empty(),Qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,t,r=de()){let i=mr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=tl();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=mr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,de()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=an(),o=il(),a=function(){return il()}();return t.forEach((u,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Qn)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),sl(d.mutation,l,d.mutation.getFieldMask(),Qe.now())):o.set(l.key,yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new tI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=il(),i=new qe((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let d=r.get(u)||yn.empty();d=a.applyToLocalView(l,d),r.set(u,d);let f=(i.get(a.batchId)||de()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,d=u.value,f=WR();d.forEach(g=>{if(!s.has(g)){let m=tP(t.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):M.resolve(mr()),a=-1,u=s;return o.next(l=>M.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,de())).next(d=>({batchId:a,changes:GR(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=tl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=tl();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,u=>{let l=function(f,g){return new Kn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,mt.newInvalidDocument(d)))});let a=tl();return o.forEach((u,l)=>{let d=s.get(u);d!==void 0&&sl(d.mutation,l,yn.empty(),Qe.now()),Pl(t,l)&&(a=a.insert(u,l))}),a})}};var nI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return M.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ut(i.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(i){return{name:i.name,query:lD(i.bundledQuery),readTime:ut(i.readTime)}}(t)),M.resolve()}};var rI=class{constructor(){this.overlays=new qe(z.comparator),this.hr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){let r=mr();return M.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),M.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){let i=mr(),s=t.length+1,o=new z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return M.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new qe((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=mr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return M.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ml(t,r));let s=this.hr.get(t);s===void 0&&(s=de(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}};var Il=class{constructor(){this.Pr=new Ve(ft.Ir),this.Tr=new Ve(ft.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){let r=new ft(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new ft(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){let t=new z(new be([])),r=new ft(t,e),i=new ft(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let t=new z(new be([])),r=new ft(t,e),i=new ft(t,e+1),s=de();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new ft(e,0),r=this.Pr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ft=class{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return z.comparator(e.key,t.key)||ue(e.pr,t.pr)}static Er(e,t){return ue(e.pr,t.pr)||z.comparator(e.key,t.key)}};var iI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ve(ft.Ir)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new gl(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.br(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ft(t,0),i=new ft(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(ue);return t.forEach(i=>{let s=new ft(i,0),o=new ft(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),M.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new ft(new z(s),0),a=new Ve(ue);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),M.resolve(this.Dr(a))}Dr(e){let t=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){X(this.Cr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return M.forEach(t.mutations,i=>{let s=new ft(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){let r=new ft(t,0),i=this.wr.firstAfterOrEqual(r);return M.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Cr(e,t){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var sI=class{constructor(e){this.vr=e,this.docs=function(){return new qe(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(t))}getEntries(e,t){let r=an();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=an(),o=t.path,a=new z(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:d}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||rD(DR(d),r)<=0||(i.has(d.key)||Pl(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,t,r,i){K()}Fr(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oI(this)}getSize(e){return M.resolve(this.size)}},oI=class extends Vp{constructor(e){super(),this.ar=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}};var aI=class{constructor(e){this.persistence=e,this.Mr=new Ir(t=>to(t),Nl),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Il,this.targetCount=0,this.Lr=Wa.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),M.resolve()}qn(e){this.Mr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Lr=new Wa(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.qn(t),M.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){let r=this.Mr.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),M.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Nr.gr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.Nr.containsKey(t))}};var jp=class{constructor(e,t){this.Br={},this.overlays={},this.kr=new mn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new aI(this),this.indexManager=new GE,this.remoteDocumentCache=function(i){return new sI(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new xp(t),this.$r=new nI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new iI(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new uI(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return M.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}},uI=class extends vp{constructor(e){super(),this.currentSequenceNumber=e}},Bp=class n{constructor(e){this.persistence=e,this.zr=new Il,this.jr=null}static Hr(e){return new n(e)}get Jr(){if(this.jr)return this.jr;throw K()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),M.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Jr,r=>{let i=z.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,ee.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return M.or([()=>M.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}};var cI=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new _p("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DN,{unique:!0}),u.createObjectStore("documentMutations")}(e),aR(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),aR(e)),o=o.next(()=>function(u){let l=u.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(u,l){return l.store("mutations").U().next(d=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",DN,{unique:!0});let f=l.store("mutations"),g=d.map(m=>f.put(m));return M.waitFor(g)})}(e,s))),o=o.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:$z});l.createIndex("collectionPathOverlayIndex",Hz,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",qz,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:Nz});l.createIndex("documentKeyIndex",Rz),l.createIndex("collectionGroupIndex",Pz)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Lz}).createIndex("sequenceNumberIndex",jz,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Bz}).createIndex("documentKeyIndex",Uz,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),o}ei(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Op(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>M.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,u=>{X(u.userId===s.userId);let l=Ws(this.serializer,u);return EP(e,s.userId,l).next(()=>{})}))}))}ti(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let u=new be(o),l=function(f){return[0,Yt(f)]}(u);s.push(t.get(l).next(d=>d?M.resolve():(f=>t.put({targetId:0,path:Yt(f),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>M.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Vz});let r=t.store("collectionParents"),i=new El,s=o=>{if(i.add(o)){let a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:Yt(u)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let u=new be(o);return s(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,u],l)=>{let d=gr(a);return s(d.popLast())}))}ri(e){let t=e.store("targets");return t.J((r,i)=>{let s=nl(i),o=vP(this.serializer,s);return t.put(o)})}ii(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),u=function(f){return f.document?new z(be.fromString(f.document.name).popFirst(5)):f.noDocument?z.fromSegments(f.noDocument.path):f.unknownDocument?z.fromSegments(f.unknownDocument.path):K()}(o).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>M.waitFor(i))}si(e,t){let r=t.store("mutations"),i=CP(this.serializer),s=new jp(Bp.Hr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(u=>{var l;let d=(l=a.get(u.userId))!==null&&l!==void 0?l:de();Ws(this.serializer,u).keys().forEach(f=>d=d.add(f)),a.set(u.userId,d)}),M.forEach(a,(u,l)=>{let d=new pt(l),f=Rp.lt(this.serializer,d),g=s.getIndexManager(d),m=Fp.lt(d,this.serializer,g,s.referenceDelegate);return new Lp(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new ll(t,mn.oe),u).next()})})}};function aR(n){n.createObjectStore("targetDocuments",{keyPath:Oz}).createIndex("documentTargetsIndex",Fz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kz,{unique:!0}),n.createObjectStore("targetGlobal")}var eE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lI=class n{constructor(e,t,r,i,s,o,a,u,l,d,f=16){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=l,this.ai=d,this.ui=f,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!n.D())throw new O(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JE(this,i),this.Ti=t+"main",this.serializer=new xp(u),this.Ei=new qi(this.Ti,this.ui,new cI(this.serializer)),this.Qr=new KE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=CP(this.serializer),this.$r=new jE,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&ot("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,eE);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new mn(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=t=>R(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(t=>R(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>R(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ap(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(es(e))return F("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return F("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return el(e).get("owner").next(t=>M.resolve(this.Si(t)))}bi(e){return ap(e).delete(this.clientId)}Di(){return R(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=bt(t,"clientMetadata");return r.U().next(i=>{let s=this.vi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(let t of e)this.di.removeItem(this.Fi(t.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?M.resolve(!0):el(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,eE);return!1}}return!(!this.networkEnabled||!this.inForeground)||ap(e).U().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&F("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return R(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new ll(e,mn.oe);return this.yi(t).next(()=>this.bi(t))}),this.Ei.close(),this.Li()})}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ap(e).U().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Fp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new WE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Rp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){F("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(u){return u===16?Gz:u===15?NR:u===14?xR:u===13?MR:u===12?zz:u===11?AR:void K()}(this.ui),o;return this.Ei.runTransaction(e,i,s,a=>(o=new ll(a,this.kr?this.kr.next():mn.oe),t==="readwrite-primary"?this.gi(o).next(u=>!!u||this.pi(o)).next(u=>{if(!u)throw ot(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new O(N.FAILED_PRECONDITION,CR);return r(o)}).next(u=>this.wi(o).next(()=>u)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return el(e).get("owner").next(t=>{if(t!==null&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new O(N.FAILED_PRECONDITION,eE)})}wi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return el(e).put("owner",t)}static D(){return qi.D()}yi(e){let t=el(e);return t.get("owner").next(r=>this.Si(r)?(F("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):M.resolve())}Ci(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ot(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let t=/(?:Version|Mobile)\/1[456]/;vm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{let r=((t=this.di)===null||t===void 0?void 0:t.getItem(this.Fi(e)))!==null;return F("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ot("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ot("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function el(n){return bt(n,"owner")}function ap(n){return bt(n,"clientMetadata")}function hD(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var dI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=de(),i=de();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var hI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Up=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return vm()?8:bR(ku())>0?6:4}()}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new hI;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(xa()<=Jn.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Na(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),M.resolve()):(xa()<=Jn.DEBUG&&F("QueryEngine","Query:",Na(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(xa()<=Jn.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Na(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(t))):M.resolve())}ji(e,t){if(kN(t))return M.resolve(null);let r=Zt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Tp(t,null,"F"),r=Zt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=de(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(t,a);return this.Xi(t,l,o,u.readTime)?this.ji(e,Tp(t,null,"F")):this.es(e,l,t,u)}))})))}Hi(e,t,r,i){return kN(t)||i.isEqual(ee.min())?M.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(t,s);return this.Xi(t,o,r,i)?M.resolve(null):(xa()<=Jn.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Na(t)),this.es(e,o,t,IR(i,-1)).next(a=>a))})}Zi(e,t){let r=new Ve(qR(e));return t.forEach((i,s)=>{Pl(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return xa()<=Jn.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Na(t)),this.zi.getDocumentsMatchingQuery(e,t,Rn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var fI=class{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new qe(ue),this.rs=new Ir(s=>to(s),Nl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Lp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}};function bP(n,e,t,r){return new fI(n,e,t,r)}function TP(n,e){return R(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=de();for(let l of i){o.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)u=u.add(d.key)}return t.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function b4(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,d){let f=l.batch,g=f.keys(),m=M.resolve();return g.forEach(_=>{m=m.next(()=>d.getEntry(u,_)).next(D=>{let b=l.docVersions.get(_);X(b!==null),D.version.compareTo(b)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=de();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function SP(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function T4(n,e){let t=G(n),r=e.snapshotVersion,i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Qr.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Ct.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(D,b,k){return D.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(g,m,d)&&a.push(t.Qr.updateTargetData(s,m))});let u=an(),l=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(AP(s,o,e.documentUpdates).next(d=>{u=d.cs,l=d.ls})),!r.isEqual(ee.min())){let d=t.Qr.getLastRemoteSnapshotVersion(s).next(f=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.ns=i,s))}function AP(n,e,t){let r=de(),i=de();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=an();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function S4(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ka(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Ga(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Qa(n,e,t){return R(this,null,function*(){let r=G(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!es(o))throw o;F("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function $p(n,e,t){let r=G(n),i=ee.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,d){let f=G(u),g=f.rs.get(d);return g!==void 0?M.resolve(f.ns.get(g)):f.Qr.getTargetData(l,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:ee.min(),t?s:de())).next(a=>(NP(r,HR(e),a),{documents:a,hs:s})))}function MP(n,e){let t=G(n),r=G(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function xP(n,e){let t=G(n),r=t.ss.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,IR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NP(t,e,i),i))}function NP(n,e,t){let r=n.ss.get(e)||ee.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function A4(n,e,t,r){return R(this,null,function*(){let i=G(n),s=de(),o=an();for(let l of t){let d=e.Ps(l.metadata.name);l.document&&(s=s.add(d));let f=e.Is(l);f.setReadTime(e.Ts(l.metadata.readTime)),o=o.insert(d,f)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Ka(i,function(d){return Zt(ru(be.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>AP(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function M4(r,i){return R(this,arguments,function*(n,e,t=de()){let s=yield Ka(n,Zt(lD(e.bundledQuery))),o=G(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let u=ut(e.readTime);if(s.snapshotVersion.compareTo(u)>=0)return o.$r.saveNamedQuery(a,e);let l=s.withResumeToken(Ct.EMPTY_BYTE_STRING,u);return o.ns=o.ns.insert(l.targetId,l),o.Qr.updateTargetData(a,l).next(()=>o.Qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Qr.addMatchingKeys(a,t,s.targetId)).next(()=>o.$r.saveNamedQuery(a,e))})})}function uR(n,e){return`firestore_clients_${n}_${e}`}function cR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tE(n,e){return`firestore_targets_${n}_${e}`}var Hp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new O(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(ot("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ol=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new O(r.error.code,r.error.message))),s?new n(e,r.state,i):(ot("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},qp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=uD();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=TR(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(ot("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},pI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ot("SharedClientState",`Failed to parse online state: ${e}`),null)}},Dl=class{constructor(){this.activeTargetIds=uD()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},al=class{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new qe(ue),this.started=!1,this.ys=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=uR(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Dl),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return R(this,null,function*(){let e=yield this.syncEngine.Bi();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(uR(this.persistenceKey,r));if(i){let s=qp.Es(r,i);s&&(this.ps=this.ps.insert(s.clientId,s))}}this.Ms();let t=this.storage.getItem(this.vs);if(t){let r=this.xs(t);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,r){this.Ls(e,t,r),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(tE(this.persistenceKey,e));if(r){let i=ol.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tE(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return F("SharedClientState","READ",e,t),t}setItem(e,t){F("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){F("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let t=e;if(t.storageArea===this.storage){if(F("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void ot("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>R(this,null,function*(){if(this.started){if(t.key!==null){if(this.bs.test(t.key)){if(t.newValue==null){let r=this.$s(t.key);return this.Us(r,null)}{let r=this.Ws(t.key,t.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let r=this.Gs(t.key,t.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(t.key)){if(t.newValue!==null){let r=this.js(t.key,t.newValue);if(r)return this.Hs(r)}}else if(t.key===this.vs){if(t.newValue!==null){let r=this.xs(t.newValue);if(r)return this.Os(r)}}else if(t.key===this.Ss){let r=function(s){let o=mn.oe;if(s!=null)try{let a=JSON.parse(s);X(typeof a=="number"),o=a}catch(a){ot("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==mn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Fs){let r=this.Js(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,r){let i=new Hp(this.currentUser,e,t,r),s=cR(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Bs(e){let t=cR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){let t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,r){let i=tE(this.persistenceKey,e),s=new ol(e,t,r);this.setItem(i,s.ds())}Ks(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){let t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){let r=this.$s(e);return qp.Es(r,t)}Gs(e,t){let r=this.Ds.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Hp.Es(new pt(s),i,t)}js(e,t){let r=this.Cs.exec(e),i=Number(r[1]);return ol.Es(i,t)}xs(e){return pI.Es(e)}Js(e){return JSON.parse(e)}zs(e){return R(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);F("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){let r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=uD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},zp=class{constructor(){this.no=new Dl,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Dl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gI=class{io(e){}shutdown(){}};var Gp=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var up=null;function nE(){return up===null?up=function(){return 268435456+Math.round(2147483648*Math.random())}():up++,"0x"+up.toString(16)}var x4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var mI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Lt="WebChannelConnection",yI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(t,r,i,s,o){let a=nE(),u=this.vo(t,r.toUriEncodedString());F("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(t,u,l,i).then(d=>(F("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Nn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",u,"request:",i),d})}xo(t,r,i,s,o,a){return this.Co(t,r,i,s,o)}Fo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}vo(t,r){let i=x4[t];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,i){let s=nE();return new Promise((o,a)=>{let u=new Ww;u.setWithCredentials(!0),u.listenOnce(Qw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Yc.NO_ERROR:let d=u.getResponseJson();F(Lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Yc.TIMEOUT:F(Lt,`RPC '${e}' ${s} timed out`),a(new O(N.DEADLINE_EXCEEDED,"Request time out"));break;case Yc.HTTP_ERROR:let f=u.getStatus();if(F(Lt,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let _=function(b){let k=b.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(k)>=0?k:N.UNKNOWN}(m.status);a(new O(_,m.message))}else a(new O(N.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new O(N.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{F(Lt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);F(Lt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Oo(e,t,r){let i=nE(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jw(),a=Zw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Kw({})),this.Fo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let d=s.join("");F(Lt,`Creating RPC '${e}' stream ${i}: ${d}`,u);let f=o.createWebChannel(d,u),g=!1,m=!1,_=new mI({lo:b=>{m?F(Lt,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(g||(F(Lt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),F(Lt,`RPC '${e}' stream ${i} sending:`,b),f.send(b))},ho:()=>f.close()}),D=(b,k,B)=>{b.listen(k,P=>{try{B(P)}catch($){setTimeout(()=>{throw $},0)}})};return D(f,ba.EventType.OPEN,()=>{m||(F(Lt,`RPC '${e}' stream ${i} transport opened.`),_.mo())}),D(f,ba.EventType.CLOSE,()=>{m||(m=!0,F(Lt,`RPC '${e}' stream ${i} transport closed`),_.po())}),D(f,ba.EventType.ERROR,b=>{m||(m=!0,Nn(Lt,`RPC '${e}' stream ${i} transport errored:`,b),_.po(new O(N.UNAVAILABLE,"The operation could not be completed")))}),D(f,ba.EventType.MESSAGE,b=>{var k;if(!m){let B=b.data[0];X(!!B);let P=B,$=P.error||((k=P[0])===null||k===void 0?void 0:k.error);if($){F(Lt,`RPC '${e}' stream ${i} received error:`,$);let Z=$.status,Q=function(w){let C=ht[w];if(C!==void 0)return iP(C)}(Z),I=$.message;Q===void 0&&(Q=N.INTERNAL,I="Unknown error status: "+Z+" with message "+$.message),m=!0,_.po(new O(Q,I)),f.close()}else F(Lt,`RPC '${e}' stream ${i} received:`,B),_.yo(B)}}),D(a,Yw.STAT_EVENT,b=>{b.stat===ip.PROXY?F(Lt,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===ip.NOPROXY&&F(Lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.fo()},0),_}};function RP(){return typeof window<"u"?window:null}function fp(){return typeof document<"u"?document:null}function kl(n){return new kE(n,!0)}var Cl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Wp=class{constructor(e,t,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Cl(e,t)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return R(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return R(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){return R(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(ot(t.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(t)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===t&&this.u_(r,i)},r=>{e(()=>{let i=new O(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,t){let r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>R(this,null,function*(){this.state=0,this.start()}))}c_(e){return F("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},vI=class extends Wp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();let t=p4(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?ut(o.readTime):ee.min()}(e);return this.listener.h_(t,r)}P_(e){let t={};t.database=VE(this.serializer),t.addTarget=function(s,o){let a,u=o.target;if(a=Cp(u)?{documents:hP(s,u)}:{query:fP(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oP(s,o.resumeToken);let l=OE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=za(s,o.snapshotVersion.toTimestamp());let l=OE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=m4(this.serializer,e);r&&(t.labels=r),this.i_(t)}I_(e){let t={};t.database=VE(this.serializer),t.removeTarget=e,this.i_(t)}},_I=class extends Wp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(X(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let t=g4(e.writeResults,e.commitTime),r=ut(e.commitTime);return this.listener.A_(r,t)}return X(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=VE(this.serializer),this.i_(e)}d_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>wl(this.serializer,r))};this.i_(t)}};var wI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,FE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new O(N.UNKNOWN,s.toString())})}xo(e,t,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,FE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(N.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},EI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ot(t),this.y_=!1):F("OnlineStateTracker",t)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var II=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>R(this,null,function*(){ts(this)&&(F("RemoteStore","Restarting streams for network reachability change."),yield function(u){return R(this,null,function*(){let l=G(u);l.M_.add(4),yield iu(l),l.N_.set("Unknown"),l.M_.delete(4),yield Ol(l)})}(this))}))}),this.N_=new EI(r,i)}};function Ol(n){return R(this,null,function*(){if(ts(n))for(let e of n.x_)yield e(!0)})}function iu(n){return R(this,null,function*(){for(let e of n.x_)yield e(!1)})}function hg(n,e){let t=G(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),gD(t)?pD(t):ou(t).Xo()&&fD(t,e))}function Ya(n,e){let t=G(n),r=ou(t);t.F_.delete(e),r.Xo()&&PP(t,e),t.F_.size===0&&(r.Xo()?r.n_():ts(t)&&t.N_.set("Unknown"))}function fD(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ou(n).P_(e)}function PP(n,e){n.L_.xe(e),ou(n).I_(e)}function pD(n){n.L_=new PE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ou(n).start(),n.N_.w_()}function gD(n){return ts(n)&&!ou(n).Zo()&&n.F_.size>0}function ts(n){return G(n).M_.size===0}function kP(n){n.L_=void 0}function N4(n){return R(this,null,function*(){n.N_.set("Online")})}function R4(n){return R(this,null,function*(){n.F_.forEach((e,t)=>{fD(n,e)})})}function P4(n,e){return R(this,null,function*(){kP(n),gD(n)?(n.N_.D_(e),pD(n)):n.N_.set("Unknown")})}function k4(n,e,t){return R(this,null,function*(){if(n.N_.set("Online"),e instanceof Ap&&e.state===2&&e.cause)try{yield function(i,s){return R(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(n,e)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kp(n,r)}else if(e instanceof La?n.L_.Ke(e):e instanceof Sp?n.L_.He(e):n.L_.We(e),!t.isEqual(ee.min()))try{let r=yield SP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let d=s.F_.get(l);d&&s.F_.set(l,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let d=s.F_.get(u);if(!d)return;s.F_.set(u,d.withResumeToken(Ct.EMPTY_BYTE_STRING,d.snapshotVersion)),PP(s,u);let f=new Ga(d.target,u,l,d.sequenceNumber);fD(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){F("RemoteStore","Failed to raise snapshot:",r),yield Kp(n,r)}})}function Kp(n,e,t){return R(this,null,function*(){if(!es(e))throw e;n.M_.add(1),yield iu(n),n.N_.set("Offline"),t||(t=()=>SP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){F("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Ol(n)}))})}function OP(n,e){return e().catch(t=>Kp(n,t,e))}function su(n){return R(this,null,function*(){let e=G(n),t=Ji(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;O4(e);)try{let i=yield S4(e.localStore,r);if(i===null){e.v_.length===0&&t.n_();break}r=i.batchId,F4(e,i)}catch(i){yield Kp(e,i)}FP(e)&&VP(e)})}function O4(n){return ts(n)&&n.v_.length<10}function F4(n,e){n.v_.push(e);let t=Ji(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function FP(n){return ts(n)&&!Ji(n).Zo()&&n.v_.length>0}function VP(n){Ji(n).start()}function V4(n){return R(this,null,function*(){Ji(n).V_()})}function L4(n){return R(this,null,function*(){let e=Ji(n);for(let t of n.v_)e.d_(t.mutations)})}function j4(n,e,t){return R(this,null,function*(){let r=n.v_.shift(),i=xE.from(r,e,t);yield OP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield su(n)})}function B4(n,e){return R(this,null,function*(){e&&Ji(n).E_&&(yield function(r,i){return R(this,null,function*(){if(function(o){return rP(o)&&o!==N.ABORTED}(i.code)){let s=r.v_.shift();Ji(r).t_(),yield OP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield su(r)}})}(n,e)),FP(n)&&VP(n)})}function lR(n,e){return R(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");let r=ts(t);t.M_.add(3),yield iu(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Ol(t)})}function DI(n,e){return R(this,null,function*(){let t=G(n);e?(t.M_.delete(2),yield Ol(t)):e||(t.M_.add(2),yield iu(t),t.N_.set("Unknown"))})}function ou(n){return n.B_||(n.B_=function(t,r,i){let s=G(t);return s.f_(),new vI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:N4.bind(null,n),To:R4.bind(null,n),Ao:P4.bind(null,n),h_:k4.bind(null,n)}),n.x_.push(e=>R(this,null,function*(){e?(n.B_.t_(),gD(n)?pD(n):n.N_.set("Unknown")):(yield n.B_.stop(),kP(n))}))),n.B_}function Ji(n){return n.k_||(n.k_=function(t,r,i){let s=G(t);return s.f_(),new _I(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:V4.bind(null,n),Ao:B4.bind(null,n),R_:L4.bind(null,n),A_:j4.bind(null,n)}),n.x_.push(e=>R(this,null,function*(){e?(n.k_.t_(),yield su(n)):(yield n.k_.stop(),n.v_.length>0&&(F("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))}))),n.k_}var CI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function au(n,e){if(ot("AsyncQueue",`${e}: ${n}`),es(n))return new O(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Qp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=tl(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Yp=class{constructor(){this.q_=new qe(z.comparator)}track(e){let t=e.doc.key,r=this.q_.get(t);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(t,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(t):e.type===1&&r.type===2?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):K():this.q_=this.q_.insert(t,e)}Q_(){let e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}},Za=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Qp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var bI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},TI=class{constructor(){this.queries=new Ir(e=>$R(e),Rl),this.onlineState="Unknown",this.z_=new Set}};function mD(n,e){return R(this,null,function*(){let t=G(n),r=3,i=e.query,s=t.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new bI,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield t.onListen(i,!0);break;case 1:s.K_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=au(o,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.U_.push(e),e.j_(t.onlineState),s.K_&&e.H_(s.K_)&&vD(t)})}function yD(n,e){return R(this,null,function*(){let t=G(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function U4(n,e){let t=G(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&vD(t)}function $4(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(t);r.queries.delete(e)}function vD(n){n.z_.forEach(e=>{e.next()})}var SI,dR;(dR=SI||(SI={})).J_="default",dR.Cache="cache";var bl=class{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){if(!e.fromCache||!this.G_())return!0;let r=t!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let t=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}na(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==SI.Cache}};var AI=class{constructor(e,t){this.ia=e,this.byteLength=t}sa(){return"metadata"in this.ia}};var Zp=class{constructor(e){this.serializer=e}Ps(e){return vr(this.serializer,e)}Is(e){return e.metadata.exists?dP(this.serializer,e.document,!1):mt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ut(e)}},MI=class{constructor(e,t,r){this.oa=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LP(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++t;let r=be.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}aa(e){let t=new Map,r=new Zp(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Ps(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||de()).add(s);t.set(o,a)}}return t}complete(){return R(this,null,function*(){let e=yield A4(this.localStore,new Zp(this.serializer),this.documents,this.oa.id),t=this.aa(this.documents);for(let r of this.queries)yield M4(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function LP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Jp=class{constructor(e){this.key=e}},Xp=class{constructor(e){this.key=e}},eg=class{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=de(),this.mutatedKeys=de(),this.Ia=qR(e),this.Ta=new Qp(this.Ia)}get Ea(){return this.la}da(e,t){let r=t?t.Aa:new Yp,i=t?t.Ta:this.Ta,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Pl(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),b=!1;g&&m?g.data.isEqual(m.data)?_!==D&&(r.track({type:3,doc:m}),b=!0):this.Ra(g,m)||(r.track({type:2,doc:m}),b=!0,(u&&this.Ia(m,u)>0||l&&this.Ia(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),b=!0):g&&!m&&(r.track({type:1,doc:g}),b=!0,(u||l)&&(a=!0)),b&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(m,_){let D=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return D(m)-D(_)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(r),i=i!=null&&i;let a=t&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new Za(this.query,e.Ta,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Yp,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=de(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new Xp(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new Jp(r))}),t}pa(e){this.la=e.hs,this.Pa=de();let t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Za.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},xI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},NI=class{constructor(e){this.key=e,this.wa=!1}},RI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ir(a=>$R(a),Rl),this.Da=new Map,this.Ca=new Set,this.va=new qe(z.comparator),this.Fa=new Map,this.Ma=new Il,this.xa={},this.Oa=new Map,this.Na=Wa.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function H4(n,e,t=!0){return R(this,null,function*(){let r=fg(n),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield jP(r,e,t,!0),i})}function q4(n,e){return R(this,null,function*(){let t=fg(n);yield jP(t,e,!0,!1)})}function jP(n,e,t,r){return R(this,null,function*(){let i=yield Ka(n.localStore,Zt(e)),s=i.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield _D(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&hg(n.remoteStore,i),a})}function _D(n,e,t,r,i){return R(this,null,function*(){n.Ba=(f,g,m)=>function(D,b,k,B){return R(this,null,function*(){let P=b.view.da(k);P.Xi&&(P=yield $p(D.localStore,b.query,!1).then(({documents:I})=>b.view.da(I,P)));let $=B&&B.targetChanges.get(b.targetId),Z=B&&B.targetMismatches.get(b.targetId)!=null,Q=b.view.applyChanges(P,D.isPrimaryClient,$,Z);return PI(D,b.targetId,Q.fa),Q.snapshot})}(n,f,g,m);let s=yield $p(n.localStore,e,!0),o=new eg(e,s.hs),a=o.da(s.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);PI(n,t,l.fa);let d=new xI(e,t,o);return n.ba.set(e,d),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),l.snapshot})}function z4(n,e,t){return R(this,null,function*(){let r=G(n),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Rl(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Qa(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ya(r.remoteStore,i.targetId),Ja(r,i.targetId)}).catch(Xi))):(Ja(r,i.targetId),yield Qa(r.localStore,i.targetId,!0))})}function G4(n,e){return R(this,null,function*(){let t=G(n),r=t.ba.get(e),i=t.Da.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ya(t.remoteStore,r.targetId))})}function W4(n,e,t){return R(this,null,function*(){let r=DD(n);try{let i=yield function(o,a){let u=G(o),l=Qe.now(),d=a.reduce((m,_)=>m.add(_.key),de()),f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=an(),D=de();return u.os.getEntries(m,d).next(b=>{_=b,_.forEach((k,B)=>{B.isValidDocument()||(D=D.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,_)).next(b=>{f=b;let k=[];for(let B of a){let P=a4(B,f.get(B.key).overlayedDocument);P!=null&&k.push(new Qn(B.key,P,OR(P.value.mapValue),nt.exists(!0)))}return u.mutationQueue.addMutationBatch(m,l,k,a)}).next(b=>{g=b;let k=b.applyToLocalDocumentSet(f,D);return u.documentOverlayCache.saveOverlays(m,b.batchId,k)})}).then(()=>({batchId:g.batchId,changes:GR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new qe(ue)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,t),yield oi(r,i.changes),yield su(r.remoteStore)}catch(i){let s=au(i,"Failed to persist write");t.reject(s)}})}function BP(n,e){return R(this,null,function*(){let t=G(n);try{let r=yield T4(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Fa.get(s);o&&(X(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?X(o.wa):i.removedDocuments.size>0&&(X(o.wa),o.wa=!1))}),yield oi(t,r,e)}catch(r){yield Xi(r)}})}function hR(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=G(o);u.onlineState=a;let l=!1;u.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(l=!0)}),l&&vD(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function K4(n,e,t){return R(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new qe(z.comparator);o=o.insert(s,mt.newNoDocument(s,ee.min()));let a=de().add(s),u=new yl(ee.min(),new Map,new qe(ue),o,a);yield BP(r,u),r.va=r.va.remove(s),r.Fa.delete(e),ID(r)}else yield Qa(r.localStore,e,!1).then(()=>Ja(r,e,t)).catch(Xi)})}function Q4(n,e){return R(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield b4(t.localStore,e);ED(t,r,null),wD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield oi(t,i)}catch(i){yield Xi(i)}})}function Y4(n,e,t){return R(this,null,function*(){let r=G(n);try{let i=yield function(o,a){let u=G(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(X(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>u.localDocuments.getDocuments(l,d))})}(r.localStore,e);ED(r,e,t),wD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield oi(r,i)}catch(i){yield Xi(i)}})}function Z4(n,e){return R(this,null,function*(){let t=G(n);ts(t.remoteStore)||F("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.Oa.get(r)||[];i.push(e),t.Oa.set(r,i)}catch(r){let i=au(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function wD(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function ED(n,e,t){let r=G(n),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Ja(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||UP(n,r)})}function UP(n,e){n.Ca.delete(e.path.canonicalString());let t=n.va.get(e);t!==null&&(Ya(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),ID(n))}function PI(n,e,t){for(let r of t)r instanceof Jp?(n.Ma.addReference(r.key,e),J4(n,r)):r instanceof Xp?(F("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||UP(n,r.key)):K()}function J4(n,e){let t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(F("SyncEngine","New document in limbo: "+t),n.Ca.add(r),ID(n))}function ID(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){let e=n.Ca.values().next().value;n.Ca.delete(e);let t=new z(be.fromString(e)),r=n.Na.next();n.Fa.set(r,new NI(t)),n.va=n.va.insert(t,r),hg(n.remoteStore,new Ga(Zt(ru(t.path)),r,"TargetPurposeLimboResolution",mn.oe))}}function oi(n,e,t){return R(this,null,function*(){let r=G(n),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=dI.Ki(u.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return R(this,null,function*(){let d=G(u);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(l,g=>M.forEach(g.qi,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>M.forEach(g.Qi,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!es(f))throw f;F("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.ns.get(g),_=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(_);d.ns=d.ns.insert(g,D)}}})}(r.localStore,s))})}function X4(n,e){return R(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){F("SyncEngine","User change. New user:",e.toKey());let r=yield TP(t.localStore,e);t.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new O(N.CANCELLED,o))})}),s.Oa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield oi(t,r.us)}})}function eG(n,e){let t=G(n),r=t.Fa.get(e);if(r&&r.wa)return de().add(r.key);{let i=de(),s=t.Da.get(e);if(!s)return i;for(let o of s){let a=t.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function tG(n,e){return R(this,null,function*(){let t=G(n),r=yield $p(t.localStore,e.query,!0),i=e.view.pa(r);return t.isPrimaryClient&&PI(t,e.targetId,i.fa),i})}function nG(n,e){return R(this,null,function*(){let t=G(n);return xP(t.localStore,e).then(r=>oi(t,r))})}function rG(n,e,t,r){return R(this,null,function*(){let i=G(n),s=yield function(a,u){let l=G(a),d=G(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.vn(f,u).next(g=>g?l.localDocuments.getDocuments(f,g):M.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield su(i.remoteStore):t==="acknowledged"||t==="rejected"?(ED(i,e,r||null),wD(i,e),function(a,u){G(G(a).mutationQueue).Mn(u)}(i.localStore,e)):K(),yield oi(i,s)):F("SyncEngine","Cannot apply mutation batch with id: "+e)})}function iG(n,e){return R(this,null,function*(){let t=G(n);if(fg(t),DD(t),e===!0&&t.La!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fR(t,r.toArray());t.La=!0,yield DI(t.remoteStore,!0);for(let s of i)hg(t.remoteStore,s)}else if(e===!1&&t.La!==!1){let r=[],i=Promise.resolve();t.Da.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ja(t,o),Qa(t.localStore,o,!0))),Ya(t.remoteStore,o)}),yield i,yield fR(t,r),function(o){let a=G(o);a.Fa.forEach((u,l)=>{Ya(a.remoteStore,l)}),a.Ma.mr(),a.Fa=new Map,a.va=new qe(z.comparator)}(t),t.La=!1,yield DI(t.remoteStore,!1)}})}function fR(n,e,t){return R(this,null,function*(){let r=G(n),i=[],s=[];for(let o of e){let a,u=r.Da.get(o);if(u&&u.length!==0){a=yield Ka(r.localStore,Zt(u[0]));for(let l of u){let d=r.ba.get(l),f=yield tG(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield MP(r.localStore,o);a=yield Ka(r.localStore,l),yield _D(r,$P(l),o,!1,a.resumeToken)}i.push(a)}return r.Sa.h_(s),i})}function $P(n){return UR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sG(n){return function(t){return G(G(t).persistence).Bi()}(G(n).localStore)}function oG(n,e,t,r){return R(this,null,function*(){let i=G(n);if(i.La)return void F("SyncEngine","Ignoring unexpected query state notification.");let s=i.Da.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield xP(i.localStore,HR(s[0])),a=yl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ct.EMPTY_BYTE_STRING);yield oi(i,o,a);break}case"rejected":yield Qa(i.localStore,e,!0),Ja(i,e,r);break;default:K()}})}function aG(n,e,t){return R(this,null,function*(){let r=fg(n);if(r.La){for(let i of e){if(r.Da.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){F("SyncEngine","Adding an already active target "+i);continue}let s=yield MP(r.localStore,i),o=yield Ka(r.localStore,s);yield _D(r,$P(s),o.targetId,!1,o.resumeToken),hg(r.remoteStore,o)}for(let i of t)r.Da.has(i)&&(yield Qa(r.localStore,i,!1).then(()=>{Ya(r.remoteStore,i),Ja(r,i)}).catch(Xi))}})}function fg(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=K4.bind(null,e),e.Sa.h_=U4.bind(null,e.eventManager),e.Sa.ka=$4.bind(null,e.eventManager),e}function DD(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Q4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Y4.bind(null,e),e}function uG(n,e,t){let r=G(n);(function(s,o,a){return R(this,null,function*(){try{let u=yield o.getMetadata();if(yield function(m,_){let D=G(m),b=ut(_.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",k=>D.$r.getBundleMetadata(k,_.id)).then(k=>!!k&&k.createTime.compareTo(b)>=0)}(s.localStore,u))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(LP(u));let l=new MI(u,s.localStore,o.serializer),d=yield o.qa();for(;d;){let g=yield l._a(d);g&&a._updateProgress(g),d=yield o.qa()}let f=yield l.complete();return yield oi(s,f.ca,void 0),yield function(m,_){let D=G(m);return D.persistence.runTransaction("Save bundle","readwrite",b=>D.$r.saveBundleMetadata(b,_))}(s.localStore,u),a._completeWith(f.progress),Promise.resolve(f.ua)}catch(u){return Nn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Tl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){this.serializer=kl(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bP(this.persistence,new Up,e.initialUser,this.serializer)}createPersistence(e){return new jp(Bp.Hr,this.serializer)}createSharedClientState(e){return new zp}terminate(){return R(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var tg=class n extends Tl{constructor(e,t,r){super(),this.Qa=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){yield mm(n.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield DD(this.Qa.syncEngine),yield su(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return bP(this.persistence,new Up,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new YE(r,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new pE(t,this.persistence);return new fE(e.asyncQueue,r)}createPersistence(e){let t=hD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new lI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RP(),fp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zp}},kI=class n extends tg{constructor(e,t){super(e,t,!1),this.Qa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return R(this,null,function*(){yield mm(n.prototype,this,"initialize").call(this,e);let t=this.Qa.syncEngine;this.sharedClientState instanceof al&&(this.sharedClientState.syncEngine={Zs:rG.bind(null,t),Xs:oG.bind(null,t),eo:aG.bind(null,t),Bi:sG.bind(null,t),Ys:nG.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>R(this,null,function*(){yield iG(this.Qa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=RP();if(!al.D(t))throw new O(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=hD(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new al(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Sl=class{initialize(e,t){return R(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=X4.bind(null,this.syncEngine),yield DI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new TI}()}createDatastore(e){let t=kl(e.databaseInfo.databaseId),r=function(s){return new yI(s)}(e.databaseInfo);return function(s,o,a,u){return new wI(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,a){return new II(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>hR(this.syncEngine,t,0),function(){return Gp.D()?new Gp:new gI}())}createSyncEngine(e,t){return function(i,s,o,a,u,l,d){let f=new RI(i,s,o,a,u,l);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return R(this,null,function*(){var e;yield function(r){return R(this,null,function*(){let i=G(r);F("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield iu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function pR(n,e=10240){let t=0;return{read(){return R(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return R(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Xa=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var OI=class{constructor(e,t){this.Ua=e,this.serializer=t,this.metadata=new gt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(r=>{r&&r.sa()?this.metadata.resolve(r.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.ia)}`))},r=>this.metadata.reject(r))}close(){return this.Ua.cancel()}getMetadata(){return R(this,null,function*(){return this.metadata.promise})}qa(){return R(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return R(this,null,function*(){let e=yield this.za();if(e===null)return null;let t=this.Wa.decode(e),r=Number(t);isNaN(r)&&this.ja(`length string (${t}) is not valid number`);let i=yield this.Ha(r);return new AI(JSON.parse(i),e.length+r)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return R(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ha(e){return R(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let t=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return R(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var FI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return R(this,null,function*(){let o=G(i),a={documents:s.map(f=>_l(o.serializer,f))},u=yield o.xo("BatchGetDocuments",o.serializer.databaseId,be.emptyPath(),a,s.length),l=new Map;u.forEach(f=>{let g=f4(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());X(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zi(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return R(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=z.fromPath(r);this.mutations.push(new pl(i,this.precondition(i)))}),yield function(r,i){return R(this,null,function*(){let s=G(r),o={writes:i.map(a=>wl(s.serializer,a))};yield s.Co("Commit",s.serializer.databaseId,be.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?nt.exists(!1):nt.updateTime(t):nt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new O(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nt.updateTime(t)}return nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var VI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Za=r.maxAttempts,this.Yo=new Cl(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>R(this,null,function*(){let e=new FI(this.datastore),t=this.tu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.nu(i)}))}).catch(r=>{this.nu(r)})}))}tu(e){try{let t=this.updateFunction(e);return!xl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!rP(t)}return!1}};var LI=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pt.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>R(this,null,function*(){F("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=au(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function pp(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>R(this,null,function*(){r.isEqual(i)||(yield TP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function jI(n,e){return R(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield CD(n);F("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>lR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>lR(e.remoteStore,i)),n._onlineComponents=e})}function HP(n){return n.name==="FirebaseError"?n.code===N.FAILED_PRECONDITION||n.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function CD(n){return R(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pp(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!HP(t))throw t;Nn("Error using user provided cache. Falling back to memory cache: "+t),yield pp(n,new Tl)}}else F("FirestoreClient","Using default OfflineComponentProvider"),yield pp(n,new Tl);return n._offlineComponents})}function pg(n){return R(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(F("FirestoreClient","Using user provided OnlineComponentProvider"),yield jI(n,n._uninitializedComponentsProvider._online)):(F("FirestoreClient","Using default OnlineComponentProvider"),yield jI(n,new Sl))),n._onlineComponents})}function qP(n){return CD(n).then(e=>e.persistence)}function bD(n){return CD(n).then(e=>e.localStore)}function zP(n){return pg(n).then(e=>e.remoteStore)}function TD(n){return pg(n).then(e=>e.syncEngine)}function cG(n){return pg(n).then(e=>e.datastore)}function eu(n){return R(this,null,function*(){let e=yield pg(n),t=e.eventManager;return t.onListen=H4.bind(null,e.syncEngine),t.onUnlisten=z4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=q4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=G4.bind(null,e.syncEngine),t})}function lG(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield qP(n),t=yield zP(n);return e.setNetworkEnabled(!0),function(i){let s=G(i);return s.M_.delete(0),Ol(s)}(t)}))}function dG(n){return n.asyncQueue.enqueue(()=>R(this,null,function*(){let e=yield qP(n),t=yield zP(n);return e.setNetworkEnabled(!1),function(i){return R(this,null,function*(){let s=G(i);s.M_.add(0),yield iu(s),s.N_.set("Offline")})}(t)}))}function hG(n,e){let t=new gt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,s,o){return R(this,null,function*(){try{let a=yield function(l,d){let f=G(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new O(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=au(a,`Failed to get document '${s} from cache`);o.reject(u)}})}(yield bD(n),e,t)})),t.promise}function GP(n,e,t={}){let r=new gt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(s,o,a,u,l){let d=new Xa({next:g=>{o.enqueueAndForget(()=>yD(s,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&u&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new bl(ru(a.path),d,{includeMetadataChanges:!0,ra:!0});return mD(s,f)}(yield eu(n),n.asyncQueue,e,t,r)})),r.promise}function fG(n,e){let t=new gt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,s,o){return R(this,null,function*(){try{let a=yield $p(i,s,!0),u=new eg(s,a.hs),l=u.da(a.documents),d=u.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let u=au(a,`Failed to execute query '${s} against cache`);o.reject(u)}})}(yield bD(n),e,t)})),t.promise}function WP(n,e,t={}){let r=new gt;return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(s,o,a,u,l){let d=new Xa({next:g=>{o.enqueueAndForget(()=>yD(s,f)),g.fromCache&&u.source==="server"?l.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new bl(a,d,{includeMetadataChanges:!0,ra:!0});return mD(s,f)}(yield eu(n),n.asyncQueue,e,t,r)})),r.promise}function pG(n,e){let t=new Xa(e);return n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,s){G(i).z_.add(s),s.next()}(yield eu(n),t)})),()=>{t.$a(),n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(i,s){G(i).z_.delete(s)}(yield eu(n),t)}))}}function gG(n,e,t,r){let i=function(o,a){let u;return u=typeof o=="string"?sP().encode(o):o,function(d,f){return new OI(d,f)}(function(d,f){if(d instanceof Uint8Array)return pR(d,f);if(d instanceof ArrayBuffer)return pR(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,kl(e));n.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){uG(yield TD(n),i,r)}))}function mG(n,e){return n.asyncQueue.enqueue(()=>R(this,null,function*(){return function(r,i){let s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield bD(n),e)}))}function KP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var gR=new Map;function SD(n,e,t){if(!t)throw new O(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AD(n,e,t,r){if(e===!0&&r===!0)throw new O(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mR(n){if(!z.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yR(n){if(z.isDocumentKey(n))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function Te(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gg(n);throw new O(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QP(n,e){if(e<=0)throw new O(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var ng=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},so=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ng({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ng(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rE;switch(r.type){case"firstParty":return new aE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=gR.get(t);r&&(F("ComponentProvider","Removing Datastore"),gR.delete(t),r.terminate())}(this),Promise.resolve()}};function mg(n,e,t,r={}){var i;let s=(n=Te(n,so))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Nn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=pt.MOCK_USER;else{a=Qb(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pt(l)}n._authCredentials=new iE(new gp(a,u))}}var xt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Le=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},_r=class n extends xt{constructor(e,t,r){super(e,t,ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Fl(n,e,...t){if(n=Ge(n),SD("collection","path",e),n instanceof so){let r=be.fromString(e,...t);return yR(r),new _r(n,null,r)}{if(!(n instanceof Le||n instanceof _r))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return yR(r),new _r(n.firestore,null,r)}}function MD(n,e){if(n=Te(n,so),SD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xt(n,null,function(r){return new Kn(be.emptyPath(),r)}(e))}function uu(n,e,...t){if(n=Ge(n),arguments.length===1&&(e=mp.newId()),SD("doc","path",e),n instanceof so){let r=be.fromString(e,...t);return mR(r),new Le(n,null,new z(r))}{if(!(n instanceof Le||n instanceof _r))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(be.fromString(e,...t));return mR(r),new Le(n.firestore,n instanceof _r?n.converter:null,new z(r))}}function Vl(n,e){return n=Ge(n),e=Ge(e),(n instanceof Le||n instanceof _r)&&(e instanceof Le||e instanceof _r)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function yg(n,e){return n=Ge(n),e=Ge(e),n instanceof xt&&e instanceof xt&&n.firestore===e.firestore&&Rl(n._query,e._query)&&n.converter===e.converter}var BI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Cl(this,"async_queue_retry"),this.hu=()=>{let t=fp();t&&F("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};let e=fp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let t=fp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let t=new gt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return R(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!es(e))throw e;F("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ot("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);let i=CI.createAndSchedule(this,e,t,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&K()}verifyOperationInProgress(){}du(){return R(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this._u)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let t=this._u.indexOf(e);this._u.splice(t,1)}};function UI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var $I=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YP=-1,ze=class extends so{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new BI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JP(this),this._firestoreClient.terminate()}};function ZP(n,e){let t=typeof n=="object"?n:Fu(),r=typeof n=="string"?n:e||"(default)",i=wm(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Kb("firestore");s&&mg(i,...s)}return i}function wt(n){return n._firestoreClient||JP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,u,l,d){return new gE(a,u,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,KP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new LI(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function xD(n,e){e1(n=Te(n,ze));let t=wt(n);if(t._uninitializedComponentsProvider)throw new O(N.FAILED_PRECONDITION,"SDK cache is already specified.");Nn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=n._freezeSettings(),i=new Sl;return XP(t,i,new tg(i,r.cacheSizeBytes,e?.forceOwnership))}function ND(n){e1(n=Te(n,ze));let e=wt(n);if(e._uninitializedComponentsProvider)throw new O(N.FAILED_PRECONDITION,"SDK cache is already specified.");Nn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),r=new Sl;return XP(e,r,new kI(r,t.cacheSizeBytes))}function XP(n,e,t){let r=new gt;return n.asyncQueue.enqueue(()=>R(this,null,function*(){try{yield pp(n,t),yield jI(n,e),r.resolve()}catch(i){let s=i;if(!HP(s))throw s;Nn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function RD(n){if(n._initialized&&!n._terminated)throw new O(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new gt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{yield function(r){return R(this,null,function*(){if(!qi.D())return Promise.resolve();let i=r+"main";yield qi.delete(i)})}(hD(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function PD(n){return function(t){let r=new gt;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return Z4(yield TD(t),r)})),r.promise}(wt(n=Te(n,ze)))}function kD(n){return lG(wt(n=Te(n,ze)))}function OD(n){return dG(wt(n=Te(n,ze)))}function FD(n,e){let t=wt(n=Te(n,ze)),r=new $I;return gG(t,n._databaseId,e,r),r}function VD(n,e){return mG(wt(n=Te(n,ze)),e).then(t=>t?new xt(n,null,t.query):null)}function e1(n){if(n._initialized||n._terminated)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ct.fromBase64String(e))}catch(t){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ii=class{constructor(e){this._methodName=e}};var oo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var yG=/^__.*__$/,HI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yi(e,this.data,t,this.fieldTransforms)}},rg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function t1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var ig=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return sg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(t1(this.fu)&&yG.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},qI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kl(e)}Fu(e,t,r,i=!1){return new ig({fu:e,methodName:t,vu:r,path:at.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lo(n){let e=n._freezeSettings(),t=kl(n._databaseId);return new qI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vg(n,e,t,r,i,s={}){let o=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);BD("Data must be an object, but it was:",o,r);let a=i1(r,o),u,l;if(s.merge)u=new yn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=QI(e,f,t);if(!o.contains(g))throw new O(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);o1(d,g)||d.push(g)}u=new yn(d),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new HI(new jt(a),u,l)}var Al=class n extends ii{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function n1(n,e,t){return new ig({fu:3,vu:e.settings.vu,methodName:n._methodName,yu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zI=class n extends ii{_toFieldTransform(e){return new no(e.path,new Ki)}isEqual(e){return e instanceof n}},GI=class n extends ii{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=n1(this,e,!0),r=this.Mu.map(s=>ho(s,t)),i=new ni(r);return new no(e.path,i)}isEqual(e){return e instanceof n&&_m(this.Mu,e.Mu)}},WI=class n extends ii{constructor(e,t){super(e),this.Mu=t}_toFieldTransform(e){let t=n1(this,e,!0),r=this.Mu.map(s=>ho(s,t)),i=new ri(r);return new no(e.path,i)}isEqual(e){return e instanceof n&&_m(this.Mu,e.Mu)}},KI=class n extends ii{constructor(e,t){super(e),this.xu=t}_toFieldTransform(e){let t=new Qi(e.serializer,YR(e.serializer,this.xu));return new no(e.path,t)}isEqual(e){return e instanceof n&&this.xu===e.xu}};function LD(n,e,t,r){let i=n.Fu(1,e,t);BD("Data must be an object, but it was:",i,r);let s=[],o=jt.empty();co(r,(u,l)=>{let d=UD(e,u,t);l=Ge(l);let f=i.Su(d);if(l instanceof Al)s.push(d);else{let g=ho(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new yn(s);return new rg(o,a,i.fieldTransforms)}function jD(n,e,t,r,i,s){let o=n.Fu(1,e,t),a=[QI(e,r,t)],u=[i];if(s.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(QI(e,s[g])),u.push(s[g+1]);let l=[],d=jt.empty();for(let g=a.length-1;g>=0;--g)if(!o1(l,a[g])){let m=a[g],_=u[g];_=Ge(_);let D=o.Su(m);if(_ instanceof Al)l.push(m);else{let b=ho(_,D);b!=null&&(l.push(m),d.set(m,b))}}let f=new yn(l);return new rg(d,f,o.fieldTransforms)}function r1(n,e,t,r=!1){return ho(t,n.Fu(r?4:3,e))}function ho(n,e){if(s1(n=Ge(n)))return BD("Unsupported field value:",e,n),i1(n,e);if(n instanceof ii)return function(r,i){if(!t1(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=ho(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Qe.fromDate(r);return{timestampValue:za(i.serializer,s)}}if(r instanceof Qe){let s=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:za(i.serializer,s)}}if(r instanceof oo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:oP(i.serializer,r._byteString)};if(r instanceof Le){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cD(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${gg(r)}`)}(n,e)}function i1(n,e){let t={};return RR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(n,(r,i)=>{let s=ho(i,e.pu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function s1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Qe||n instanceof oo||n instanceof Dr||n instanceof Le||n instanceof ii)}function BD(n,e,t){if(!s1(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=gg(t);throw r==="an object"?e.Du(n+" a custom object"):e.Du(n+" "+r)}}function QI(n,e,t){if((e=Ge(e))instanceof Yn)return e._internalPath;if(typeof e=="string")return UD(n,e);throw sg("Field path arguments must be of type string or ",n,!1,void 0,t)}var vG=new RegExp("[~\\*/\\[\\]]");function UD(n,e,t){if(e.search(vG)>=0)throw sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yn(...e.split("."))._internalPath}catch{throw sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new O(N.INVALID_ARGUMENT,a+n+u)}function o1(n,e){return n.some(t=>t.isEqual(e))}var ao=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new YI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_g("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},YI=class extends ao{data(){return super.data()}};function _g(n,e){return typeof e=="string"?UD(n,e):e instanceof Yn?e._internalPath:e._delegate._internalPath}function a1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ml=class{},uo=class extends Ml{};function Cr(n,e,...t){let r=[];e instanceof Ml&&r.push(e),r=r.concat(t),function(s){let o=s.filter(u=>u instanceof ZI).length,a=s.filter(u=>u instanceof og).length;if(o>1||o>0&&a>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var og=class n extends uo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return c1(e._query,t),new xt(e.firestore,e.converter,AE(e._query,t))}_parse(e){let t=lo(e.firestore);return function(s,o,a,u,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){_R(f,d);let m=[];for(let _ of f)m.push(vR(u,s,_));g={arrayValue:{values:m}}}else g=vR(u,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||_R(f,d),g=r1(a,o,f,d==="in"||d==="not-in");return Ie.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function $D(n,e,t){let r=e,i=_g("where",n);return og._create(i,r,t)}var ZI=class n extends Ml{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ke.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)c1(o,u),o=AE(o,u)}(e._query,t),new xt(e.firestore,e.converter,AE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var JI=class n extends uo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new eo(s,o)}(e._query,this._field,this._direction);return new xt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Kn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function HD(n,e="asc"){let t=e,r=_g("orderBy",n);return JI._create(r,t)}var ag=class n extends uo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new xt(e.firestore,e.converter,Tp(e._query,this._limit,this._limitType))}};function qD(n){return QP("limit",n),ag._create("limit",n,"F")}function zD(n){return QP("limitToLast",n),ag._create("limitToLast",n,"L")}var ug=class n extends uo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=u1(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(i,s){return new Kn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function GD(...n){return ug._create("startAt",n,!0)}function WD(...n){return ug._create("startAfter",n,!1)}var cg=class n extends uo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=u1(e,this.type,this._docOrFields,this._inclusive);return new xt(e.firestore,e.converter,function(i,s){return new Kn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function KD(...n){return cg._create("endBefore",n,!1)}function QD(...n){return cg._create("endAt",n,!0)}function u1(n,e,t,r){if(t[0]=Ge(t[0]),t[0]instanceof ao)return function(s,o,a,u,l){if(!u)throw new O(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of Va(s))if(f.field.isKeyField())d.push(Xs(o,u.key));else{let g=u.data.field(f.field);if(dg(g))throw new O(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new O(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Er(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=lo(n.firestore);return function(o,a,u,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new O(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let D=d[_];if(g[_].field.isKeyField()){if(typeof D!="string")throw new O(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!aD(o)&&D.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let b=o.path.child(be.fromString(D));if(!z.isDocumentKey(b))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);let k=new z(b);m.push(Xs(a,k))}else{let b=r1(u,l,D);m.push(b)}}return new Er(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function vR(n,e,t){if(typeof(t=Ge(t))=="string"){if(t==="")throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aD(e)&&t.indexOf("/")!==-1)throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(be.fromString(t));if(!z.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xs(n,new z(r))}if(t instanceof Le)return Xs(n,t._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gg(t)}.`)}function _R(n,e){if(!Array.isArray(n)||n.length===0)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function c1(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var tu=class{convertValue(e,t="none"){switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return co(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new oo(tt(e.latitude),tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=sD(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){let t=ti(e);return new Qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=be.fromString(e);X(yP(r));let i=new Gi(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(t)||ot(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function wg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var XI=class extends tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};var ei=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pn=class extends ao{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $i(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_g("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},$i=class extends Pn{data(e={}){return super.data(e)}},Zn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ei(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $i(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new $i(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new $i(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ei(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:_G(a.type),doc:u,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _G(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function Eg(n,e){return n instanceof Pn&&e instanceof Pn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Zn&&e instanceof Zn&&n._firestore===e._firestore&&yg(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function YD(n){n=Te(n,Le);let e=Te(n.firestore,ze);return GP(wt(e),n._key).then(t=>sC(e,n,t))}var si=class extends tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,t)}};function ZD(n){n=Te(n,Le);let e=Te(n.firestore,ze),t=wt(e),r=new si(e);return hG(t,n._key).then(i=>new Pn(e,r,n._key,i,new ei(i!==null&&i.hasLocalMutations,!0),n.converter))}function JD(n){n=Te(n,Le);let e=Te(n.firestore,ze);return GP(wt(e),n._key,{source:"server"}).then(t=>sC(e,n,t))}function XD(n){n=Te(n,xt);let e=Te(n.firestore,ze),t=wt(e),r=new si(e);return a1(n._query),WP(t,n._query).then(i=>new Zn(e,r,n,i))}function eC(n){n=Te(n,xt);let e=Te(n.firestore,ze),t=wt(e),r=new si(e);return fG(t,n._query).then(i=>new Zn(e,r,n,i))}function tC(n){n=Te(n,xt);let e=Te(n.firestore,ze),t=wt(e),r=new si(e);return WP(t,n._query,{source:"server"}).then(i=>new Zn(e,r,n,i))}function Ig(n,e,t){n=Te(n,Le);let r=Te(n.firestore,ze),i=wg(n.converter,e,t);return lu(r,[vg(lo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,nt.none())])}function Dg(n,e,t,...r){n=Te(n,Le);let i=Te(n.firestore,ze),s=lo(i),o;return o=typeof(e=Ge(e))=="string"||e instanceof Yn?jD(s,"updateDoc",n._key,e,t,r):LD(s,"updateDoc",n._key,e),lu(i,[o.toMutation(n._key,nt.exists(!0))])}function nC(n){return lu(Te(n.firestore,ze),[new Zi(n._key,nt.none())])}function rC(n,e){let t=Te(n.firestore,ze),r=uu(n),i=wg(n.converter,e);return lu(t,[vg(lo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,nt.exists(!1))]).then(()=>r)}function cu(n,...e){var t,r,i;n=Ge(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||UI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(UI(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let u,l,d;if(n instanceof Le)l=Te(n.firestore,ze),d=ru(n._key.path),u={next:f=>{e[o]&&e[o](sC(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Te(n,xt);l=Te(f.firestore,ze),d=f._query;let g=new si(l);u={next:m=>{e[o]&&e[o](new Zn(l,g,f,m))},error:e[o+1],complete:e[o+2]},a1(n._query)}return function(g,m,_,D){let b=new Xa(D),k=new bl(m,b,_);return g.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return mD(yield eu(g),k)})),()=>{b.$a(),g.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return yD(yield eu(g),k)}))}}(wt(l),d,a,u)}function iC(n,e){return pG(wt(n=Te(n,ze)),UI(e)?e:{next:e})}function lu(n,e){return function(r,i){let s=new gt;return r.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return W4(yield TD(r),i,s)})),s.promise}(wt(n),e)}function sC(n,e,t){let r=t.docs.get(e._key),i=new si(n);return new Pn(n,i,e._key,r,new ei(t.hasPendingWrites,t.fromCache),e.converter)}var wG={maxAttempts:5};var lg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lo(e)}set(e,t,r){this._verifyNotCommitted();let i=Bi(e,this._firestore),s=wg(i.converter,t,r),o=vg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,nt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Bi(e,this._firestore),o;return o=typeof(t=Ge(t))=="string"||t instanceof Yn?jD(this._dataReader,"WriteBatch.update",s._key,t,r,i):LD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,nt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Bi(e,this._firestore);return this._mutations=this._mutations.concat(new Zi(t._key,nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Bi(n,e){if((n=Ge(n)).firestore!==e)throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var eD=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=lo(t)}get(t){let r=Bi(t,this._firestore),i=new XI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return K();let o=s[0];if(o.isFoundDocument())return new ao(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ao(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let s=Bi(t,this._firestore),o=wg(s.converter,r,i),a=vg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=Bi(t,this._firestore),a;return a=typeof(r=Ge(r))=="string"||r instanceof Yn?jD(this._dataReader,"Transaction.update",o._key,r,i,s):LD(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=Bi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Bi(e,this._firestore),r=new si(this._firestore);return super.get(e).then(i=>new Pn(this._firestore,r,t._key,i._document,new ei(!1,!1),t.converter))}};function oC(n,e,t){n=Te(n,ze);let r=Object.assign(Object.assign({},wG),t);return function(s){if(s.maxAttempts<1)throw new O(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let u=new gt;return s.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){let l=yield cG(s);new VI(s.asyncQueue,l,a,o,u).Xa()})),u.promise}(wt(n),i=>e(new eD(n,i)),r)}function aC(){return new Al("deleteField")}function uC(){return new zI("serverTimestamp")}function cC(...n){return new GI("arrayUnion",n)}function lC(...n){return new WI("arrayRemove",n)}function dC(n){return new KI("increment",n)}(function(e,t=!0){(function(i){nu=i})(Jb),Ou(new us("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ze(new sE(r.getProvider("auth-internal")),new cE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gi(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),$t(wN,"4.6.4",e),$t(wN,"4.6.4","esm2017")})();var EG="@firebase/firestore-compat",IG="0.3.33";function yC(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new O("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function l1(){if(typeof Uint8Array>"u")throw new O("unimplemented","Uint8Arrays are not available in this environment.")}function d1(){if(!PR())throw new O("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Cg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return d1(),new n(Dr.fromBase64String(e))}static fromUint8Array(e){return l1(),new n(Dr.fromUint8Array(e))}toBase64(){return d1(),this._delegate.toBase64()}toUint8Array(){return l1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function hC(n){return DG(n,["next","error","complete"])}function DG(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var fC=class{enableIndexedDbPersistence(e,t){return xD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return ND(e._delegate)}clearIndexedDbPersistence(e){return RD(e._delegate)}},bg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){mg(this._delegate,e,t,r)}enableNetwork(){return kD(this._delegate)}disableNetwork(){return OD(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return PD(this._delegate)}onSnapshotsInSync(e){return iC(this._delegate,e)}get app(){if(!this._appCompat)throw new O("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fu(this,Fl(this._delegate,e))}catch(t){throw Jt(t,"collection()","Firestore.collection()")}}doc(e){try{return new br(this,uu(this._delegate,e))}catch(t){throw Jt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mo(this,MD(this._delegate,e))}catch(t){throw Jt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oC(this._delegate,t=>e(new Tg(this,t)))}batch(){return wt(this._delegate),new Sg(new lg(this._delegate,e=>lu(this._delegate,e)))}loadBundle(e){return FD(this._delegate,e)}namedQuery(e){return VD(this._delegate,e).then(t=>t?new mo(this,t):null)}},du=class extends tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cg(new Dr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return br.forKey(t,this.firestore,null)}};function CG(n){tD(n)}var Tg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new du(e)}get(e){let t=fo(e);return this._delegate.get(t).then(r=>new po(this._firestore,new Pn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=fo(e);return r?(yC("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fo(e);return this._delegate.delete(t),this}},Sg=class{constructor(e){this._delegate=e}set(e,t,r){let i=fo(e);return r?(yC("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},hu=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new $i(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new go(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new du(e),t),i.set(t,s)),s}};hu.INSTANCES=new WeakMap;var br=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new du(e)}static forPath(e,t,r){if(e.length%2!==0)throw new O("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Le(t._delegate,r,new z(e)))}static forKey(e,t,r){return new n(t,new Le(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new fu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fu(this.firestore,Fl(this._delegate,e))}catch(t){throw Jt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ge(e),e instanceof Le?Vl(this._delegate,e):!1}set(e,t){t=yC("DocumentReference.set",t);try{return t?Ig(this._delegate,e,t):Ig(this._delegate,e)}catch(r){throw Jt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Dg(this._delegate,e):Dg(this._delegate,e,t,...r)}catch(i){throw Jt(i,"updateDoc()","DocumentReference.update()")}}delete(){return nC(this._delegate)}onSnapshot(...e){let t=h1(e),r=f1(e,i=>new po(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return cu(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=ZD(this._delegate):e?.source==="server"?t=JD(this._delegate):t=YD(this._delegate),t.then(r=>new po(this.firestore,new Pn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(hu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Jt(n,e,t){return n.message=n.message.replace(e,t),n}function h1(n){for(let e of n)if(typeof e=="object"&&!hC(e))return e;return{}}function f1(n,e){var t,r;let i;return hC(n[0])?i=n[0]:hC(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var po=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new br(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Eg(this._delegate,e._delegate)}},go=class extends po{data(e){let t=this._delegate.data(e);return this._delegate._converter||wR(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},mo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new du(e)}where(e,t,r){try{return new n(this.firestore,Cr(this._delegate,$D(e,t,r)))}catch(i){throw Jt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Cr(this._delegate,HD(e,t)))}catch(r){throw Jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Cr(this._delegate,qD(e)))}catch(t){throw Jt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Cr(this._delegate,zD(e)))}catch(t){throw Jt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Cr(this._delegate,GD(...e)))}catch(t){throw Jt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Cr(this._delegate,WD(...e)))}catch(t){throw Jt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Cr(this._delegate,KD(...e)))}catch(t){throw Jt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Cr(this._delegate,QD(...e)))}catch(t){throw Jt(t,"endAt()","Query.endAt()")}}isEqual(e){return yg(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=eC(this._delegate):e?.source==="server"?t=tC(this._delegate):t=XD(this._delegate),t.then(r=>new Ll(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=h1(e),r=f1(e,i=>new Ll(this.firestore,new Zn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return cu(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(hu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},pC=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new go(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ll=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new go(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pC(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new go(this._firestore,r))})}isEqual(e){return Eg(this._delegate,e._delegate)}},fu=class n extends mo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new br(this.firestore,e):null}doc(e){try{return e===void 0?new br(this.firestore,uu(this._delegate)):new br(this.firestore,uu(this._delegate,e))}catch(t){throw Jt(t,"doc()","CollectionReference.doc()")}}add(e){return rC(this._delegate,e).then(t=>new br(this.firestore,t))}isEqual(e){return Vl(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(hu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function fo(n){return Te(n,Le)}var gC=class n{constructor(...e){this._delegate=new Yn(...e)}static documentId(){return new n(at.keyField().canonicalString())}isEqual(e){return e=Ge(e),e instanceof Yn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var mC=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=uC();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=aC();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=cC(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=lC(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=dC(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var bG={Firestore:bg,GeoPoint:oo,Timestamp:Qe,Blob:Cg,Transaction:Tg,WriteBatch:Sg,DocumentReference:br,DocumentSnapshot:po,Query:mo,QueryDocumentSnapshot:go,QuerySnapshot:Ll,CollectionReference:fu,FieldPath:gC,FieldValue:mC,setLogLevel:CG,CACHE_SIZE_UNLIMITED:YP};function TG(n,e){n.INTERNAL.registerComponent(new us("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},bG)))}function SG(n){TG(n,(e,t)=>new bg(e,t,new fC)),n.registerVersion(EG,IG)}SG(en);function AG(n,e=Uu){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function p1(n,e){return AG(n,e)}function MG(n,e){return p1(n,e).pipe(yi(void 0),Fo(),ne(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function wC(n,e){return p1(n,e).pipe(ne(t=>({payload:t,type:"query"})))}var Ag=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=_1(r,t);return new xg(i,s,this.afs)}snapshotChanges(){return MG(this.ref,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return this.snapshotChanges().pipe(ne(({payload:t})=>e.idField?ce(L({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(Qt)}};function Mg(n,e){return wC(n,e).pipe(yi(void 0),Fo(),ne(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function g1(n,e,t){return Mg(n,t).pipe(mi((r,i)=>xG(r,i.map(s=>s.payload),e),[]),jd(),ne(r=>r.map(i=>({type:i.type,payload:i}))))}function xG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=NG(n,r))}),n}function vC(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function NG(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return vC(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return vC(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vC(n,e.oldIndex,1);break}return n}function m1(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var xg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Mg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ne(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(yi(void 0),Fo(),Et(([r,i])=>i.length>0||!r),ne(([,r])=>r),Qt)}auditTrail(e){return this.stateChanges(e).pipe(mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=m1(e);return g1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return wC(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.payload.docs.map(r=>e.idField?ce(L({},r.data()),{[e.idField]:r.id}):r.data())),Qt)}get(e){return De(this.query.get(e)).pipe(Qt)}add(e){return this.ref.add(e)}doc(e){return new Ag(this.ref.doc(e),this.afs)}},_C=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Mg(this.query,this.afs.schedulers.outsideAngular).pipe(Qt):Mg(this.query,this.afs.schedulers.outsideAngular).pipe(ne(t=>t.filter(r=>e.indexOf(r.type)>-1)),Et(t=>t.length>0),Qt)}auditTrail(e){return this.stateChanges(e).pipe(mi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=m1(e);return g1(this.query,t,this.afs.schedulers.outsideAngular).pipe(Qt)}valueChanges(e={}){return wC(this.query,this.afs.schedulers.outsideAngular).pipe(ne(r=>r.payload.docs.map(i=>e.idField?L({[e.idField]:i.id},i.data()):i.data())),Qt)}get(e){return De(this.query.get(e)).pipe(Qt)}},y1=new q("angularfire2.enableFirestorePersistence"),v1=new q("angularfire2.firestore.persistenceSettings"),RG=new q("angularfire2.firestore.settings"),PG=new q("angularfire2.firestore.use-emulator");function _1(n,e=t=>t){return{query:e(n),ref:n}}var EC=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,u,l,d,f,g,m,_,D,b,k,B){this.schedulers=u;let P=Qc(t,a,r),$=d;f&&zw(P,a,g,_,D,b,m,k),[this.firestore,this.persistenceEnabled$]=np(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let Z=a.runOutsideAngular(()=>P.firestore());if(s&&Z.settings(s),$&&Z.useEmulator(...$),i&&!Rs(o)){let Q=()=>{try{return De(Z.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),re(!1)}};return[Z,a.runOutsideAngular(Q)]}else return[Z,re(!1)]},[s,$,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=_1(i,r),a=this.schedulers.ngZone.run(()=>s);return new xg(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new _C(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Ag(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(V(Da),V(Ca,8),V(y1,8),V(RG,8),V(Ot),V(ae),V(Zr),V(v1,8),V(PG,8),V(yN,8),V(jw,8),V(Bw,8),V(Uw,8),V($w,8),V(Hw,8),V(qw,8),V(pr,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),w1=(()=>{class n{constructor(){en.registerVersion("angularfire",Mn.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:y1,useValue:!0},{provide:v1,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ke({type:n});static \u0275inj=We({providers:[EC]})}return n})();var Ng=(()=>{let e=class e{constructor(r){this.firestore=r}agregarEmpleado(r){return this.firestore.collection("empleados").add(r)}getEmpleados(){return this.firestore.collection("empleados",r=>r.orderBy("fechaCreacion","asc")).snapshotChanges()}eliminarEmpleado(r){return this.firestore.collection("empleados").doc(r).delete()}getEmpleado(r){return this.firestore.collection("empleados").doc(r).snapshotChanges()}actualizarEmpleado(r,i){return this.firestore.collection("empleados").doc(r).update(i)}};e.\u0275fac=function(i){return new(i||e)(V(EC))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var I1=["toast-component",""];function OG(n,e){if(n&1){let t=uc();ye(0,"button",5),Ft("click",function(){nc(t);let i=Vt();return rc(i.remove())}),ye(1,"span",6),Pe(2,"\xD7"),Ee()()}}function FG(n,e){if(n&1&&(Qh(0),Pe(1),Yh()),n&2){let t=Vt(2);Se(),Hn("[",t.duplicatesCount+1,"]")}}function VG(n,e){if(n&1&&(ye(0,"div"),Pe(1),Tn(2,FG,2,1,"ng-container",4),Ee()),n&2){let t=Vt();qr(t.options.titleClass),Hr("aria-label",t.title),Se(),Hn(" ",t.title," "),Se(),He("ngIf",t.duplicatesCount)}}function LG(n,e){if(n&1&&Mt(0,"div",7),n&2){let t=Vt();qr(t.options.messageClass),He("innerHTML",t.message,wv)}}function jG(n,e){if(n&1&&(ye(0,"div",8),Pe(1),Ee()),n&2){let t=Vt();qr(t.options.messageClass),Hr("aria-label",t.message),Se(),Hn(" ",t.message," ")}}function BG(n,e){if(n&1&&(ye(0,"div"),Mt(1,"div",9),Ee()),n&2){let t=Vt();Se(),As("width",t.width()+"%")}}function UG(n,e){if(n&1){let t=uc();ye(0,"button",5),Ft("click",function(){nc(t);let i=Vt();return rc(i.remove())}),ye(1,"span",6),Pe(2,"\xD7"),Ee()()}}function $G(n,e){if(n&1&&(Qh(0),Pe(1),Yh()),n&2){let t=Vt(2);Se(),Hn("[",t.duplicatesCount+1,"]")}}function HG(n,e){if(n&1&&(ye(0,"div"),Pe(1),Tn(2,$G,2,1,"ng-container",4),Ee()),n&2){let t=Vt();qr(t.options.titleClass),Hr("aria-label",t.title),Se(),Hn(" ",t.title," "),Se(),He("ngIf",t.duplicatesCount)}}function qG(n,e){if(n&1&&Mt(0,"div",7),n&2){let t=Vt();qr(t.options.messageClass),He("innerHTML",t.message,wv)}}function zG(n,e){if(n&1&&(ye(0,"div",8),Pe(1),Ee()),n&2){let t=Vt();qr(t.options.messageClass),Hr("aria-label",t.message),Se(),Hn(" ",t.message," ")}}function GG(n,e){if(n&1&&(ye(0,"div"),Mt(1,"div",9),Ee()),n&2){let t=Vt();Se(),As("width",t.width()+"%")}}var IC=class{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){let e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},DC=class{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}},CC=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Me;_activate=new Me;_manualClose=new Me;_resetTimeout=new Me;_countDuplicate=new Me;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}},pu=class{toastId;config;message;title;toastType;toastRef;_onTap=new Me;_onAction=new Me;constructor(e,t,r,i,s,o){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=o,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}},D1={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},C1=new q("ToastConfig"),bC=class extends DC{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){let r=this._componentFactoryResolver.resolveComponentFactory(e.component),i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}},WG=(()=>{class n{_document=U(st);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),TC=class{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}},KG=(()=>{class n{_overlayContainer=U(WG);_componentFactoryResolver=U(Ci);_appRef=U(qn);_document=U(st);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){let i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new bC(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new TC(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gu=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,o){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=o,this.toastrConfig=L(L({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=L(L({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}error(t,r,i={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}info(t,r,i={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}warning(t,r,i={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,t,r,this.applyConfig(i))}clear(t){for(let r of this.toasts)if(t!==void 0){if(r.toastId===t){r.toastRef.manualClose();return}}else r.toastRef.manualClose()}remove(t){let r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){let{includeTitleDuplicates:o}=this.toastrConfig;for(let a of this.toasts){let u=o&&a.title===t;if((!o||u)&&a.message===r)return a.toastRef.onDuplicate(i,s),a}return null}applyConfig(t={}){return L(L({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");let o=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&o!==null)return o;this.previousToastMessage=r;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let u=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let l=r;r&&s.enableHtml&&(l=this.sanitizer.sanitize(dn.HTML,r));let d=new CC(u),f=new pu(this.index,s,l,i,t,d),g=[{provide:pu,useValue:f}],m=it.create({providers:g,parent:this._injector}),_=new IC(s.toastComponent,m),D=u.attach(_,s.newestOnTop);d.componentInstance=D.instance;let b={toastId:this.index,title:i||"",message:r||"",toastRef:d,onShown:d.afterActivate(),onHidden:d.afterClosed(),onTap:f.onTap(),onAction:f.onAction(),portal:D};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{b.toastRef.activate()})),this.toasts.push(b),b}static \u0275fac=function(r){return new(r||n)(V(C1),V(KG),V(it),V(c_),V(ae))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QG=(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=ac(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=ac({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(t=>ce(L({},t),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(t=>ce(L({},t),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(t=>ce(L({},t),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(ie(gu),ie(pu),ie(ae))};static \u0275cmp=ln({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){r&1&&Ft("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(Vv("@flyInOut",i._state),qr(i.toastClasses),As("display",i.displayStyle))},standalone:!0,features:[lc],attrs:I1,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&Tn(0,OG,3,0,"button",0)(1,VG,3,5,"div",1)(2,LG,1,3,"div",2)(3,jG,2,4,"div",3)(4,BG,2,2,"div",4),r&2&&(He("ngIf",i.options.closeButton),Se(),He("ngIf",i.title),Se(),He("ngIf",i.message&&i.options.enableHtml),Se(),He("ngIf",i.message&&!i.options.enableHtml),Se(),He("ngIf",i.options.progressBar))},dependencies:[Ns],encapsulation:2,data:{animation:[RM("flyInOut",[ff("inactive",Ps({opacity:0})),ff("active",Ps({opacity:1})),ff("removed",Ps({opacity:0})),f_("inactive => active",h_("{{ easeTime }}ms {{ easing }}")),f_("active => removed",h_("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return n})(),YG=ce(L({},D1),{toastComponent:QG}),ZG=(n={})=>Si([{provide:C1,useValue:{default:YG,config:n}}]),b1=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[ZG(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ke({type:n});static \u0275inj=We({})}return n})();var JG=(()=>{class n{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=ac(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=ac("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let t=new Date().getTime(),r=this.hideTime-t;this.width.set(r/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(i=>100-i),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(r){return new(r||n)(ie(gu),ie(pu),ie(qn))};static \u0275cmp=ln({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(r,i){r&1&&Ft("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),r&2&&(qr(i.toastClasses),As("display",i.displayStyle))},standalone:!0,features:[lc],attrs:I1,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){r&1&&Tn(0,UG,3,0,"button",0)(1,HG,3,5,"div",1)(2,qG,1,3,"div",2)(3,zG,2,4,"div",3)(4,GG,2,2,"div",4),r&2&&(He("ngIf",i.options.closeButton),Se(),He("ngIf",i.title),Se(),He("ngIf",i.message&&i.options.enableHtml),Se(),He("ngIf",i.message&&!i.options.enableHtml),Se(),He("ngIf",i.options.progressBar))},dependencies:[Ns],encapsulation:2,changeDetection:0})}return n})(),dX=ce(L({},D1),{toastComponent:JG});var XG=n=>["/editEmpleado/",n];function e3(n,e){n&1&&(ye(0,"h5"),Pe(1,"No hay datos para mostrar"),Ee())}function t3(n,e){if(n&1){let t=uc();ye(0,"tr")(1,"td"),Pe(2),Ee(),ye(3,"td"),Pe(4),Ee(),ye(5,"td"),Pe(6),Ee(),ye(7,"td"),Pe(8),zA(9,"currency"),Ee(),ye(10,"td"),Mt(11,"i",9),ye(12,"i",10),Ft("click",function(){let i=nc(t).$implicit,s=Vt(2);return rc(s.eliminarEmpleado(i.id))}),Ee()()()}if(n&2){let t=e.$implicit;Se(2),ia(t.nombre),Se(2),ia(t.apellido),Se(2),ia(t.documento),Se(2),ia(GA(9,5,t.salario)),Se(3),He("routerLink",HA(7,XG,t.id))}}function n3(n,e){if(n&1&&(ye(0,"table",7)(1,"thead")(2,"tr")(3,"th"),Pe(4,"Nombre"),Ee(),ye(5,"th"),Pe(6,"Apellido"),Ee(),ye(7,"th"),Pe(8,"Documento"),Ee(),ye(9,"th"),Pe(10,"Salario"),Ee(),Mt(11,"th"),Ee()(),ye(12,"tbody"),Tn(13,t3,13,9,"tr",8),Ee()()),n&2){let t=Vt();Se(13),He("ngForOf",t.empleados)}}var S1=(()=>{let e=class e{constructor(r,i){this._empleadoService=r,this.toastr=i,this.empleados=[]}ngOnInit(){this.getEmpleados()}getEmpleados(){this._empleadoService.getEmpleados().subscribe(r=>{this.empleados=[],r.forEach(i=>{this.empleados.push(L({id:i.payload.doc.id},i.payload.doc.data()))}),console.log(this.empleados)})}eliminarEmpleado(r){this._empleadoService.eliminarEmpleado(r).then(()=>{console.log("Empleado eliminado con exito"),this.toastr.error("El empleado fue eliminado con exito","Registro eliminado",{positionClass:"toast-bottom-right"})}).catch(i=>{console.log(i)})}};e.\u0275fac=function(i){return new(i||e)(ie(Ng),ie(gu))},e.\u0275cmp=ln({type:e,selectors:[["app-list-empleados"]],decls:9,vars:2,consts:[[1,"container"],[1,"card"],[1,"card-body"],[1,"h3"],["routerLink","/create-empleado",1,"btn","btn-dark","btn-lg",2,"float","right"],[4,"ngIf"],["class","table table-striped mt-5",4,"ngIf"],[1,"table","table-striped","mt-5"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-pen-to-square","fa-lg","text-info",2,"margin-right","8px",3,"routerLink"],[1,"fa-solid","fa-trash","fa-lg","text-danger",3,"click"]],template:function(i,s){i&1&&(ye(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),Pe(4,"Listado de Empleados"),Ee(),ye(5,"button",4),Pe(6,"Agregar"),Ee(),Tn(7,e3,2,0,"h5",5)(8,n3,14,1,"table",6),Ee()()()),i&2&&(Se(7),He("ngIf",s.empleados.length==0),Se(),He("ngIf",s.empleados.length>0))},dependencies:[wM,Ns,Zf,EM],styles:["i[_ngcontent-%COMP%]{cursor:pointer}"]});let n=e;return n})();var F1=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ie(Ts),ie(Lr))},e.\u0275dir=At({type:e});let n=e;return n})(),V1=(()=>{let e=class e extends F1{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ta(e)))(s||e)}})(),e.\u0275dir=At({type:e,features:[$r]});let n=e;return n})(),RC=new q("");var r3={provide:RC,useExisting:Ds(()=>Ug),multi:!0};function i3(){let n=ur()?ur().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var s3=new q(""),Ug=(()=>{let e=class e extends F1{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!i3())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ie(Ts),ie(Lr),ie(s3,8))},e.\u0275dir=At({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ft("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[cc([r3]),$r]});let n=e;return n})();function ns(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function L1(n){return n!=null&&typeof n.length=="number"}var j1=new q(""),B1=new q(""),o3=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,yo=class{static min(e){return a3(e)}static max(e){return u3(e)}static required(e){return c3(e)}static requiredTrue(e){return l3(e)}static email(e){return d3(e)}static minLength(e){return h3(e)}static maxLength(e){return f3(e)}static pattern(e){return p3(e)}static nullValidator(e){return U1(e)}static compose(e){return W1(e)}static composeAsync(e){return Q1(e)}};function a3(n){return e=>{if(ns(e.value)||ns(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function u3(n){return e=>{if(ns(e.value)||ns(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function c3(n){return ns(n.value)?{required:!0}:null}function l3(n){return n.value===!0?null:{required:!0}}function d3(n){return ns(n.value)||o3.test(n.value)?null:{email:!0}}function h3(n){return e=>ns(e.value)||!L1(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function f3(n){return e=>L1(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function p3(n){if(!n)return U1;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ns(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function U1(n){return null}function $1(n){return n!=null}function H1(n){return xs(n)?De(n):n}function q1(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function z1(n,e){return e.map(t=>t(n))}function g3(n){return!n.validate}function G1(n){return n.map(e=>g3(e)?e:t=>e.validate(t))}function W1(n){if(!n)return null;let e=n.filter($1);return e.length==0?null:function(t){return q1(z1(t,e))}}function K1(n){return n!=null?W1(G1(n)):null}function Q1(n){if(!n)return null;let e=n.filter($1);return e.length==0?null:function(t){let r=z1(t,e).map(H1);return Fm(r).pipe(ne(q1))}}function Y1(n){return n!=null?Q1(G1(n)):null}function A1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Z1(n){return n._rawValidators}function J1(n){return n._rawAsyncValidators}function SC(n){return n?Array.isArray(n)?n:[n]:[]}function kg(n,e){return Array.isArray(n)?n.includes(e):n===e}function M1(n,e){let t=SC(e);return SC(n).forEach(i=>{kg(t,i)||t.push(i)}),t}function x1(n,e){return SC(e).filter(t=>!kg(n,t))}var Og=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=K1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Y1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},vu=class extends Og{get formDirective(){return null}get path(){return null}},Hl=class extends Og{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Fg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},m3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},xX=ce(L({},m3),{"[class.ng-submitted]":"isSubmitted"}),X1=(()=>{let e=class e extends Fg{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ie(Hl,2))},e.\u0275dir=At({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Kh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[$r]});let n=e;return n})(),ek=(()=>{let e=class e extends Fg{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ie(vu,10))},e.\u0275dir=At({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Kh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[$r]});let n=e;return n})();var jl="VALID",Rg="INVALID",mu="PENDING",Bl="DISABLED",rs=class{},Vg=class extends rs{constructor(e,t){super(),this.value=e,this.source=t}},Ul=class extends rs{constructor(e,t){super(),this.pristine=e,this.source=t}},$l=class extends rs{constructor(e,t){super(),this.touched=e,this.source=t}},yu=class extends rs{constructor(e,t){super(),this.status=e,this.source=t}},AC=class extends rs{constructor(e){super(),this.source=e}},MC=class extends rs{constructor(e){super(),this.source=e}};function PC(n){return($g(n)?n.validators:n)||null}function y3(n){return Array.isArray(n)?K1(n):n||null}function kC(n,e){return($g(e)?e.asyncValidators:n)||null}function v3(n){return Array.isArray(n)?Y1(n):n||null}function $g(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function tk(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[t])throw new j(1001,"")}function nk(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new j(1002,"")})}var _u=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new Me,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jl}get invalid(){return this.status===Rg}get pending(){return this.status==mu}get disabled(){return this.status===Bl}get enabled(){return this.status!==Bl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(M1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(M1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(x1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(x1(e,this._rawAsyncValidators))}hasValidator(e){return kg(this._rawValidators,e)}hasAsyncValidator(e){return kg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $l(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new $l(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ce(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ul(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ul(!0,r))}markAsPending(e={}){this.status=mu;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yu(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ce(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this.errors=null,this._forEachChild(i=>{i.disable(ce(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vg(this.value,r)),this._events.next(new yu(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=jl,this._forEachChild(r=>{r.enable(ce(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jl||this.status===mu)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vg(this.value,t)),this._events.next(new yu(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ce(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bl:jl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=mu,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=H1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new yu(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?Bl:this.errors?Rg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mu)?mu:this._anyControlsHaveStatus(Rg)?Rg:jl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ul(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new $l(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$g(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=y3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=v3(this._rawAsyncValidators)}},Lg=class extends _u{constructor(e,t,r){super(PC(t),kC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nk(this,!0,e),Object.keys(e).forEach(r=>{tk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xC=class extends Lg{};var rk=new q("CallSetDisabledState",{providedIn:"root",factory:()=>OC}),OC="always";function _3(n,e){return[...e.path,n]}function N1(n,e,t=OC){FC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),E3(n,e),D3(n,e),I3(n,e),w3(n,e)}function R1(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Bg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function jg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function w3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function FC(n,e){let t=Z1(n);e.validator!==null?n.setValidators(A1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=J1(n);e.asyncValidator!==null?n.setAsyncValidators(A1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();jg(e._rawValidators,i),jg(e._rawAsyncValidators,i)}function Bg(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Z1(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=J1(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return jg(e._rawValidators,r),jg(e._rawAsyncValidators,r),t}function E3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ik(n,e)})}function I3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ik(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ik(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function D3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function C3(n,e){n==null,FC(n,e)}function b3(n,e){return Bg(n,e)}function T3(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function S3(n){return Object.getPrototypeOf(n.constructor)===V1}function A3(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function M3(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ug?t=s:S3(s)?r=s:i=s}),i||r||t||null}function x3(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function P1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function k1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Pg=class extends _u{constructor(e=null,t,r){super(PC(t),kC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$g(t)&&(t.nonNullable||t.initialValueIsDefault)&&(k1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){P1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){P1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){k1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var N3=n=>n instanceof Pg;var sk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=At({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),R3={provide:RC,useExisting:Ds(()=>VC),multi:!0},VC=(()=>{let e=class e extends V1{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ta(e)))(s||e)}})(),e.\u0275dir=At({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ft("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[cc([R3]),$r]});let n=e;return n})();var ok=new q("");var P3={provide:vu,useExisting:Ds(()=>LC)},LC=(()=>{let e=class e extends vu{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new lt,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Bg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return N1(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){R1(r.control||null,r,!1),x3(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,A3(this.form,this.directives),this.ngSubmit.emit(r),this.form._events.next(new AC(this.control)),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1,this.form._events.next(new MC(this.form))}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(R1(i||null,r),N3(s)&&(N1(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);C3(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&b3(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FC(this.form,this),this._oldForm&&Bg(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(ie(j1,10),ie(B1,10),ie(rk,8))},e.\u0275dir=At({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Ft("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cc([P3]),$r,Ai]});let n=e;return n})();var k3={provide:Hl,useExisting:Ds(()=>jC)},jC=(()=>{let e=class e extends Hl{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new lt,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=M3(this,o)}ngOnChanges(r){this._added||this._setUpControl(),T3(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return _3(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(ie(vu,13),ie(j1,10),ie(B1,10),ie(RC,10),ie(ok,8))},e.\u0275dir=At({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[cc([k3]),$r,Ai]});let n=e;return n})();var O3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({});let n=e;return n})(),NC=class extends _u{constructor(e,t,r){super(PC(t),kC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){nk(this,!1,e),e.forEach((r,i)=>{tk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function O1(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ak=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return O1(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Lg(s,o)}record(r,i=null){let s=this._reduceControls(r);return new xC(s,i)}control(r,i,s){let o={};return this.useNonNullable?(O1(i)?o=i:(o.validators=i,o.asyncValidators=s),new Pg(r,ce(L({},o),{nonNullable:!0}))):new Pg(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new NC(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Pg)return r;if(r instanceof _u)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var uk=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:ok,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:rk,useValue:r.callSetDisabledState??OC}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({imports:[O3]});let n=e;return n})();function V3(n,e){n&1&&(ye(0,"div",16)(1,"span",17),Pe(2,"Loading..."),Ee()())}function L3(n,e){n&1&&(ye(0,"span",18),Pe(1,"TODOS LOS CAMPOS SON OBLIGATORIOS"),Ee())}var BC=(()=>{let e=class e{constructor(r,i,s,o,a){this.fb=r,this.empleadoService=i,this.router=s,this.toastr=o,this.aRoute=a,this.submitted=!1,this.loading=!1,this.titulo="Agregar Empleado",this.createEmpleado=this.fb.group({nombre:["",yo.required],apellido:["",yo.required],documento:["",yo.required],salario:["",yo.required]}),this.id=this.aRoute.snapshot.paramMap.get("id")}ngOnInit(){this.esEditar()}agregarEditarEmpleado(){this.submitted=!0,!this.createEmpleado.invalid&&(this.id==null?this.agregarEmpleado():this.EditarEmpleado(this.id))}agregarEmpleado(){let r={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this.empleadoService.agregarEmpleado(r).then(()=>{this.toastr.success("El empleado fue registrado con exito","Empleado Registrado",{positionClass:"toast-bottom-right"}),this.loading=!1,this.router.navigate(["/list-empleados"])}).catch(i=>{console.log(i),this.loading=!1})}EditarEmpleado(r){let i={nombre:this.createEmpleado.value.nombre,apellido:this.createEmpleado.value.apellido,documento:this.createEmpleado.value.documento,salario:this.createEmpleado.value.salario,fechaActualizacion:new Date};this.loading=!0,this.empleadoService.actualizarEmpleado(r,i).then(()=>{this.loading=!1,this.toastr.info("El empleado fue modificado con exito","Empleado modificado",{positionClass:"toast-bottom-right"}),this.router.navigate(["/list-empleados"])})}esEditar(){this.titulo="Editar Empleado",this.id!=null&&(this.loading=!0,this.empleadoService.getEmpleado(this.id).subscribe(r=>{this.loading=!1,console.log(r.payload.data().nombre),this.createEmpleado.setValue({nombre:r.payload.data().nombre,apellido:r.payload.data().apellido,documento:r.payload.data().documento,salario:r.payload.data().salario})}))}};e.\u0275fac=function(i){return new(i||e)(ie(ak),ie(Ng),ie(fr),ie(gu),ie(Yr))},e.\u0275cmp=ln({type:e,selectors:[["app-create-empleado"]],decls:22,vars:4,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card"],[1,"card-body"],["class","spinner-border float-right","role","status",4,"nglf"],["class","badge badge-danger",4,"ngIf"],[1,"mt-4",3,"ngSubmit","formGroup"],[1,"col"],["type","text","formControlName","nombre","placeholder","Nombre",1,"form-control","form-control-lg"],["type","text","formControlName","apellido","placeholder","Apellido",1,"form-control","form-control-lg"],["type","number","formControlName","documento","placeholder","Documento",1,"form-control","form-control-lg","mt-3"],["type","number","formControlName","salario","placeholder","Salario",1,"form-control","form-control-lg","mt-3"],[1,"mt-3"],["type","text","routerLink","/list-empleados",1,"btn","btn-secondary","btn-lg",2,"margin","6px"],["type","submit",1,"btn","btn-dark","btn-lg"],["role","status",1,"spinner-border","float-right"],[1,"visually-hidden"],[1,"badge","badge-danger"]],template:function(i,s){i&1&&(ye(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),Pe(6),Tn(7,V3,3,0,"div",5),Ee(),Tn(8,L3,2,0,"span",6),ye(9,"form",7),Ft("ngSubmit",function(){return s.agregarEditarEmpleado()}),ye(10,"div",1)(11,"div",8),Mt(12,"input",9),Ee(),ye(13,"div",8),Mt(14,"input",10),Ee()(),Mt(15,"input",11)(16,"input",12),ye(17,"div",13)(18,"button",14),Pe(19,"Volver"),Ee(),ye(20,"button",15),Pe(21,"Agregar"),Ee()()()()()()()()),i&2&&(Se(6),Hn("",s.titulo," "),Se(),He("nglf",s.loading),Se(),He("ngIf",s.submitted&&s.createEmpleado.invalid),Se(),He("formGroup",s.createEmpleado))},dependencies:[Ns,Zf,sk,Ug,VC,X1,ek,LC,jC]});let n=e;return n})();var j3=[{path:"",redirectTo:"list-empleados",pathMatch:"full"},{path:"list-empleados",component:S1},{path:"create-empleado",component:BC},{path:"editEmpleado/:id",component:BC},{path:"**",redirectTo:"list-empleados",pathMatch:"full"}],ck=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e}),e.\u0275inj=We({imports:[Aw.forRoot(j3),Aw]});let n=e;return n})();var B9="auth";var Hg=class{constructor(){return Gc(B9)}};var qg=function(){return qg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},qg.apply(this,arguments)};var $9={includeMetadataChanges:!1};function lk(n,e){return e===void 0&&(e=$9),new he(function(t){var r=cu(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function dk(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:qg(qg({},r),(t={},t[e.idField]=n.id,t))}function hk(n){return lk(n,{includeMetadataChanges:!0}).pipe(ne(function(e){return e.docs}))}function fk(n,e){return e===void 0&&(e={}),hk(n).pipe(ne(function(t){return t.map(function(r){return dk(r,e)})}))}var vo=class{constructor(e){return e}},pk="firestore",UC=class{constructor(){return Gc(pk)}};var $C=new q("angularfire2.firestore-instances");function H9(n,e){let t=Nw(pk,n,e);return t&&new vo(t)}function q9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vo(r)}}var z9={provide:UC,deps:[[new on,$C]]},G9={provide:vo,useFactory:H9,deps:[[new on,$C],Hs]};function gk(n,...e){return $t("angularfire",Mn.full,"fst"),Si([G9,z9,{provide:$C,useFactory:q9(n),multi:!0,deps:[ae,it,Zr,Wc,[new on,Hg],[new on,pr],...e]}])}var mk=$s(fk,!0);var yk=$s(Fl,!0);var vk=$s(ZP,!0);var _k=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ln({type:e,selectors:[["app-navbar"]],decls:3,vars:0,consts:[["data-bs-theme","dark",1,"navbar","bg-dark","border-bottom","border-body"],[1,"navbar-brand","mb-0","h1"]],template:function(i,s){i&1&&(ye(0,"nav",0)(1,"span",1),Pe(2,"App Empleados - Firebase"),Ee()())}});let n=e;return n})();var wk=(()=>{let e=class e{constructor(){this.title="empleados",this.firestore=U(vo);let r=yk(this.firestore,"items");this.items=mk(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ln({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,s){i&1&&Mt(0,"app-navbar")(1,"router-outlet")},dependencies:[Ew,_k]});let n=e;return n})();var Ek=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ke({type:e,bootstrap:[wk]}),e.\u0275inj=We({providers:[eN(()=>tN(d_.firebase)),gk(()=>vk())],imports:[hf,ck,mN.initializeApp(d_.firebase),w1,uk,cx,b1.forRoot()]});let n=e;return n})();xM().bootstrapModule(Ek,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
